(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors","chunk-21d44d07"],{"00bb":function(t,e,n){(function(e,r,i){t.exports=r(n("21bf"),n("38ba"))})(0,(function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();function n(t,e,n,r){var i,o=this._iv;o?(i=o.slice(0),this._iv=void 0):i=this._prevBlock,r.encryptBlock(i,0);for(var a=0;a<n;a++)t[e+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize;n.call(this,t,e,i,r),this._prevBlock=t.slice(e,e+i)}}),e.Decryptor=e.extend({processBlock:function(t,e){var r=this._cipher,i=r.blockSize,o=t.slice(e,e+i);n.call(this,t,e,i,r),this._prevBlock=o}}),e}(),t.mode.CFB}))},"00dc":function(t,e,n){(function(t){var r=n("58a2"),i=n("c24d"),o=n("561d");function a(e){var n=new t(i[e].prime,"hex"),r=new t(i[e].gen,"hex");return new o(n,r)}var s={binary:!0,hex:!0,base64:!0};function u(e,n,i,a){return t.isBuffer(n)||void 0===s[n]?u(e,"binary",n,i):(n=n||"binary",a=a||"binary",i=i||new t([2]),t.isBuffer(i)||(i=new t(i,a)),"number"===typeof e?new o(r(e,i),i,!0):(t.isBuffer(e)||(e=new t(e,n)),new o(e,i,!0)))}e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=a,e.createDiffieHellman=e.DiffieHellman=u}).call(this,n("b639").Buffer)},"0106":function(t,e,n){(function(t){(function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var a;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(14).Buffer}catch(E){}function s(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(t,e,n){var r=s(t,n);return n-1>=e&&(r|=s(t,n-1)<<4),r}function c(t,e,n,r){for(var i=0,o=Math.min(t.length,n),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"===typeof t)return this._initNumber(t,e,n);if("object"===typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36),t=t.toString().replace(/\s+/g,"");var i=0;"-"===t[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,s+=24,s>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else{var s=t.length-e;for(r=s%2===0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8}this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(t,l,l+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(t,l,t.length,e),l=0;l<a;l++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){while(this.length<t)this.words[this.length++]=0;return this},o.prototype.strip=function(){while(this.length>1&&0===this.words[this.length-1])this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}function p(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=h;d++){var p=c-d|0;i=0|t.words[p],o=0|e.words[d],a=i*o+f,l+=a/67108864|0,f=67108863&a}n.words[c]=0|f,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,n=0!==o||a!==this.length-1?l[6-u.length]+u+n:u+n,i+=2,i>=26&&(i-=26,a--)}0!==o&&(n=o.toString(16)+n);while(n.length%e!==0)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=f[t],d=h[t];n="";var p=this.clone();p.negative=0;while(!p.isZero()){var m=p.modn(d).toString(t);p=p.idivn(d),n=p.isZero()?m+n:l[c-m.length]+m+n}this.isZero()&&(n="0"+n);while(n.length%e!==0)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r("undefined"!==typeof a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var a,s,u="le"===e,c=new t(o),l=this.clone();if(u){for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[s]=a;for(;s<o;s++)c[s]=0}else{for(s=0;s<o-i;s++)c[s]=0;for(s=0;!l.isZero();s++)a=l.andln(255),l.iushrn(8),c[o-s-1]=a}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0===(8191&e)&&(n+=13,e>>>=13),0===(127&e)&&(n+=7,e>>>=7),0===(15&e)&&(n+=4,e>>>=4),0===(3&e)&&(n+=2,e>>>=2),0===(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){while(this.length<t.length)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"===typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,a=0;a<r.length;a++)e=(0|n.words[a])-(0|r.words[a])+o,o=e>>26,this.words[a]=67108863&e;for(;0!==o&&a<n.length;a++)e=(0|n.words[a])+o,o=e>>26,this.words[a]=67108863&e;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,e,n){var r,i,o,a=t.words,s=e.words,u=n.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],v=8191&g,y=g>>>13,b=0|a[3],w=8191&b,_=b>>>13,x=0|a[4],M=8191&x,S=x>>>13,k=0|a[5],C=8191&k,E=k>>>13,A=0|a[6],T=8191&A,O=A>>>13,P=0|a[7],D=8191&P,R=P>>>13,B=0|a[8],I=8191&B,N=B>>>13,L=0|a[9],F=8191&L,z=L>>>13,j=0|s[0],H=8191&j,V=j>>>13,U=0|s[1],$=8191&U,q=U>>>13,G=0|s[2],W=8191&G,K=G>>>13,X=0|s[3],Y=8191&X,Z=X>>>13,J=0|s[4],Q=8191&J,tt=J>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],ut=8191&st,ct=st>>>13,lt=0|s[8],ft=8191&lt,ht=lt>>>13,dt=0|s[9],pt=8191&dt,mt=dt>>>13;n.negative=t.negative^e.negative,n.length=19,r=Math.imul(f,H),i=Math.imul(f,V),i=i+Math.imul(h,H)|0,o=Math.imul(h,V);var gt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,H),i=Math.imul(p,V),i=i+Math.imul(m,H)|0,o=Math.imul(m,V),r=r+Math.imul(f,$)|0,i=i+Math.imul(f,q)|0,i=i+Math.imul(h,$)|0,o=o+Math.imul(h,q)|0;var vt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,H),i=Math.imul(v,V),i=i+Math.imul(y,H)|0,o=Math.imul(y,V),r=r+Math.imul(p,$)|0,i=i+Math.imul(p,q)|0,i=i+Math.imul(m,$)|0,o=o+Math.imul(m,q)|0,r=r+Math.imul(f,W)|0,i=i+Math.imul(f,K)|0,i=i+Math.imul(h,W)|0,o=o+Math.imul(h,K)|0;var yt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,H),i=Math.imul(w,V),i=i+Math.imul(_,H)|0,o=Math.imul(_,V),r=r+Math.imul(v,$)|0,i=i+Math.imul(v,q)|0,i=i+Math.imul(y,$)|0,o=o+Math.imul(y,q)|0,r=r+Math.imul(p,W)|0,i=i+Math.imul(p,K)|0,i=i+Math.imul(m,W)|0,o=o+Math.imul(m,K)|0,r=r+Math.imul(f,Y)|0,i=i+Math.imul(f,Z)|0,i=i+Math.imul(h,Y)|0,o=o+Math.imul(h,Z)|0;var bt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,H),i=Math.imul(M,V),i=i+Math.imul(S,H)|0,o=Math.imul(S,V),r=r+Math.imul(w,$)|0,i=i+Math.imul(w,q)|0,i=i+Math.imul(_,$)|0,o=o+Math.imul(_,q)|0,r=r+Math.imul(v,W)|0,i=i+Math.imul(v,K)|0,i=i+Math.imul(y,W)|0,o=o+Math.imul(y,K)|0,r=r+Math.imul(p,Y)|0,i=i+Math.imul(p,Z)|0,i=i+Math.imul(m,Y)|0,o=o+Math.imul(m,Z)|0,r=r+Math.imul(f,Q)|0,i=i+Math.imul(f,tt)|0,i=i+Math.imul(h,Q)|0,o=o+Math.imul(h,tt)|0;var wt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(C,H),i=Math.imul(C,V),i=i+Math.imul(E,H)|0,o=Math.imul(E,V),r=r+Math.imul(M,$)|0,i=i+Math.imul(M,q)|0,i=i+Math.imul(S,$)|0,o=o+Math.imul(S,q)|0,r=r+Math.imul(w,W)|0,i=i+Math.imul(w,K)|0,i=i+Math.imul(_,W)|0,o=o+Math.imul(_,K)|0,r=r+Math.imul(v,Y)|0,i=i+Math.imul(v,Z)|0,i=i+Math.imul(y,Y)|0,o=o+Math.imul(y,Z)|0,r=r+Math.imul(p,Q)|0,i=i+Math.imul(p,tt)|0,i=i+Math.imul(m,Q)|0,o=o+Math.imul(m,tt)|0,r=r+Math.imul(f,nt)|0,i=i+Math.imul(f,rt)|0,i=i+Math.imul(h,nt)|0,o=o+Math.imul(h,rt)|0;var _t=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(T,H),i=Math.imul(T,V),i=i+Math.imul(O,H)|0,o=Math.imul(O,V),r=r+Math.imul(C,$)|0,i=i+Math.imul(C,q)|0,i=i+Math.imul(E,$)|0,o=o+Math.imul(E,q)|0,r=r+Math.imul(M,W)|0,i=i+Math.imul(M,K)|0,i=i+Math.imul(S,W)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(w,Y)|0,i=i+Math.imul(w,Z)|0,i=i+Math.imul(_,Y)|0,o=o+Math.imul(_,Z)|0,r=r+Math.imul(v,Q)|0,i=i+Math.imul(v,tt)|0,i=i+Math.imul(y,Q)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=i+Math.imul(p,rt)|0,i=i+Math.imul(m,nt)|0,o=o+Math.imul(m,rt)|0,r=r+Math.imul(f,ot)|0,i=i+Math.imul(f,at)|0,i=i+Math.imul(h,ot)|0,o=o+Math.imul(h,at)|0;var xt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(D,H),i=Math.imul(D,V),i=i+Math.imul(R,H)|0,o=Math.imul(R,V),r=r+Math.imul(T,$)|0,i=i+Math.imul(T,q)|0,i=i+Math.imul(O,$)|0,o=o+Math.imul(O,q)|0,r=r+Math.imul(C,W)|0,i=i+Math.imul(C,K)|0,i=i+Math.imul(E,W)|0,o=o+Math.imul(E,K)|0,r=r+Math.imul(M,Y)|0,i=i+Math.imul(M,Z)|0,i=i+Math.imul(S,Y)|0,o=o+Math.imul(S,Z)|0,r=r+Math.imul(w,Q)|0,i=i+Math.imul(w,tt)|0,i=i+Math.imul(_,Q)|0,o=o+Math.imul(_,tt)|0,r=r+Math.imul(v,nt)|0,i=i+Math.imul(v,rt)|0,i=i+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=i+Math.imul(p,at)|0,i=i+Math.imul(m,ot)|0,o=o+Math.imul(m,at)|0,r=r+Math.imul(f,ut)|0,i=i+Math.imul(f,ct)|0,i=i+Math.imul(h,ut)|0,o=o+Math.imul(h,ct)|0;var Mt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(I,H),i=Math.imul(I,V),i=i+Math.imul(N,H)|0,o=Math.imul(N,V),r=r+Math.imul(D,$)|0,i=i+Math.imul(D,q)|0,i=i+Math.imul(R,$)|0,o=o+Math.imul(R,q)|0,r=r+Math.imul(T,W)|0,i=i+Math.imul(T,K)|0,i=i+Math.imul(O,W)|0,o=o+Math.imul(O,K)|0,r=r+Math.imul(C,Y)|0,i=i+Math.imul(C,Z)|0,i=i+Math.imul(E,Y)|0,o=o+Math.imul(E,Z)|0,r=r+Math.imul(M,Q)|0,i=i+Math.imul(M,tt)|0,i=i+Math.imul(S,Q)|0,o=o+Math.imul(S,tt)|0,r=r+Math.imul(w,nt)|0,i=i+Math.imul(w,rt)|0,i=i+Math.imul(_,nt)|0,o=o+Math.imul(_,rt)|0,r=r+Math.imul(v,ot)|0,i=i+Math.imul(v,at)|0,i=i+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,r=r+Math.imul(p,ut)|0,i=i+Math.imul(p,ct)|0,i=i+Math.imul(m,ut)|0,o=o+Math.imul(m,ct)|0,r=r+Math.imul(f,ft)|0,i=i+Math.imul(f,ht)|0,i=i+Math.imul(h,ft)|0,o=o+Math.imul(h,ht)|0;var St=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(F,H),i=Math.imul(F,V),i=i+Math.imul(z,H)|0,o=Math.imul(z,V),r=r+Math.imul(I,$)|0,i=i+Math.imul(I,q)|0,i=i+Math.imul(N,$)|0,o=o+Math.imul(N,q)|0,r=r+Math.imul(D,W)|0,i=i+Math.imul(D,K)|0,i=i+Math.imul(R,W)|0,o=o+Math.imul(R,K)|0,r=r+Math.imul(T,Y)|0,i=i+Math.imul(T,Z)|0,i=i+Math.imul(O,Y)|0,o=o+Math.imul(O,Z)|0,r=r+Math.imul(C,Q)|0,i=i+Math.imul(C,tt)|0,i=i+Math.imul(E,Q)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(M,nt)|0,i=i+Math.imul(M,rt)|0,i=i+Math.imul(S,nt)|0,o=o+Math.imul(S,rt)|0,r=r+Math.imul(w,ot)|0,i=i+Math.imul(w,at)|0,i=i+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,r=r+Math.imul(v,ut)|0,i=i+Math.imul(v,ct)|0,i=i+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,r=r+Math.imul(p,ft)|0,i=i+Math.imul(p,ht)|0,i=i+Math.imul(m,ft)|0,o=o+Math.imul(m,ht)|0,r=r+Math.imul(f,pt)|0,i=i+Math.imul(f,mt)|0,i=i+Math.imul(h,pt)|0,o=o+Math.imul(h,mt)|0;var kt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(F,$),i=Math.imul(F,q),i=i+Math.imul(z,$)|0,o=Math.imul(z,q),r=r+Math.imul(I,W)|0,i=i+Math.imul(I,K)|0,i=i+Math.imul(N,W)|0,o=o+Math.imul(N,K)|0,r=r+Math.imul(D,Y)|0,i=i+Math.imul(D,Z)|0,i=i+Math.imul(R,Y)|0,o=o+Math.imul(R,Z)|0,r=r+Math.imul(T,Q)|0,i=i+Math.imul(T,tt)|0,i=i+Math.imul(O,Q)|0,o=o+Math.imul(O,tt)|0,r=r+Math.imul(C,nt)|0,i=i+Math.imul(C,rt)|0,i=i+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(M,ot)|0,i=i+Math.imul(M,at)|0,i=i+Math.imul(S,ot)|0,o=o+Math.imul(S,at)|0,r=r+Math.imul(w,ut)|0,i=i+Math.imul(w,ct)|0,i=i+Math.imul(_,ut)|0,o=o+Math.imul(_,ct)|0,r=r+Math.imul(v,ft)|0,i=i+Math.imul(v,ht)|0,i=i+Math.imul(y,ft)|0,o=o+Math.imul(y,ht)|0,r=r+Math.imul(p,pt)|0,i=i+Math.imul(p,mt)|0,i=i+Math.imul(m,pt)|0,o=o+Math.imul(m,mt)|0;var Ct=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(F,W),i=Math.imul(F,K),i=i+Math.imul(z,W)|0,o=Math.imul(z,K),r=r+Math.imul(I,Y)|0,i=i+Math.imul(I,Z)|0,i=i+Math.imul(N,Y)|0,o=o+Math.imul(N,Z)|0,r=r+Math.imul(D,Q)|0,i=i+Math.imul(D,tt)|0,i=i+Math.imul(R,Q)|0,o=o+Math.imul(R,tt)|0,r=r+Math.imul(T,nt)|0,i=i+Math.imul(T,rt)|0,i=i+Math.imul(O,nt)|0,o=o+Math.imul(O,rt)|0,r=r+Math.imul(C,ot)|0,i=i+Math.imul(C,at)|0,i=i+Math.imul(E,ot)|0,o=o+Math.imul(E,at)|0,r=r+Math.imul(M,ut)|0,i=i+Math.imul(M,ct)|0,i=i+Math.imul(S,ut)|0,o=o+Math.imul(S,ct)|0,r=r+Math.imul(w,ft)|0,i=i+Math.imul(w,ht)|0,i=i+Math.imul(_,ft)|0,o=o+Math.imul(_,ht)|0,r=r+Math.imul(v,pt)|0,i=i+Math.imul(v,mt)|0,i=i+Math.imul(y,pt)|0,o=o+Math.imul(y,mt)|0;var Et=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(F,Y),i=Math.imul(F,Z),i=i+Math.imul(z,Y)|0,o=Math.imul(z,Z),r=r+Math.imul(I,Q)|0,i=i+Math.imul(I,tt)|0,i=i+Math.imul(N,Q)|0,o=o+Math.imul(N,tt)|0,r=r+Math.imul(D,nt)|0,i=i+Math.imul(D,rt)|0,i=i+Math.imul(R,nt)|0,o=o+Math.imul(R,rt)|0,r=r+Math.imul(T,ot)|0,i=i+Math.imul(T,at)|0,i=i+Math.imul(O,ot)|0,o=o+Math.imul(O,at)|0,r=r+Math.imul(C,ut)|0,i=i+Math.imul(C,ct)|0,i=i+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(M,ft)|0,i=i+Math.imul(M,ht)|0,i=i+Math.imul(S,ft)|0,o=o+Math.imul(S,ht)|0,r=r+Math.imul(w,pt)|0,i=i+Math.imul(w,mt)|0,i=i+Math.imul(_,pt)|0,o=o+Math.imul(_,mt)|0;var At=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(F,Q),i=Math.imul(F,tt),i=i+Math.imul(z,Q)|0,o=Math.imul(z,tt),r=r+Math.imul(I,nt)|0,i=i+Math.imul(I,rt)|0,i=i+Math.imul(N,nt)|0,o=o+Math.imul(N,rt)|0,r=r+Math.imul(D,ot)|0,i=i+Math.imul(D,at)|0,i=i+Math.imul(R,ot)|0,o=o+Math.imul(R,at)|0,r=r+Math.imul(T,ut)|0,i=i+Math.imul(T,ct)|0,i=i+Math.imul(O,ut)|0,o=o+Math.imul(O,ct)|0,r=r+Math.imul(C,ft)|0,i=i+Math.imul(C,ht)|0,i=i+Math.imul(E,ft)|0,o=o+Math.imul(E,ht)|0,r=r+Math.imul(M,pt)|0,i=i+Math.imul(M,mt)|0,i=i+Math.imul(S,pt)|0,o=o+Math.imul(S,mt)|0;var Tt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(F,nt),i=Math.imul(F,rt),i=i+Math.imul(z,nt)|0,o=Math.imul(z,rt),r=r+Math.imul(I,ot)|0,i=i+Math.imul(I,at)|0,i=i+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,r=r+Math.imul(D,ut)|0,i=i+Math.imul(D,ct)|0,i=i+Math.imul(R,ut)|0,o=o+Math.imul(R,ct)|0,r=r+Math.imul(T,ft)|0,i=i+Math.imul(T,ht)|0,i=i+Math.imul(O,ft)|0,o=o+Math.imul(O,ht)|0,r=r+Math.imul(C,pt)|0,i=i+Math.imul(C,mt)|0,i=i+Math.imul(E,pt)|0,o=o+Math.imul(E,mt)|0;var Ot=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(F,ot),i=Math.imul(F,at),i=i+Math.imul(z,ot)|0,o=Math.imul(z,at),r=r+Math.imul(I,ut)|0,i=i+Math.imul(I,ct)|0,i=i+Math.imul(N,ut)|0,o=o+Math.imul(N,ct)|0,r=r+Math.imul(D,ft)|0,i=i+Math.imul(D,ht)|0,i=i+Math.imul(R,ft)|0,o=o+Math.imul(R,ht)|0,r=r+Math.imul(T,pt)|0,i=i+Math.imul(T,mt)|0,i=i+Math.imul(O,pt)|0,o=o+Math.imul(O,mt)|0;var Pt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(F,ut),i=Math.imul(F,ct),i=i+Math.imul(z,ut)|0,o=Math.imul(z,ct),r=r+Math.imul(I,ft)|0,i=i+Math.imul(I,ht)|0,i=i+Math.imul(N,ft)|0,o=o+Math.imul(N,ht)|0,r=r+Math.imul(D,pt)|0,i=i+Math.imul(D,mt)|0,i=i+Math.imul(R,pt)|0,o=o+Math.imul(R,mt)|0;var Dt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,r=Math.imul(F,ft),i=Math.imul(F,ht),i=i+Math.imul(z,ft)|0,o=Math.imul(z,ht),r=r+Math.imul(I,pt)|0,i=i+Math.imul(I,mt)|0,i=i+Math.imul(N,pt)|0,o=o+Math.imul(N,mt)|0;var Rt=(c+r|0)+((8191&i)<<13)|0;c=(o+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(F,pt),i=Math.imul(F,mt),i=i+Math.imul(z,pt)|0,o=Math.imul(z,mt);var Bt=(c+r|0)+((8191&i)<<13)|0;return c=(o+(i>>>13)|0)+(Bt>>>26)|0,Bt&=67108863,u[0]=gt,u[1]=vt,u[2]=yt,u[3]=bt,u[4]=wt,u[5]=_t,u[6]=xt,u[7]=Mt,u[8]=St,u[9]=kt,u[10]=Ct,u[11]=Et,u[12]=At,u[13]=Tt,u[14]=Ot,u[15]=Pt,u[16]=Dt,u[17]=Rt,u[18]=Bt,0!==c&&(u[19]=c,n.length++),n};function g(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var l=o-c,f=0|t.words[l],h=0|e.words[c],d=f*h,p=67108863&d;a=a+(d/67108864|0)|0,p=p+s|0,s=67108863&p,a=a+(p>>>26)|0,i+=a>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}function v(t,e,n){var r=new y;return r.mulp(t,e,n)}function y(t,e){this.x=t,this.y=e}Math.imul||(m=p),o.prototype.mulTo=function(t,e){var n,r=this.length+t.length;return n=10===this.length&&10===t.length?m(this,t,e):r<63?p(this,t,e):r<1024?g(this,t,e):v(this,t,e),n},y.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},y.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},y.prototype.permute=function(t,e,n,r,i,o){for(var a=0;a<o;a++)r[a]=e[t[a]],i[a]=n[t[a]]},y.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=n[l+d],m=r[l+d],g=n[l+d+a],v=r[l+d+a],y=f*g-h*v;v=f*v+h*g,g=y,n[l+d]=p+g,r[l+d]=m+v,n[l+d+a]=p-g,r[l+d+a]=m-v,d!==s&&(y=u*f-c*h,h=u*h+c*f,f=y)}},y.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},y.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},y.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},y.prototype.convert13b=function(t,e,n,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)n[a]=0;r(0===o),r(0===(-8192&o))},y.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},y.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(t.words,t.length,a,r),this.convert13b(e.words,e.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,f,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,h,o,r,i),this.conjugate(h,o,r),this.normalize13b(h,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"===typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=d(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length;r++,n=n.sqr())if(0!==e[r])break;if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"===typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<n;this.words[e]=u|a,a=s>>>26-n}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return!1;var o=this.words[n];return!!(o&i)},o.prototype.imaskn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"===typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"===typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,a=t.length+n;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+s;var u=(0|t.words[i])*e;o-=67108863&u,s=(o>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)o=(0|this.words[i+n])+s,s=o>>26,this.words[i+n]=67108863&o;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)o=-(0|this.words[i])+s,s=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=this.length-t.length,r=this.clone(),i=t,a=0|i.words[i.length-1],s=this._countBits(a);n=26-s,0!==n&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var u,c=r.length-i.length;if("mod"!==e){u=new o(null),u.length=c+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var f=r.clone()._ishlnsubmul(i,1,c);0===f.negative&&(r=f,u&&(u.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|r.words[i.length+h])+(0|r.words[i.length+h-1]);d=Math.min(d/a|0,67108863),r._ishlnsubmul(i,d,h);while(0!==r.negative)d--,r.negative=0,r._ishlnsubmul(i,1,h),r.isZero()||(r.negative^=1);u&&(u.words[h]=d)}return u&&u.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:u||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;while(e.isEven()&&n.isEven())e.iushrn(1),n.iushrn(1),++c;var l=n.clone(),f=e.clone();while(!e.isZero()){for(var h=0,d=1;0===(e.words[0]&d)&&h<26;++h,d<<=1);if(h>0){e.iushrn(h);while(h-- >0)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1)}for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0){n.iushrn(p);while(p-- >0)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1)}e.cmp(n)>=0?(e.isub(n),i.isub(s),a.isub(u)):(n.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();var i,a=new o(1),s=new o(0),u=n.clone();while(e.cmpn(1)>0&&n.cmpn(1)>0){for(var c=0,l=1;0===(e.words[0]&l)&&c<26;++c,l<<=1);if(c>0){e.iushrn(c);while(c-- >0)a.isOdd()&&a.iadd(u),a.iushrn(1)}for(var f=0,h=1;0===(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0){n.iushrn(f);while(f-- >0)s.isOdd()&&s.iadd(u),s.iushrn(1)}e.cmp(n)>=0?(e.isub(n),a.isub(s)):(n.isub(e),s.isub(a))}return i=0===e.cmpn(1)?a:s,i.cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);do{while(e.isEven())e.iushrn(1);while(n.isEven())n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}while(1);return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"===typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new k(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var b={k256:null,p224:null,p192:null,p25519:null};function w(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function M(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function C(t){k.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},w.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),e=n.bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(t,e){t.iushrn(this.n,0,e)},w.prototype.imulK=function(t){return t.imul(this.k)},i(_,w),_.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var a=0|t.words[i];t.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},_.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(x,w),i(M,w),i(S,w),S.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(b[t])return b[t];var e;if("k256"===t)e=new _;else if("p224"===t)e=new x;else if("p192"===t)e=new M;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new S}return b[t]=e,e},k.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},k.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},k.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},k.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},k.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},k.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},k.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},k.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},k.prototype.isqr=function(t){return this.imul(t,t.clone())},k.prototype.sqr=function(t){return this.mul(t,t)},k.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}var i=this.m.subn(1),a=0;while(!i.isZero()&&0===i.andln(1))a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();l=new o(2*l*l).toRed(this);while(0!==this.pow(l,c).cmp(u))l.redIAdd(u);var f=this.pow(l,i),h=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=a;while(0!==d.cmp(s)){for(var m=d,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<p);var v=this.pow(f,new o(1).iushln(p-g-1));h=h.redMul(v),f=v.redSqr(),d=d.redMul(f),p=g}return h},k.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},k.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=4,r=new Array(1<<n);r[0]=new o(1).toRed(this),r[1]=t;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],t);var a=r[0],s=0,u=0,c=e.bitLength()%26;for(0===c&&(c=26),i=e.length-1;i>=0;i--){for(var l=e.words[i],f=c-1;f>=0;f--){var h=l>>f&1;a!==r[0]&&(a=this.sqr(a)),0!==h||0!==s?(s<<=1,s|=h,u++,(u===n||0===i&&0===f)&&(a=this.mul(a,r[s]),u=0,s=0)):u=0}c=26}return a},k.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},k.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new C(t)},i(C,k),C.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},C.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},C.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},C.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},C.prototype.invm=function(t){var e=this.imod(t._invmp(this.m).mul(this.r2));return e._forceRed(this)}})(t,this)}).call(this,n("62e4")(t))},"0145":function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},"014b":function(t,e,n){"use strict";var r=n("e53d"),i=n("07e3"),o=n("8e60"),a=n("63b6"),s=n("9138"),u=n("ebfd").KEY,c=n("294c"),l=n("dbdb"),f=n("45f2"),h=n("62a0"),d=n("5168"),p=n("ccb9"),m=n("6718"),g=n("47ee"),v=n("9003"),y=n("e4ae"),b=n("f772"),w=n("36c3"),_=n("1bc3"),x=n("aebd"),M=n("a159"),S=n("0395"),k=n("bf0b"),C=n("d9f6"),E=n("c3a1"),A=k.f,T=C.f,O=S.f,P=r.Symbol,D=r.JSON,R=D&&D.stringify,B="prototype",I=d("_hidden"),N=d("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),z=l("symbols"),j=l("op-symbols"),H=Object[B],V="function"==typeof P,U=r.QObject,$=!U||!U[B]||!U[B].findChild,q=o&&c((function(){return 7!=M(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=A(H,e);r&&delete H[e],T(t,e,n),r&&t!==H&&T(H,e,r)}:T,G=function(t){var e=z[t]=M(P[B]);return e._k=t,e},W=V&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},K=function(t,e,n){return t===H&&K(j,e,n),y(t),e=_(e,!0),y(n),i(z,e)?(n.enumerable?(i(t,I)&&t[I][e]&&(t[I][e]=!1),n=M(n,{enumerable:x(0,!1)})):(i(t,I)||T(t,I,x(1,{})),t[I][e]=!0),q(t,e,n)):T(t,e,n)},X=function(t,e){y(t);var n,r=g(e=w(e)),i=0,o=r.length;while(o>i)K(t,n=r[i++],e[n]);return t},Y=function(t,e){return void 0===e?M(t):X(M(t),e)},Z=function(t){var e=L.call(this,t=_(t,!0));return!(this===H&&i(z,t)&&!i(j,t))&&(!(e||!i(this,t)||!i(z,t)||i(this,I)&&this[I][t])||e)},J=function(t,e){if(t=w(t),e=_(e,!0),t!==H||!i(z,e)||i(j,e)){var n=A(t,e);return!n||!i(z,e)||i(t,I)&&t[I][e]||(n.enumerable=!0),n}},Q=function(t){var e,n=O(w(t)),r=[],o=0;while(n.length>o)i(z,e=n[o++])||e==I||e==u||r.push(e);return r},tt=function(t){var e,n=t===H,r=O(n?j:w(t)),o=[],a=0;while(r.length>a)!i(z,e=r[a++])||n&&!i(H,e)||o.push(z[e]);return o};V||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===H&&e.call(j,n),i(this,I)&&i(this[I],t)&&(this[I][t]=!1),q(this,t,x(1,n))};return o&&$&&q(H,t,{configurable:!0,set:e}),G(t)},s(P[B],"toString",(function(){return this._k})),k.f=J,C.f=K,n("6abf").f=S.f=Q,n("355d").f=Z,n("9aa9").f=tt,o&&!n("b8e3")&&s(H,"propertyIsEnumerable",Z,!0),p.f=function(t){return G(d(t))}),a(a.G+a.W+a.F*!V,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=E(d.store),it=0;rt.length>it;)m(rt[it++]);a(a.S+a.F*!V,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=P(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!V,"Object",{create:Y,defineProperty:K,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),D&&a(a.S+a.F*(!V||c((function(){var t=P();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))}))),"JSON",{stringify:function(t){var e,n,r=[t],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!W(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,R.apply(D,r)}}),P[B][N]||n("35e8")(P[B],N,P[B].valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},"0184":function(t,e,n){"use strict";var r=n("da3e");function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<n;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,n=0,r=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var o=t.length-(t.length-e)%this.blockSize;e<o;e+=this.blockSize)this._update(t,e,i,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,n=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),n+=this._flushBuffer(i,n);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},i.prototype._pad=function(t,e){if(0===e)return!1;while(e<t.length)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},"01f9":function(t,e,n){"use strict";var r=n("2d00"),i=n("5ca1"),o=n("2aba"),a=n("32e9"),s=n("84f2"),u=n("41a0"),c=n("7f20"),l=n("38fd"),f=n("2b4c")("iterator"),h=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",m="values",g=function(){return this};t.exports=function(t,e,n,v,y,b,w){u(n,e,v);var _,x,M,S=function(t){if(!h&&t in A)return A[t];switch(t){case p:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},k=e+" Iterator",C=y==m,E=!1,A=t.prototype,T=A[f]||A[d]||y&&A[y],O=T||S(y),P=y?C?S("entries"):O:void 0,D="Array"==e&&A.entries||T;if(D&&(M=l(D.call(new t)),M!==Object.prototype&&M.next&&(c(M,k,!0),r||"function"==typeof M[f]||a(M,f,g))),C&&T&&T.name!==m&&(E=!0,O=function(){return T.call(this)}),r&&!w||!h&&!E&&A[f]||a(A,f,O),s[e]=O,s[k]=g,y)if(_={values:C?O:S(m),keys:b?O:S(p),entries:P},w)for(x in _)x in A||o(A,x,_[x]);else i(i.P+i.F*(h||E),e,_);return _}},"0211":function(t,e,n){"use strict";const r=e;r._reverse=function(t){const e={};return Object.keys(t).forEach((function(n){(0|n)==n&&(n|=0);const r=t[n];e[r]=n})),e},r.der=n("8b71")},"0293":function(t,e,n){var r=n("241e"),i=n("53e2");n("ce7e")("getPrototypeOf",(function(){return function(t){return i(r(t))}}))},"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},"030f":function(t,e,n){(function(t){(function(){"use strict";var e=function(t){var e=typeof t;return null===t?"null":"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},n=function(t){return function(n){return e(n)===t}},r=function(t){return function(e){return typeof e===t}},i=function(t){return function(e){return t===e}},o=n("string"),a=n("object"),s=n("array"),u=r("boolean"),c=i(void 0),l=function(t){return null===t||void 0===t},f=function(t){return!l(t)},h=r("function"),d=r("number"),p=function(t,e){if(s(t)){for(var n=0,r=t.length;n<r;++n)if(!e(t[n]))return!1;return!0}return!1},m=function(){},g=function(t){return function(){return t()}},v=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(null,n))}},y=function(t,e){return function(n){return t(e(n))}},b=function(t){return function(){return t}},w=function(t){return t};function _(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.concat(n);return t.apply(null,i)}}var x=function(t){return function(e){return!t(e)}},M=function(t){return function(){throw new Error(t)}},S=b(!1),k=b(!0),C=tinymce.util.Tools.resolve("tinymce.ThemeManager"),E=function(){return E=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},E.apply(this,arguments)};function A(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function T(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var O,P=function(){return D},D=function(){var t=function(t){return t.isNone()},e=function(t){return t()},n=function(t){return t},r={fold:function(t,e){return t()},is:S,isSome:S,isNone:k,getOr:n,getOrThunk:e,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:b(null),getOrUndefined:b(void 0),or:n,orThunk:e,map:P,each:m,bind:P,exists:S,forall:k,filter:P,equals:t,equals_:t,toArray:function(){return[]},toString:b("none()")};return r}(),R=function(t){var e=b(t),n=function(){return i},r=function(e){return e(t)},i={fold:function(e,n){return n(t)},is:function(e){return t===e},isSome:k,isNone:S,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return R(e(t))},each:function(e){e(t)},bind:r,exists:r,forall:r,filter:function(e){return e(t)?i:D},toArray:function(){return[t]},toString:function(){return"some("+t+")"},equals:function(e){return e.is(t)},equals_:function(e,n){return e.fold(S,(function(e){return n(t,e)}))}};return i},B=function(t){return null===t||void 0===t?D:R(t)},I={some:R,none:P,from:B},N=Array.prototype.slice,L=Array.prototype.indexOf,F=Array.prototype.push,z=function(t,e){return L.call(t,e)},j=function(t,e){var n=z(t,e);return-1===n?I.none():I.some(n)},H=function(t,e){return z(t,e)>-1},V=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n))return!0}return!1},U=function(t,e){for(var n=[],r=0;r<t;r++)n.push(e(r));return n},$=function(t,e){for(var n=[],r=0;r<t.length;r+=e){var i=N.call(t,r,r+e);n.push(i)}return n},q=function(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++){var o=t[i];r[i]=e(o,i)}return r},G=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];e(i,n)}},W=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];e(r,n)}},K=function(t,e){for(var n=[],r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=e(a,i)?n:r;s.push(a)}return{pass:n,fail:r}},X=function(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];e(o,r)&&n.push(o)}return n},Y=function(t,e,n){return W(t,(function(t){n=e(n,t)})),n},Z=function(t,e,n){return G(t,(function(t){n=e(n,t)})),n},J=function(t,e,n){for(var r=0,i=t.length;r<i;r++){var o=t[r];if(e(o,r))return I.some(o);if(n(o,r))break}return I.none()},Q=function(t,e){return J(t,e,S)},tt=function(t,e){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e(i,n))return I.some(n)}return I.none()},et=function(t){for(var e=[],n=0,r=t.length;n<r;++n){if(!s(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);F.apply(e,t[n])}return e},nt=function(t,e){return et(q(t,e))},rt=function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];if(!0!==e(i,n))return!1}return!0},it=function(t){var e=N.call(t,0);return e.reverse(),e},ot=function(t,e){return X(t,(function(t){return!H(e,t)}))},at=function(t,e){for(var n={},r=0,i=t.length;r<i;r++){var o=t[r];n[String(o)]=e(o,r)}return n},st=function(t,e){var n=N.call(t,0);return n.sort(e),n},ut=function(t,e){return e>=0&&e<t.length?I.some(t[e]):I.none()},ct=function(t){return ut(t,0)},lt=function(t){return ut(t,t.length-1)},ft=h(Array.from)?Array.from:function(t){return N.call(t)},ht=function(t,e){for(var n=0;n<t.length;n++){var r=e(t[n],n);if(r.isSome())return r}return I.none()},dt=function(t){var e=function(e){return t===e},n=function(e){return dt(t)},r=function(e){return dt(t)},i=function(e){return dt(e(t))},o=function(e){return dt(t)},a=function(e){e(t)},s=function(e){return e(t)},u=function(e,n){return n(t)},c=function(e){return e(t)},l=function(e){return e(t)},f=function(){return I.some(t)};return{is:e,isValue:k,isError:S,getOr:b(t),getOrThunk:b(t),getOrDie:b(t),or:n,orThunk:r,fold:u,map:i,mapError:o,each:a,bind:s,exists:c,forall:l,toOptional:f}},pt=function(t){var e=function(t){return t()},n=function(){return M(String(t))()},r=function(t){return t},i=function(t){return t()},o=function(e){return pt(t)},a=function(e){return pt(e(t))},s=function(e){return pt(t)},u=function(e,n){return e(t)};return{is:S,isValue:S,isError:k,getOr:w,getOrThunk:e,getOrDie:n,or:r,orThunk:i,fold:u,map:o,mapError:a,each:m,bind:s,exists:S,forall:k,toOptional:I.none}},mt=function(t,e){return t.fold((function(){return pt(e)}),dt)},gt={value:dt,error:pt,fromOption:mt};(function(t){t[t["Error"]=0]="Error",t[t["Value"]=1]="Value"})(O||(O={}));var vt=function(t,e,n){return t.stype===O.Error?e(t.serror):n(t.svalue)},yt=function(t){var e=[],n=[];return G(t,(function(t){vt(t,(function(t){return n.push(t)}),(function(t){return e.push(t)}))})),{values:e,errors:n}},bt=function(t,e){return t.stype===O.Error?{stype:O.Error,serror:e(t.serror)}:t},wt=function(t,e){return t.stype===O.Value?{stype:O.Value,svalue:e(t.svalue)}:t},_t=function(t,e){return t.stype===O.Value?e(t.svalue):t},xt=function(t,e){return t.stype===O.Error?e(t.serror):t},Mt=function(t){return{stype:O.Value,svalue:t}},St=function(t){return{stype:O.Error,serror:t}},kt=function(t){return vt(t,gt.error,gt.value)},Ct=function(t){return t.fold(St,Mt)},Et={fromResult:Ct,toResult:kt,svalue:Mt,partition:yt,serror:St,bind:_t,bindError:xt,map:wt,mapError:bt,fold:vt},At=Object.keys,Tt=Object.hasOwnProperty,Ot=function(t,e){for(var n=At(t),r=0,i=n.length;r<i;r++){var o=n[r],a=t[o];e(a,o)}},Pt=function(t,e){return Dt(t,(function(t,n){return{k:n,v:e(t,n)}}))},Dt=function(t,e){var n={};return Ot(t,(function(t,r){var i=e(t,r);n[i.k]=i.v})),n},Rt=function(t){return function(e,n){t[n]=e}},Bt=function(t,e,n,r){var i={};return Ot(t,(function(t,i){(e(t,i)?n:r)(t,i)})),i},It=function(t,e){var n={};return Bt(t,e,Rt(n),m),n},Nt=function(t,e){var n=[];return Ot(t,(function(t,r){n.push(e(t,r))})),n},Lt=function(t,e){for(var n=At(t),r=0,i=n.length;r<i;r++){var o=n[r],a=t[o];if(e(a,o,t))return I.some(a)}return I.none()},Ft=function(t){return Nt(t,(function(t){return t}))},zt=function(t,e){return jt(t,e)?I.from(t[e]):I.none()},jt=function(t,e){return Tt.call(t,e)},Ht=function(t,e){return jt(t,e)&&void 0!==t[e]&&null!==t[e]},Vt=function(t){if(!s(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var e=[],n={};return G(t,(function(r,i){var o=At(r);if(1!==o.length)throw new Error("one and only one name per case");var a=o[0],u=r[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!s(u))throw new Error("case arguments must be an array");e.push(a),n[a]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=n.length;if(o!==u.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+u.length+" ("+u+"), got "+o);var s=function(t){var r=At(t);if(e.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+r.join(","));var i=rt(e,(function(t){return H(r,t)}));if(!i)throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)};return{fold:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);var o=e[i];return o.apply(null,n)},match:s,log:function(t){console.log(t,{constructors:e,constructor:a,params:n})}}}})),n},Ut={generate:Vt},$t=Object.prototype.hasOwnProperty,qt=function(t,e){return e},Gt=function(t,e){var n=a(t)&&a(e);return n?Kt(t,e):e},Wt=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0===e.length)throw new Error("Can't merge zero objects");for(var r={},i=0;i<e.length;i++){var o=e[i];for(var a in o)$t.call(o,a)&&(r[a]=t(r[a],o[a]))}return r}},Kt=Wt(Gt),Xt=Wt(qt),Yt=function(t){var e,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return n||(n=!0,e=t.apply(null,r)),e}},Zt=Ut.generate([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),Jt=function(t){return Zt.defaultedThunk(b(t))},Qt=function(t){return Zt.mergeWithThunk(b(t))},te=Zt.strict,ee=Zt.asOption,ne=Zt.defaultedThunk,re=(Zt.asDefaultedOptionThunk,Zt.mergeWithThunk),ie=(Ut.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),function(t){var e=[],n=[];return G(t,(function(t){t.fold((function(t){e.push(t)}),(function(t){n.push(t)}))})),{errors:e,values:n}}),oe=function(t,e){var n={};return Ot(t,(function(t,r){H(e,r)||(n[r]=t)})),n},ae=function(t,e){var n;return n={},n[t]=e,n},se=function(t){var e={};return G(t,(function(t){e[t.key]=t.value})),e},ue=function(t,e){return oe(t,e)},ce=function(t,e){return ae(t,e)},le=function(t){return se(t)},fe=function(t,e){return 0===t.length?gt.value(e):gt.value(Kt(e,Xt.apply(void 0,t)))},he=function(t){return gt.error(et(t))},de=function(t,e){var n=ie(t);return n.errors.length>0?he(n.errors):fe(n.values,e)},pe=function(t,e){return t.length>0?Et.svalue(Kt(e,Xt.apply(void 0,t))):Et.svalue(e)},me=function(t){return v(Et.serror,et)(t)},ge=function(t,e){var n=Et.partition(t);return n.errors.length>0?me(n.errors):pe(n.values,e)},ve=function(t){var e=Et.partition(t);return e.errors.length>0?me(e.errors):Et.svalue(e.values)},ye={consolidateObj:ge,consolidateArr:ve},be=function(t){return a(t)&&At(t).length>100?" removed due to size":JSON.stringify(t,null,2)},we=function(t){var e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):t;return q(e,(function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}))},_e=function(t,e){return Et.serror([{path:t,getErrorInfo:e}])},xe=function(t,e,n){return _e(t,(function(){return'Could not find valid *strict* value for "'+e+'" in '+be(n)}))},Me=function(t,e){return _e(t,(function(){return'Choice schema did not contain choice key: "'+e+'"'}))},Se=function(t,e,n){return _e(t,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+be(e)}))},ke=function(t,e){return _e(t,(function(){return"There are unsupported fields: ["+e.join(", ")+"] specified"}))},Ce=function(t,e){return _e(t,(function(){return e}))},Ee=Ut.generate([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),Ae=function(t,e,n){return zt(e,n).fold((function(){return xe(t,n,e)}),Et.svalue)},Te=function(t,e,n){var r=zt(t,e).fold((function(){return n(t)}),w);return Et.svalue(r)},Oe=function(t,e){return Et.svalue(zt(t,e))},Pe=function(t,e,n){var r=zt(t,e).map((function(e){return!0===e?n(t):e}));return Et.svalue(r)},De=function(t,e,n,r){return n.fold((function(n,i,o,a){var s=function(e){var o=a.extract(t.concat([n]),r,e);return Et.map(o,(function(t){return ae(i,r(t))}))},u=function(e){return e.fold((function(){var t=ae(i,r(I.none()));return Et.svalue(t)}),(function(e){var o=a.extract(t.concat([n]),r,e);return Et.map(o,(function(t){return ae(i,r(I.some(t)))}))}))};return function(){return o.fold((function(){return Et.bind(Ae(t,e,n),s)}),(function(t){return Et.bind(Te(e,n,t),s)}),(function(){return Et.bind(Oe(e,n),u)}),(function(t){return Et.bind(Pe(e,n,t),u)}),(function(t){var r=t(e),i=Et.map(Te(e,n,b({})),(function(t){return Kt(r,t)}));return Et.bind(i,s)}))}()}),(function(t,n){var i=n(e);return Et.svalue(ae(t,r(i)))}))},Re=function(t,e,n,r){var i=q(n,(function(n){return De(t,e,n,r)}));return ye.consolidateObj(i,{})},Be=function(t){var e=function(e,n,r){return t().extract(e,n,r)},n=function(){return t().toString()};return{extract:e,toString:n}},Ie=function(t){var e=function(e,n,r){return Et.bindError(t(r,n),(function(t){return Ce(e,t)}))},n=function(){return"val"};return{extract:e,toString:n}},Ne=function(t){return At(It(t,(function(t){return void 0!==t&&null!==t})))},Le=function(t){var e=Fe(t),n=Y(t,(function(t,e){return e.fold((function(e){return Kt(t,ce(e,!0))}),b(t))}),{}),r=function(t,r,i){var o=u(i)?[]:Ne(i),a=X(o,(function(t){return!Ht(n,t)}));return 0===a.length?e.extract(t,r,i):ke(t,a)};return{extract:r,toString:e.toString}},Fe=function(t){var e=function(e,n,r){return Re(e,r,t,n)},n=function(){var e=q(t,(function(t){return t.fold((function(t,e,n,r){return t+" -> "+r.toString()}),(function(t,e){return"state("+t+")"}))}));return"obj{\n"+e.join("\n")+"}"};return{extract:e,toString:n}},ze=function(t){var e=function(e,n,r){var i=q(r,(function(r,i){return t.extract(e.concat(["["+i+"]"]),n,r)}));return ye.consolidateArr(i)},n=function(){return"array("+t.toString()+")"};return{extract:e,toString:n}},je=function(t){var e=function(e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.extract(e,n,r);if(u.stype===O.Value)return u;i.push(u)}return ye.consolidateArr(i)},n=function(){return"oneOf("+q(t,(function(t){return t.toString()})).join(", ")+")"};return{extract:e,toString:n}},He=function(t,e){var n=function(e,n){return ze(Ie(t)).extract(e,w,n)},r=function(t,r,i){var o=At(i),a=n(t,o);return Et.bind(a,(function(n){var o=q(n,(function(t){return Ee.field(t,t,te(),e)}));return Fe(o).extract(t,r,i)}))},i=function(){return"setOf("+e.toString()+")"};return{extract:r,toString:i}},Ve=function(t,e){var n=Yt((function(){return e()})),r=function(t,e,r){return n().extract(t,e,r)},i=function(){return n().toString()};return{extract:r,toString:i}},Ue=b(Ie(Et.svalue)),$e=v(ze,Fe),qe=Ee.state,Ge=Ee.field,We=function(t,e,n,r,i){var o=zt(r,i);return o.fold((function(){return Se(t,r,i)}),(function(r){return r.extract(t.concat(["branch: "+i]),e,n)}))},Ke=function(t,e){var n=function(n,r,i){var o=zt(i,t);return o.fold((function(){return Me(n,t)}),(function(t){return We(n,r,i,e,t)}))},r=function(){return"chooseOn("+t+"). Possible values: "+At(e)};return{extract:n,toString:r}},Xe=Ie(Et.svalue),Ye=function(t){return $e(t)},Ze=function(){return ze(Xe)},Je=Be,Qe=function(t){return Ie((function(e){return t(e).fold(Et.serror,Et.svalue)}))},tn=function(t,e){return He((function(e){return Et.fromResult(t(e))}),e)},en=function(t,e,n,r){var i=e.extract([t],n,r);return Et.mapError(i,(function(t){return{input:r,errors:t}}))},nn=function(t,e,n){return Et.toResult(en(t,e,w,n))},rn=function(t){return t.fold((function(t){throw new Error(an(t))}),w)},on=function(t,e,n){return rn(nn(t,e,n))},an=function(t){return"Errors: \n"+we(t.errors).join("\n")+"\n\nInput object: "+be(t.input)},sn=function(t,e){return Ke(t,e)},un=function(t,e){return Ke(t,Pt(e,Fe))},cn=function(t,e){return Ve(t,e)},ln=b(Xe),fn=function(t,e){return Ie((function(n){var r=typeof n;return t(n)?Et.svalue(n):Et.serror("Expected type: "+e+" but got: "+r)}))},hn=fn(d,"number"),dn=fn(o,"string"),pn=fn(u,"boolean"),mn=fn(h,"function"),gn=function(t){var e=function(t,e){var n=t.next();while(!n.done){if(!e(n.value))return!1;n=t.next()}return!0};if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every((function(e){return gn(t[e])}));case"Map":return e(t.keys(),gn)&&e(t.values(),gn);case"Set":return e(t.keys(),gn);default:return!1}},vn=Ie((function(t){return gn(t)?Et.svalue(t):Et.serror("Expected value to be acceptable for sending via postMessage")})),yn=function(t){return Qe((function(e){return H(t,e)?gt.value(e):gt.error('Unsupported value: "'+e+'", choose one of "'+t.join(", ")+'".')}))},bn=function(t){return Ge(t,t,te(),Ue())},wn=function(t,e){return Ge(t,t,te(),e)},_n=function(t){return wn(t,hn)},xn=function(t){return wn(t,dn)},Mn=function(t,e){return Ge(t,t,te(),yn(e))},Sn=function(t){return wn(t,pn)},kn=function(t){return wn(t,mn)},Cn=function(t,e){return Ge(t,t,ee(),Ie((function(n){return Et.serror("The field: "+t+" is forbidden. "+e)})))},En=function(t,e){return Ge(t,t,te(),Fe(e))},An=function(t,e){return Ge(t,t,te(),$e(e))},Tn=function(t,e){return Ge(t,t,te(),ze(e))},On=function(t){return Ge(t,t,ee(),Ue())},Pn=function(t,e){return Ge(t,t,ee(),e)},Dn=function(t){return Pn(t,hn)},Rn=function(t){return Pn(t,dn)},Bn=function(t){return Pn(t,mn)},In=function(t,e){return Pn(t,ze(e))},Nn=function(t,e){return Pn(t,Fe(e))},Ln=function(t,e){return Pn(t,Le(e))},Fn=function(t,e){return Ge(t,t,Jt(e),Ue())},zn=function(t,e,n){return Ge(t,t,Jt(e),n)},jn=function(t,e){return zn(t,e,hn)},Hn=function(t,e){return zn(t,e,dn)},Vn=function(t,e,n){return zn(t,e,yn(n))},Un=function(t,e){return zn(t,e,pn)},$n=function(t,e){return zn(t,e,mn)},qn=function(t,e){return zn(t,e,vn)},Gn=function(t,e,n){return zn(t,e,ze(n))},Wn=function(t,e,n){return zn(t,e,Fe(n))},Kn=function(t,e){return qe(t,e)},Xn=function(t){var e=t,n=function(){return e},r=function(t){e=t};return{get:n,set:r}},Yn=function(t,e){var n=e||document,r=n.createElement("div");if(r.innerHTML=t,!r.hasChildNodes()||r.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return Qn(r.childNodes[0])},Zn=function(t,e){var n=e||document,r=n.createElement(t);return Qn(r)},Jn=function(t,e){var n=e||document,r=n.createTextNode(t);return Qn(r)},Qn=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},tr=function(t,e,n){return I.from(t.dom.elementFromPoint(e,n)).map(Qn)},er={fromHtml:Yn,fromTag:Zn,fromText:Jn,fromDom:Qn,fromPoint:tr},nr=function(t,e,n,r){var i=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!i,a=t.isiOS()||t.isAndroid(),s=a||r("(pointer:coarse)"),u=i||!o&&a&&r("(min-device-width:768px)"),c=o||a&&!u,l=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),f=!c&&!u&&!l;return{isiPad:b(i),isiPhone:b(o),isTablet:b(u),isPhone:b(c),isTouch:b(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:b(l),isDesktop:b(f)}},rr=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.test(e))return r}},ir=function(t,e){var n=rr(t,e);if(!n)return{major:0,minor:0};var r=function(t){return Number(e.replace(n,"$"+t))};return sr(r(1),r(2))},or=function(t,e){var n=String(e).toLowerCase();return 0===t.length?ar():ir(t,n)},ar=function(){return sr(0,0)},sr=function(t,e){return{major:t,minor:e}},ur={nu:sr,detect:or,unknown:ar},cr=function(t,e){var n=String(e).toLowerCase();return Q(t,(function(t){return t.search(n)}))},lr=function(t,e){return cr(t,e).map((function(t){var n=ur.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},fr=function(t,e){return cr(t,e).map((function(t){var n=ur.detect(t.versionRegexes,e);return{current:t.name,version:n}}))},hr={detectBrowser:lr,detectOs:fr},dr=function(t,e,n){return""===e||t.length>=e.length&&t.substr(n,n+e.length)===e},pr=function(t,e){return-1!==t.indexOf(e)},mr=function(t,e){return dr(t,e,t.length-e.length)},gr=function(t){return function(e){return e.replace(t,"")}},vr=gr(/^\s+|\s+$/g),yr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,br=function(t){return function(e){return pr(e,t)}},wr=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return pr(t,"edge/")&&pr(t,"chrome")&&pr(t,"safari")&&pr(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yr],search:function(t){return pr(t,"chrome")&&!pr(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return pr(t,"msie")||pr(t,"trident")}},{name:"Opera",versionRegexes:[yr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:br("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:br("firefox")},{name:"Safari",versionRegexes:[yr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(pr(t,"safari")||pr(t,"mobile/"))&&pr(t,"applewebkit")}}],_r=[{name:"Windows",search:br("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return pr(t,"iphone")||pr(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:br("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:br("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:br("linux"),versionRegexes:[]},{name:"Solaris",search:br("sunos"),versionRegexes:[]},{name:"FreeBSD",search:br("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:br("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],xr={browsers:b(wr),oses:b(_r)},Mr="Edge",Sr="Chrome",kr="IE",Cr="Opera",Er="Firefox",Ar="Safari",Tr=function(){return Or({current:void 0,version:ur.unknown()})},Or=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isEdge:r(Mr),isChrome:r(Sr),isIE:r(kr),isOpera:r(Cr),isFirefox:r(Er),isSafari:r(Ar)}},Pr={unknown:Tr,nu:Or,edge:b(Mr),chrome:b(Sr),ie:b(kr),opera:b(Cr),firefox:b(Er),safari:b(Ar)},Dr="Windows",Rr="iOS",Br="Android",Ir="Linux",Nr="OSX",Lr="Solaris",Fr="FreeBSD",zr="ChromeOS",jr=function(){return Hr({current:void 0,version:ur.unknown()})},Hr=function(t){var e=t.current,n=t.version,r=function(t){return function(){return e===t}};return{current:e,version:n,isWindows:r(Dr),isiOS:r(Rr),isAndroid:r(Br),isOSX:r(Nr),isLinux:r(Ir),isSolaris:r(Lr),isFreeBSD:r(Fr),isChromeOS:r(zr)}},Vr={unknown:jr,nu:Hr,windows:b(Dr),ios:b(Rr),android:b(Br),linux:b(Ir),osx:b(Nr),solaris:b(Lr),freebsd:b(Fr),chromeos:b(zr)},Ur=function(t,e){var n=xr.browsers(),r=xr.oses(),i=hr.detectBrowser(n,t).fold(Pr.unknown,Pr.nu),o=hr.detectOs(r,t).fold(Vr.unknown,Vr.nu),a=nr(o,i,t,e);return{browser:i,os:o,deviceType:a}},$r={detect:Ur},qr=function(t){return window.matchMedia(t).matches},Gr=Yt((function(){return $r.detect(navigator.userAgent,qr)})),Wr=function(){return Gr()},Kr=function(t,e,n){return 0!==(t.compareDocumentPosition(e)&n)},Xr=function(t,e){return Kr(t,e,Node.DOCUMENT_POSITION_CONTAINED_BY)},Yr=9,Zr=11,Jr=1,Qr=3,ti=function(t,e){var n=t.dom;if(n.nodeType!==Jr)return!1;var r=n;if(void 0!==r.matches)return r.matches(e);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(e);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(e);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},ei=function(t){return t.nodeType!==Jr&&t.nodeType!==Yr&&t.nodeType!==Zr||0===t.childElementCount},ni=function(t,e){var n=void 0===e?document:e.dom;return ei(n)?[]:q(n.querySelectorAll(t),er.fromDom)},ri=function(t,e){var n=void 0===e?document:e.dom;return ei(n)?I.none():I.from(n.querySelector(t)).map(er.fromDom)},ii=function(t,e){return t.dom===e.dom},oi=function(t,e){var n=t.dom,r=e.dom;return n!==r&&n.contains(r)},ai=function(t,e){return Xr(t.dom,e.dom)},si=function(t,e){return Wr().browser.isIE()?ai(t,e):oi(t,e)},ui=function(t){return h(t)?t:S},ci=function(t,e,n){var r=t.dom,i=ui(n);while(r.parentNode){r=r.parentNode;var o=er.fromDom(r),a=e(o);if(a.isSome())return a;if(i(o))break}return I.none()},li=function(t,e,n){var r=e(t),i=ui(n);return r.orThunk((function(){return i(t)?I.none():ci(t,e,i)}))},fi=function(t,e){return ii(t.element,e.event.target)},hi=function(t){if(!Ht(t,"can")&&!Ht(t,"abort")&&!Ht(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return on("Extracting event.handler",Le([Fn("can",k),Fn("abort",S),Fn("run",m)]),t)},di=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Z(t,(function(t,r){return t&&e(r).apply(void 0,n)}),!0)}},pi=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Z(t,(function(t,r){return t||e(r).apply(void 0,n)}),!1)}},mi=function(t){return h(t)?{can:k,abort:S,run:t}:t},gi=function(t){var e=di(t,(function(t){return t.can})),n=pi(t,(function(t){return t.abort})),r=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];G(t,(function(t){t.run.apply(void 0,e)}))};return hi({can:e,abort:n,run:r})},vi=b,yi=vi("touchstart"),bi=vi("touchmove"),wi=vi("touchend"),_i=vi("touchcancel"),xi=vi("mousedown"),Mi=vi("mousemove"),Si=vi("mouseout"),ki=vi("mouseup"),Ci=vi("mouseover"),Ei=vi("focusin"),Ai=vi("focusout"),Ti=vi("keydown"),Oi=vi("keyup"),Pi=vi("input"),Di=vi("change"),Ri=vi("click"),Bi=vi("transitionend"),Ii=vi("selectstart"),Ni=function(t){return b("alloy."+t)},Li={tap:Ni("tap")},Fi=Ni("focus"),zi=Ni("blur.post"),ji=Ni("paste.post"),Hi=Ni("receive"),Vi=Ni("execute"),Ui=Ni("focus.item"),$i=Li.tap,qi=Ni("longpress"),Gi=Ni("sandbox.close"),Wi=Ni("typeahead.cancel"),Ki=Ni("system.init"),Xi=Ni("system.touchmove"),Yi=Ni("system.touchend"),Zi=Ni("system.scroll"),Ji=Ni("system.resize"),Qi=Ni("system.attached"),to=Ni("system.detached"),eo=Ni("system.dismissRequested"),no=Ni("system.repositionRequested"),ro=Ni("focusmanager.shifted"),io=Ni("slotcontainer.visibility"),oo=Ni("change.tab"),ao=Ni("dismiss.tab"),so=Ni("highlight"),uo=Ni("dehighlight"),co=function(t,e){po(t,t.element,e,{})},lo=function(t,e,n){po(t,t.element,e,n)},fo=function(t){co(t,Vi())},ho=function(t,e,n){po(t,e,n,{})},po=function(t,e,n,r){var i=E({target:e},r);t.getSystem().triggerEvent(n,e,i)},mo=function(t,e,n,r){t.getSystem().triggerEvent(n,e,r.event)},go=function(t){return le(t)},vo=function(t,e){return{key:t,value:hi({abort:e})}},yo=function(t,e){return{key:t,value:hi({can:e})}},bo=function(t){return{key:t,value:hi({run:function(t,e){e.event.prevent()}})}},wo=function(t,e){return{key:t,value:hi({run:e})}},_o=function(t,e,n){return{key:t,value:hi({run:function(t,r){e.apply(void 0,[t,r].concat(n))}})}},xo=function(t){return function(e){return wo(t,e)}},Mo=function(t){return function(e){return{key:t,value:hi({run:function(t,n){fi(t,n)&&e(t,n)}})}}},So=function(t,e){return wo(t,(function(n,r){n.getSystem().getByUid(e).each((function(e){mo(e,e.element,t,r)}))}))},ko=function(t,e,n){var r=e.partUids[n];return So(t,r)},Co=function(t,e){return wo(t,(function(t,n){var r=n.event,i=t.getSystem().getByDom(r.target).fold((function(){var e=li(r.target,(function(e){return t.getSystem().getByDom(e).toOptional()}),S);return e.getOr(t)}),(function(t){return t}));e(t,i,n)}))},Eo=function(t){return wo(t,(function(t,e){e.cut()}))},Ao=function(t){return wo(t,(function(t,e){e.stop()}))},To=function(t,e){return Mo(t)(e)},Oo=Mo(Qi()),Po=Mo(to()),Do=Mo(Ki()),Ro=xo(Vi()),Bo=("undefined"!==typeof window?window:Function("return this;")(),function(t){var e=t.dom.nodeName;return e.toLowerCase()}),Io=function(t){return t.dom.nodeType},No=function(t){return function(e){return Io(e)===t}},Lo=No(Jr),Fo=No(Qr),zo=No(Yr),jo=No(Zr),Ho=function(t){return er.fromDom(t.dom.ownerDocument)},Vo=function(t){return zo(t)?t:Ho(t)},Uo=function(t){return er.fromDom(Vo(t).dom.documentElement)},$o=function(t){return er.fromDom(Vo(t).dom.defaultView)},qo=function(t){return I.from(t.dom.parentNode).map(er.fromDom)},Go=function(t){return qo(t)},Wo=function(t){return I.from(t.dom.offsetParent).map(er.fromDom)},Ko=function(t){return I.from(t.dom.nextSibling).map(er.fromDom)},Xo=function(t){return q(t.dom.childNodes,er.fromDom)},Yo=function(t,e){var n=t.dom.childNodes;return I.from(n[e]).map(er.fromDom)},Zo=function(t){return Yo(t,0)},Jo=function(t){return jo(t)&&f(t.dom.host)},Qo=h(Element.prototype.attachShadow)&&h(Node.prototype.getRootNode),ta=b(Qo),ea=Qo?function(t){return er.fromDom(t.dom.getRootNode())}:Vo,na=function(t){return Jo(t)?t:er.fromDom(Vo(t).dom.body)},ra=function(t){return ia(t).isSome()},ia=function(t){var e=ea(t);return Jo(e)?I.some(e):I.none()},oa=function(t){return er.fromDom(t.dom.host)},aa=function(t){if(ta()&&f(t.target)){var e=er.fromDom(t.target);if(Lo(e)&&sa(e)&&t.composed&&t.composedPath){var n=t.composedPath();if(n)return ct(n)}}return I.from(t.target)},sa=function(t){return f(t.dom.shadowRoot)},ua=function(t,e){var n=qo(t);n.each((function(n){n.dom.insertBefore(e.dom,t.dom)}))},ca=function(t,e){var n=Ko(t);n.fold((function(){var n=qo(t);n.each((function(t){fa(t,e)}))}),(function(t){ua(t,e)}))},la=function(t,e){var n=Zo(t);n.fold((function(){fa(t,e)}),(function(n){t.dom.insertBefore(e.dom,n.dom)}))},fa=function(t,e){t.dom.appendChild(e.dom)},ha=function(t,e,n){Yo(t,n).fold((function(){fa(t,e)}),(function(t){ua(t,e)}))},da=function(t,e){G(e,(function(e){ua(t,e)}))},pa=function(t,e){G(e,(function(e){fa(t,e)}))},ma=function(t){t.dom.textContent="",G(Xo(t),(function(t){ga(t)}))},ga=function(t){var e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},va=function(t){var e=Xo(t);e.length>0&&da(t,e),ga(t)},ya=function(t,e){var n=e||document,r=n.createElement("div");return r.innerHTML=t,Xo(er.fromDom(r))},ba=function(t){return t.dom.innerHTML},wa=function(t,e){var n=Ho(t),r=n.dom,i=er.fromDom(r.createDocumentFragment()),o=ya(e,r);pa(i,o),ma(t),fa(t,i)},_a=function(t){var e=er.fromTag("div"),n=er.fromDom(t.dom.cloneNode(!0));return fa(e,n),ba(e)},xa=function(t,e,n){if(!(o(n)||u(n)||d(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Ma=function(t,e,n){xa(t.dom,e,n)},Sa=function(t,e){var n=t.dom;Ot(e,(function(t,e){xa(n,e,t)}))},ka=function(t,e){var n=t.dom.getAttribute(e);return null===n?void 0:n},Ca=function(t,e){return I.from(ka(t,e))},Ea=function(t,e){var n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Aa=function(t,e){t.dom.removeAttribute(e)},Ta=function(t,e){return er.fromDom(t.dom.cloneNode(e))},Oa=function(t){return Ta(t,!1)},Pa=function(t){if(Jo(t))return"#shadow-root";var e=Oa(t);return _a(e)},Da=function(t){return Pa(t)},Ra=function(t,e,n){return ii(e,t.element)&&!ii(e,n)},Ba=go([yo(Fi(),(function(t,e){var n=e.event,r=n.originator,i=n.target;return!Ra(t,r,i)||(console.warn(Fi()+" did not get interpreted by the desired target. \nOriginator: "+Da(r)+"\nTarget: "+Da(i)+"\nCheck the "+Fi()+" event handlers"),!1)}))]),Ia=Object.freeze({__proto__:null,events:Ba}),Na=0,La=function(t){var e=new Date,n=e.getTime(),r=Math.floor(1e9*Math.random());return Na++,t+"_"+r+Na+String(n)},Fa=b("alloy-id-"),za=b("data-alloy-id"),ja=Fa(),Ha=za(),Va=function(t,e){var n=La(ja+t);return Ua(e,n),n},Ua=function(t,e){Object.defineProperty(t.dom,Ha,{value:e,writable:!0})},$a=function(t){var e=Lo(t)?t.dom[Ha]:null;return I.from(e)},qa=function(t){return La(t)},Ga=w,Wa=function(t){var e=function(e){return function(){throw new Error("The component must be in a context to send: "+e+(t?"\n"+Da(t().element)+" is not in context.":""))}};return{debugInfo:b("fake"),triggerEvent:e("triggerEvent"),triggerFocus:e("triggerFocus"),triggerEscape:e("triggerEscape"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),broadcast:e("broadcast"),broadcastOn:e("broadcastOn"),broadcastEvent:e("broadcastEvent"),isConnected:S}},Ka=Wa(),Xa=function(t,e,n){var r=n.toString(),i=r.indexOf(")")+1,o=r.indexOf("("),a=r.substring(o+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:Ya(a.slice(0,1).concat(a.slice(3)))}},t},Ya=function(t){return q(t,(function(t){return mr(t,"/*")?t.substring(0,t.length-"/*".length):t}))},Za=function(t,e){var n=t.toString(),r=n.indexOf(")")+1,i=n.indexOf("("),o=n.substring(i+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:Ya(o)}},t},Ja=function(t,e){var n=e.toString(),r=n.indexOf(")")+1,i=n.indexOf("("),o=n.substring(i+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Ya(o.slice(1))}},t},Qa=La("alloy-premade"),ts=function(t){return ce(Qa,t)},es=function(t){return zt(t,Qa)},ns=function(t){return Ja((function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t.apply(void 0,T([e.getApis(),e],n))}),t)},rs={init:function(){return is({readState:function(){return"No State required"}})}},is=function(t){return t},os=function(t,e){var n=q(e,(function(t){return Nn(t.name(),[bn("config"),Fn("state",rs)])})),r=nn("component.behaviours",Fe(n),t.behaviours).fold((function(e){throw new Error(an(e)+"\nComplete spec:\n"+JSON.stringify(t,null,2))}),(function(t){return t}));return{list:e,data:Pt(r,(function(t){var e=t.map((function(t){return{config:t.config,state:t.state.init(t.config)}}));return function(){return e}}))}},as=function(t){return t.list},ss=function(t){return t.data},us=function(t,e){var n={};return Ot(t,(function(t,r){Ot(t,(function(t,i){var o=zt(n,i).getOr([]);n[i]=o.concat([e(r,t)])}))})),n},cs=function(t){return{classes:void 0!==t.classes?t.classes:[],attributes:void 0!==t.attributes?t.attributes:{},styles:void 0!==t.styles?t.styles:{}}},ls=function(t,e){return E(E({},t),{attributes:E(E({},t.attributes),e.attributes),styles:E(E({},t.styles),e.styles),classes:t.classes.concat(e.classes)})},fs=function(t,e,n,r){var i=E({},e);G(n,(function(e){i[e.name()]=e.exhibit(t,r)}));var o=us(i,(function(t,e){return{name:t,modification:e}})),a=function(t){return Y(t,(function(t,e){return E(E({},e.modification),t)}),{})},s=Y(o.classes,(function(t,e){return e.modification.concat(t)}),[]),u=a(o.attributes),c=a(o.styles);return cs({classes:s,attributes:u,styles:c})},hs=function(t,e,n,r){try{var i=st(n,(function(n,i){var o=n[e],a=i[e],s=r.indexOf(o),u=r.indexOf(a);if(-1===s)throw new Error("The ordering for "+t+" does not have an entry for "+o+".\nOrder specified: "+JSON.stringify(r,null,2));if(-1===u)throw new Error("The ordering for "+t+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(r,null,2));return s<u?-1:u<s?1:0}));return gt.value(i)}catch(o){return gt.error([o])}},ds=function(t,e){return{handler:t,purpose:e}},ps=function(t,e){return{cHandler:t,purpose:e}},ms=function(t,e){return ps(_.apply(void 0,[t.handler].concat(e)),t.purpose)},gs=function(t){return t.cHandler},vs=function(t,e){return{name:t,handler:e}},ys=function(t,e){var n={};return G(t,(function(t){n[t.name()]=t.handlers(e)})),n},bs=function(t,e,n){var r=E(E({},n),ys(e,t));return us(r,vs)},ws=function(t,e,n,r){var i=bs(t,n,r);return Ss(i,e)},_s=function(t){var e=mi(t);return function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=[t,n].concat(r);e.abort.apply(void 0,o)?n.stop():e.can.apply(void 0,o)&&e.run.apply(void 0,o)}},xs=function(t,e){return gt.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(q(e,(function(t){return t.name})),null,2)])},Ms=function(t,e,n){var r=e[n];return r?hs("Event: "+n,"name",t,r).map((function(t){var e=q(t,(function(t){return t.handler}));return gi(e)})):xs(n,t)},Ss=function(t,e){var n=Nt(t,(function(t,n){var r=1===t.length?gt.value(t[0].handler):Ms(t,e,n);return r.map((function(r){var i=_s(r),o=t.length>1?X(e[n],(function(e){return V(t,(function(t){return t.name===e}))})).join(" > "):t[0].name;return ce(n,ds(i,o))}))}));return de(n,{})},ks="alloy.base.behaviour",Cs=function(t){var e;return nn("custom.definition",Fe([Ge("dom","dom",te(),Fe([bn("tag"),Fn("styles",{}),Fn("classes",[]),Fn("attributes",{}),On("value"),On("innerHtml")])),bn("components"),bn("uid"),Fn("events",{}),Fn("apis",{}),Ge("eventOrder","eventOrder",Qt((e={},e[Vi()]=["disabling",ks,"toggling","typeaheadevents"],e[Fi()]=[ks,"focusing","keying"],e[Ki()]=[ks,"disabling","toggling","representing"],e[Pi()]=[ks,"representing","streaming","invalidating"],e[to()]=[ks,"representing","item-events","tooltipping"],e[xi()]=["focusing",ks,"item-type-events"],e[yi()]=["focusing",ks,"item-type-events"],e[Ci()]=["item-type-events","tooltipping"],e[Hi()]=["receiving","reflecting","tooltipping"],e)),ln()),On("domModification")]),t)},Es=function(t){return E(E({},t.dom),{uid:t.uid,domChildren:q(t.components,(function(t){return t.element}))})},As=function(t){return t.domModification.fold((function(){return cs({})}),cs)},Ts=function(t){return t.events},Os=function(t,e){var n=ka(t,e);return void 0===n||""===n?[]:n.split(" ")},Ps=function(t,e,n){var r=Os(t,e),i=r.concat([n]);return Ma(t,e,i.join(" ")),!0},Ds=function(t,e,n){var r=X(Os(t,e),(function(t){return t!==n}));return r.length>0?Ma(t,e,r.join(" ")):Aa(t,e),!1},Rs=function(t){return void 0!==t.dom.classList},Bs=function(t){return Os(t,"class")},Is=function(t,e){return Ps(t,"class",e)},Ns=function(t,e){return Ds(t,"class",e)},Ls=function(t,e){Rs(t)?t.dom.classList.add(e):Is(t,e)},Fs=function(t){var e=Rs(t)?t.dom.classList:Bs(t);0===e.length&&Aa(t,"class")},zs=function(t,e){if(Rs(t)){var n=t.dom.classList;n.remove(e)}else Ns(t,e);Fs(t)},js=function(t,e){return Rs(t)&&t.dom.classList.contains(e)},Hs=function(t,e){G(e,(function(e){Ls(t,e)}))},Vs=function(t,e){G(e,(function(e){zs(t,e)}))},Us=function(t){return void 0!==t.style&&h(t.style.getPropertyValue)},$s=function(t){var e=Fo(t)?t.dom.parentNode:t.dom;if(void 0===e||null===e||null===e.ownerDocument)return!1;var n=e.ownerDocument;return ia(er.fromDom(e)).fold((function(){return n.body.contains(e)}),y($s,oa))},qs=function(){return Gs(er.fromDom(document))},Gs=function(t){var e=t.dom.body;if(null===e||void 0===e)throw new Error("Body is not available yet");return er.fromDom(e)},Ws=function(t,e,n){if(!o(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Us(t)&&t.style.setProperty(e,n)},Ks=function(t,e){Us(t)&&t.style.removeProperty(e)},Xs=function(t,e,n){var r=t.dom;Ws(r,e,n)},Ys=function(t,e){var n=t.dom;Ot(e,(function(t,e){Ws(n,e,t)}))},Zs=function(t,e){var n=t.dom;Ot(e,(function(t,e){t.fold((function(){Ks(n,e)}),(function(t){Ws(n,e,t)}))}))},Js=function(t,e){var n=t.dom,r=window.getComputedStyle(n),i=r.getPropertyValue(e);return""!==i||$s(t)?i:Qs(n,e)},Qs=function(t,e){return Us(t)?t.style.getPropertyValue(e):""},tu=function(t,e){var n=t.dom,r=Qs(n,e);return I.from(r).filter((function(t){return t.length>0}))},eu=function(t){var e={},n=t.dom;if(Us(n))for(var r=0;r<n.style.length;r++){var i=n.style.item(r);e[i]=n.style[i]}return e},nu=function(t,e,n){var r=er.fromTag(t);Xs(r,e,n);var i=tu(r,e);return i.isSome()},ru=function(t,e){var n=t.dom;Ks(n,e),Ca(t,"style").map(vr).is("")&&Aa(t,"style")},iu=function(t){return t.dom.offsetWidth},ou=function(t){return t.dom.value},au=function(t,e){if(void 0===e)throw new Error("Value.set was undefined");t.dom.value=e},su=function(t){var e=er.fromTag(t.tag);Sa(e,t.attributes),Hs(e,t.classes),Ys(e,t.styles),t.innerHtml.each((function(t){return wa(e,t)}));var n=t.domChildren;return pa(e,n),t.value.each((function(t){au(e,t)})),t.uid,Ua(e,t.uid),e},uu=function(t){var e=zt(t,"behaviours").getOr({}),n=X(At(e),(function(t){return void 0!==e[t]}));return q(n,(function(t){return e[t].me}))},cu=function(t,e){return os(t,e)},lu=function(t){var e=uu(t);return cu(t,e)},fu=function(t,e,n){var r=Es(t),i=As(t),o={"alloy.base.modification":i},a=e.length>0?fs(n,o,e,r):i;return ls(r,a)},hu=function(t,e,n){var r={"alloy.base.behaviour":Ts(t)};return ws(n,t.eventOrder,e,r).getOrDie()},du=function(t){var e=function(){return b},n=Xn(Ka),r=rn(Cs(t)),i=lu(t),o=as(i),a=ss(i),s=fu(r,o,a),u=su(s),c=hu(r,o,a),l=Xn(r.components),f=function(t){n.set(t)},d=function(){n.set(Wa(e))},p=function(){var t=Xo(u),e=nt(t,(function(t){return n.get().getByDom(t).fold((function(){return[]}),(function(t){return[t]}))}));l.set(e)},m=function(e){var n=a,r=h(n[e.name()])?n[e.name()]:function(){throw new Error("Could not find "+e.name()+" in "+JSON.stringify(t,null,2))};return r()},g=function(t){return h(a[t.name()])},v=function(){return r.apis},y=function(t){return a[t]().map((function(t){return t.state.readState()})).getOr("not enabled")},b={getSystem:n.get,config:m,hasConfigured:g,spec:t,readState:y,getApis:v,connect:f,disconnect:d,element:u,syncComponents:p,components:l.get,events:c};return b},pu=function(t){var e=zt(t,"components").getOr([]);return q(e,bu)},mu=function(t){var e=Ga(t),n=e.events,r=A(e,["events"]),i=pu(r),o=E(E({},r),{events:E(E({},Ia),n),components:i});return gt.value(du(o))},gu=function(t){var e=er.fromText(t);return vu({element:e})},vu=function(t){var e=on("external.component",Le([bn("element"),On("uid")]),t),n=Xn(Wa()),r=function(t){n.set(t)},i=function(){n.set(Wa((function(){return o})))};e.uid.each((function(t){Ua(e.element,t)}));var o={getSystem:n.get,config:I.none,hasConfigured:S,connect:r,disconnect:i,getApis:function(){return{}},element:e.element,spec:t,readState:b("No state"),syncComponents:m,components:b([]),events:{}};return ts(o)},yu=qa,bu=function(t){return es(t).fold((function(){var e=t.hasOwnProperty("uid")?t:E({uid:yu("")},t);return mu(e).getOrDie()}),(function(t){return t}))},wu=ts,_u=function(t,e){var n=function(e,n){if(!d(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);var r=e.dom;Us(r)&&(r.style[t]=n+"px")},r=function(n){var r=e(n);if(r<=0||null===r){var i=Js(n,t);return parseFloat(i)||0}return r},i=r,o=function(t,e){return Z(e,(function(e,n){var r=Js(t,n),i=void 0===r?0:parseInt(r,10);return isNaN(i)?e:e+i}),0)},a=function(t,e,n){var r=o(t,n),i=e>r?e-r:0;return i};return{set:n,get:r,getOuter:i,aggregate:o,max:a}},xu=_u("height",(function(t){var e=t.dom;return $s(t)?e.getBoundingClientRect().height:e.offsetHeight})),Mu=function(t){return xu.get(t)},Su=function(t){return xu.getOuter(t)},ku=function(t,e){var n=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],r=xu.max(t,e,n);Xs(t,"max-height",r+"px")},Cu=function(t,e){var n=function(n,r){return Cu(t+n,e+r)};return{left:t,top:e,translate:n}},Eu=Cu,Au=function(t){var e=t.getBoundingClientRect();return Eu(e.left,e.top)},Tu=function(t,e){return void 0!==t?t:void 0!==e?e:0},Ou=function(t){var e=t.dom.ownerDocument,n=e.body,r=e.defaultView,i=e.documentElement;if(n===t.dom)return Eu(n.offsetLeft,n.offsetTop);var o=Tu(null===r||void 0===r?void 0:r.pageYOffset,i.scrollTop),a=Tu(null===r||void 0===r?void 0:r.pageXOffset,i.scrollLeft),s=Tu(i.clientTop,n.clientTop),u=Tu(i.clientLeft,n.clientLeft);return Pu(t).translate(a-u,o-s)},Pu=function(t){var e=t.dom,n=e.ownerDocument,r=n.body;return r===e?Eu(r.offsetLeft,r.offsetTop):$s(t)?Au(e):Eu(0,0)},Du=_u("width",(function(t){return t.dom.offsetWidth})),Ru=function(t,e){return Du.set(t,e)},Bu=function(t){return Du.get(t)},Iu=function(t){return Du.getOuter(t)},Nu=function(t,e){var n=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],r=Du.max(t,e,n);Xs(t,"max-width",r+"px")},Lu=function(t,e,n,r,i,o,a){return{target:t,x:e,y:n,stop:r,prevent:i,kill:o,raw:a}},Fu=function(t){var e=er.fromDom(aa(t).getOr(t.target)),n=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},i=v(r,n);return Lu(e,t.clientX,t.clientY,n,r,i,t)},zu=function(t,e){return function(n){t(n)&&e(Fu(n))}},ju=function(t,e,n,r,i){var o=zu(n,r);return t.dom.addEventListener(e,o,i),{unbind:_(Uu,t,e,o,i)}},Hu=function(t,e,n,r){return ju(t,e,n,r,!1)},Vu=function(t,e,n,r){return ju(t,e,n,r,!0)},Uu=function(t,e,n,r){t.dom.removeEventListener(e,n,r)},$u=function(t){var e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,r=e.body.scrollTop||e.documentElement.scrollTop;return Eu(n,r)},qu=function(t,e,n){var r=void 0!==n?n.dom:document,i=r.defaultView;i&&i.scrollTo(t,e)},Gu=function(t){var e=void 0===t?window:t;return I.from(e["visualViewport"])},Wu=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},Ku=function(t){var e=void 0===t?window:t,n=e.document,r=$u(er.fromDom(n));return Gu(e).fold((function(){var t=e.document.documentElement,n=t.clientWidth,i=t.clientHeight;return Wu(r.left,r.top,n,i)}),(function(t){return Wu(Math.max(t.pageLeft,r.left),Math.max(t.pageTop,r.top),t.width,t.height)}))},Xu=function(t,e){var n=t.view(e);return n.fold(b([]),(function(e){var n=t.owner(e),r=Xu(t,n);return[e].concat(r)}))},Yu=function(t,e){var n=e.owner(t),r=Xu(e,n);return I.some(r)},Zu=function(t){var e,n=t.dom===document?I.none():I.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement);return n.map(er.fromDom)},Ju=function(t){return Ho(t)},Qu=Object.freeze({__proto__:null,view:Zu,owner:Ju}),tc=function(t){var e=er.fromDom(document),n=$u(e),r=Yu(t,Qu);return r.fold(_(Ou,t),(function(e){var r=Pu(t),i=Y(e,(function(t,e){var n=Pu(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Eu(i.left+r.left+n.left,i.top+r.top+n.top)}))},ec=function(t,e,n){return{point:t,width:e,height:n}},nc=function(t,e,n,r){return{x:t,y:e,width:n,height:r}},rc=function(t,e,n,r){return{x:t,y:e,width:n,height:r,right:t+n,bottom:e+r}},ic=function(t){var e=Ou(t),n=Iu(t),r=Su(t);return rc(e.left,e.top,n,r)},oc=function(t){var e=tc(t),n=Iu(t),r=Su(t);return rc(e.left,e.top,n,r)},ac=function(){return Ku(window)};function sc(t,e,n,r,i){return t(n,r)?I.some(n):h(i)&&i(n)?I.none():e(n,r,i)}var uc,cc=function(t,e,n){var r=t.dom,i=h(n)?n:S;while(r.parentNode){r=r.parentNode;var o=er.fromDom(r);if(e(o))return I.some(o);if(i(o))break}return I.none()},lc=function(t,e,n){var r=function(t,e){return e(t)};return sc(r,cc,t,e,n)},fc=function(t,e){var n=function(t){for(var r=0;r<t.childNodes.length;r++){var i=er.fromDom(t.childNodes[r]);if(e(i))return I.some(i);var o=n(t.childNodes[r]);if(o.isSome())return o}return I.none()};return n(t.dom)},hc=function(t,e,n){return lc(t,e,n).isSome()},dc=function(t,e,n){return cc(t,(function(t){return ti(t,e)}),n)},pc=function(t,e){return ri(e,t)},mc=function(t,e,n){var r=function(t,e){return ti(t,e)};return sc(r,dc,t,e,n)},gc=function(t){var e=lc(t,(function(t){if(!Lo(t))return!1;var e=ka(t,"id");return void 0!==e&&e.indexOf("aria-owns")>-1}));return e.bind((function(t){var e=ka(t,"id"),n=ea(t);return pc(n,'[aria-owns="'+e+'"]')}))},vc=function(){var t=La("aria-owns"),e=function(e){Ma(e,"aria-owns",t)},n=function(t){Aa(t,"aria-owns")};return{id:t,link:e,unlink:n}},yc=function(t,e){return gc(e).exists((function(e){return bc(t,e)}))},bc=function(t,e){return hc(e,(function(e){return ii(e,t.element)}),S)||yc(t,e)},wc="unknown";(function(t){t[t["STOP"]=0]="STOP",t[t["NORMAL"]=1]="NORMAL",t[t["LOGGING"]=2]="LOGGING"})(uc||(uc={}));var _c,xc=Xn({}),Mc=function(t,e){var n=[],r=(new Date).getTime();return{logEventCut:function(t,e,r){n.push({outcome:"cut",target:e,purpose:r})},logEventStopped:function(t,e,r){n.push({outcome:"stopped",target:e,purpose:r})},logNoParent:function(t,e,r){n.push({outcome:"no-parent",target:e,purpose:r})},logEventNoHandlers:function(t,e){n.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,r){n.push({outcome:"response",purpose:r,target:e})},write:function(){var i=(new Date).getTime();H(["mousemove","mouseover","mouseout",Ki()],t)||console.log(t,{event:t,time:i-r,target:e.dom,sequence:q(n,(function(t){return H(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Da(t.target)+")":t.outcome}))})}}},Sc=function(t,e,n){var r=zt(xc.get(),t).orThunk((function(){var e=At(xc.get());return ht(e,(function(e){return t.indexOf(e)>-1?I.some(xc.get()[e]):I.none()}))})).getOr(uc.NORMAL);switch(r){case uc.NORMAL:return n(Tc());case uc.LOGGING:var i=Mc(t,e),o=n(i);return i.write(),o;case uc.STOP:return!0}},kc=["alloy/data/Fields","alloy/debugging/Debugging"],Cc=function(){var t=new Error;if(void 0!==t.stack){var e=t.stack.split("\n");return Q(e,(function(t){return t.indexOf("alloy")>0&&!V(kc,(function(e){return t.indexOf(e)>-1}))})).getOr(wc)}return wc},Ec={logEventCut:m,logEventStopped:m,logNoParent:m,logEventNoHandlers:m,logEventResponse:m,write:m},Ac=function(t,e,n){return Sc(t,e,n)},Tc=b(Ec),Oc=b([bn("menu"),bn("selectedMenu")]),Pc=b([bn("item"),bn("selectedItem")]),Dc=(b(Fe(Pc().concat(Oc()))),b(Fe(Pc()))),Rc=En("initSize",[bn("numColumns"),bn("numRows")]),Bc=function(){return wn("markers",Dc())},Ic=function(){return En("markers",[bn("backgroundMenu")].concat(Oc()).concat(Pc()))},Nc=function(t){return En("markers",q(t,bn))},Lc=function(t,e,n){Cc();return Ge(e,e,n,Qe((function(t){return gt.value((function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.apply(void 0,e)}))})))},Fc=function(t){return Lc("onHandler",t,Jt(m))},zc=function(t){return Lc("onKeyboardHandler",t,Jt(I.none))},jc=function(t){return Lc("onHandler",t,te())},Hc=function(t){return Lc("onKeyboardHandler",t,te())},Vc=function(t,e){return Kn(t,b(e))},Uc=function(t){return Kn(t,w)},$c=b(Rc),qc=function(t,e,n,r,i,o){return{x:t,y:e,bubble:n,direction:r,boundsRestriction:i,label:o}},Gc=Ut.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Wc=function(t,e,n,r,i,o,a,s,u){return t.fold(e,n,r,i,o,a,s,u)},Kc=function(t,e,n,r){return t.fold(e,e,r,r,e,r,n,n)},Xc=function(t,e,n,r){return t.fold(e,r,e,r,n,n,e,r)},Yc=Gc.southeast,Zc=Gc.southwest,Jc=Gc.northeast,Qc=Gc.northwest,tl=Gc.south,el=Gc.north,nl=Gc.east,rl=Gc.west,il=function(t,e){switch(e){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},ol=function(t,e){return at(["left","right","top","bottom"],(function(n){return zt(e,n).map((function(e){return il(t,e)}))}))},al=function(t,e,n){var r=function(t,r){var i="top"===t||"bottom"===t?n.top:n.left;return zt(e,t).bind(w).bind((function(e){return"left"===t||"top"===t?e>=r?I.some(e):I.none():e<=r?I.some(e):I.none()})).map((function(t){return t+i})).getOr(r)},i=r("left",t.x),o=r("top",t.y),a=r("right",t.right),s=r("bottom",t.bottom);return rc(i,o,a-i,s-o)},sl=function(t){return t.x},ul=function(t,e){return t.x+t.width/2-e.width/2},cl=function(t,e){return t.x+t.width-e.width},ll=function(t,e){return t.y-e.height},fl=function(t){return t.y+t.height},hl=function(t,e){return t.y+t.height/2-e.height/2},dl=function(t){return t.x+t.width},pl=function(t,e){return t.x-e.width},ml=function(t,e,n){return qc(sl(t),fl(t),n.southeast(),Yc(),ol(t,{left:1,top:3}),"layout-se")},gl=function(t,e,n){return qc(cl(t,e),fl(t),n.southwest(),Zc(),ol(t,{right:0,top:3}),"layout-sw")},vl=function(t,e,n){return qc(sl(t),ll(t,e),n.northeast(),Jc(),ol(t,{left:1,bottom:2}),"layout-ne")},yl=function(t,e,n){return qc(cl(t,e),ll(t,e),n.northwest(),Qc(),ol(t,{right:0,bottom:2}),"layout-nw")},bl=function(t,e,n){return qc(ul(t,e),ll(t,e),n.north(),el(),ol(t,{bottom:2}),"layout-n")},wl=function(t,e,n){return qc(ul(t,e),fl(t),n.south(),tl(),ol(t,{top:3}),"layout-s")},_l=function(t,e,n){return qc(dl(t),hl(t,e),n.east(),nl(),ol(t,{left:0}),"layout-e")},xl=function(t,e,n){return qc(pl(t,e),hl(t,e),n.west(),rl(),ol(t,{right:1}),"layout-w")},Ml=function(){return[ml,gl,vl,yl,wl,bl,_l,xl]},Sl=function(){return[gl,ml,yl,vl,wl,bl,_l,xl]},kl=function(){return[vl,yl,ml,gl,bl,wl]},Cl=function(){return[yl,vl,gl,ml,bl,wl]},El=function(){return[ml,gl,vl,yl,wl,bl]},Al=function(){return[gl,ml,yl,vl,wl,bl]},Tl=function(t,e){return e.universal?t:X(t,(function(t){return H(e.channels,t)}))},Ol=function(t){return go([wo(Hi(),(function(e,n){var r=t.channels,i=At(r),o=n,a=Tl(i,o);G(a,(function(t){var n=r[t],i=n.schema,a=on("channel["+t+"] data\nReceiver: "+Da(e.element),i,o.data);n.onReceive(e,a)}))}))])},Pl=Object.freeze({__proto__:null,events:Ol}),Dl=[wn("channels",tn(gt.value,Le([jc("onReceive"),Fn("schema",ln())])))],Rl=function(t,e,n){return Ro((function(r){n(r,t,e)}))},Bl=function(t,e,n){return Do((function(r,i){n(r,t,e)}))},Il=function(t,e,n,r,i,o){var a=Le(t),s=Nn(e,[Ln("config",t)]);return zl(a,s,e,n,r,i,o)},Nl=function(t,e,n,r,i,o){var a=t,s=Nn(e,[Pn("config",t)]);return zl(a,s,e,n,r,i,o)},Ll=function(t,e,n){var r=function(r){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=[r].concat(i);return r.config({name:b(t)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+n)}),(function(t){var n=Array.prototype.slice.call(a,1);return e.apply(void 0,[r,t.config,t.state].concat(n))}))};return Xa(r,n,e)},Fl=function(t){return{key:t,value:void 0}},zl=function(t,e,n,r,i,o,a){var s=function(t){return Ht(t,n)?t[n]():I.none()},u=Pt(i,(function(t,e){return Ll(n,t,e)})),c=Pt(o,(function(t,e){return Za(t,e)})),l=E(E(E({},c),u),{revoke:_(Fl,n),config:function(e){var r=on(n+"-config",t,e);return{key:n,value:{config:r,me:l,configAsRaw:Yt((function(){return on(n+"-config",t,e)})),initialConfig:e,state:a}}},schema:b(e),exhibit:function(t,e){return s(t).bind((function(t){return zt(r,"exhibit").map((function(n){return n(e,t.config,t.state)}))})).getOr(cs({}))},name:b(n),handlers:function(t){return s(t).map((function(t){var e=zt(r,"events").getOr((function(){return{}}));return e(t.config,t.state)})).getOr({})}});return l},jl=function(t){return le(t)},Hl=Le([bn("fields"),bn("name"),Fn("active",{}),Fn("apis",{}),Fn("state",rs),Fn("extra",{})]),Vl=function(t){var e=on("Creating behaviour: "+t.name,Hl,t);return Il(e.fields,e.name,e.active,e.apis,e.extra,e.state)},Ul=Le([bn("branchKey"),bn("branches"),bn("name"),Fn("active",{}),Fn("apis",{}),Fn("state",rs),Fn("extra",{})]),$l=function(t){var e=on("Creating behaviour: "+t.name,Ul,t);return Nl(un(e.branchKey,e.branches),e.name,e.active,e.apis,e.extra,e.state)},ql=b(void 0),Gl=Vl({fields:Dl,name:"receiving",active:Pl}),Wl=function(t,e){return cs({classes:[],styles:e.useFixed()?{}:{position:"relative"}})},Kl=Object.freeze({__proto__:null,exhibit:Wl}),Xl=function(){return er.fromDom(document)},Yl=function(t){return t.dom.focus()},Zl=function(t){return t.dom.blur()},Jl=function(t){var e=ea(t).dom;return t.dom===e.activeElement},Ql=function(t){return void 0===t&&(t=Xl()),I.from(t.dom.activeElement).map(er.fromDom)},tf=function(t){return Ql(ea(t)).filter((function(e){return t.dom.contains(e.dom)}))},ef=function(t,e){var n=ea(e),r=Ql(n).bind((function(t){var n=function(e){return ii(t,e)};return n(e)?I.some(e):fc(e,n)})),i=t(e);return r.each((function(t){Ql(n).filter((function(e){return ii(e,t)})).fold((function(){Yl(t)}),m)})),i},nf=function(t,e,n,r,i){return{position:t,left:e,top:n,right:r,bottom:i}},rf=function(t,e){var n=function(t){return t+"px"};Zs(t,{position:I.some(e.position),left:e.left.map(n),top:e.top.map(n),right:e.right.map(n),bottom:e.bottom.map(n)})},of=Ut.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),af=function(t,e,n,r,i,o){var a=e.x-n,s=e.y-r,u=e.width,c=e.height,l=i-(a+u),f=o-(s+c),h=I.some(a),d=I.some(s),p=I.some(l),m=I.some(f),g=I.none();return Wc(e.direction,(function(){return nf(t,h,d,g,g)}),(function(){return nf(t,g,d,p,g)}),(function(){return nf(t,h,g,g,m)}),(function(){return nf(t,g,g,p,m)}),(function(){return nf(t,h,d,g,g)}),(function(){return nf(t,h,g,g,m)}),(function(){return nf(t,h,d,g,g)}),(function(){return nf(t,g,d,p,g)}))},sf=function(t,e){return t.fold((function(){return nf("absolute",I.some(e.x),I.some(e.y),I.none(),I.none())}),(function(t,n,r,i){return af("absolute",e,t,n,r,i)}),(function(t,n,r,i){return af("fixed",e,t,n,r,i)}))},uf=function(t,e){var n=_(tc,e),r=t.fold(n,n,(function(){var t=$u();return tc(e).translate(-t.left,-t.top)})),i=Iu(e),o=Su(e);return rc(r.left,r.top,i,o)},cf=function(t,e){return e.fold((function(){return t.fold(ac,ac,rc)}),(function(e){return t.fold(e,e,(function(){var n=e(),r=lf(t,n.x,n.y);return rc(r.left,r.top,n.width,n.height)}))}))},lf=function(t,e,n){var r=Eu(e,n),i=function(){var t=$u();return r.translate(-t.left,-t.top)};return t.fold(b(r),b(r),i)},ff=function(t,e,n,r){return t.fold(e,n,r)},hf=(of.none,of.relative),df=of.fixed,pf=function(t,e){return{anchorBox:t,origin:e}},mf=function(t,e){return pf(t,e)},gf=function(t,e,n,r){var i=t+e;return i>r?n:i<n?r:i},vf=function(t,e,n){return Math.min(Math.max(t,e),n)},yf=Ut.generate([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),bf=function(t,e,n,r,i){var o=i.x,a=i.y,s=i.width,u=i.height,c=t>=o,l=e>=a,f=c&&l,h=t+n<=o+s,d=e+r<=a+u,p=h&&d,m=Math.abs(Math.min(n,c?o+s-t:o-(t+n))),g=Math.abs(Math.min(r,l?a+u-e:a-(e+r))),v=Math.max(i.x,i.right-n),y=Math.max(i.y,i.bottom-r),b=vf(t,i.x,v),w=vf(e,i.y,y);return{originInBounds:f,sizeInBounds:p,limitX:b,limitY:w,deltaW:m,deltaH:g}},wf=function(t,e,n,r){var i=t.x,o=t.y,a=t.bubble.offset,s=a.left,u=a.top,c=al(r,t.boundsRestriction,a),l=c.y,f=c.bottom,h=c.x,d=c.right,p=i+s,m=o+u,g=bf(p,m,e,n,c),v=g.originInBounds,y=g.sizeInBounds,w=g.limitX,_=g.limitY,x=g.deltaW,M=g.deltaH,S=b(_+M-l),k=b(f-_),C=Kc(t.direction,k,k,S),E=b(w+x-h),A=b(d-w),T=Xc(t.direction,A,A,E),O={x:w,y:_,width:x,height:M,maxHeight:C,maxWidth:T,direction:t.direction,classes:{on:t.bubble.classesOn,off:t.bubble.classesOff},label:t.label,candidateYforTest:m};return v&&y?yf.fit(O):yf.nofit(O,x,M)},_f=function(t,e,n,r,i){var o=n.width,a=n.height,s=function(t,s,u,c){var l=t(e,n,r),f=wf(l,o,a,i);return f.fold(yf.fit,(function(t,e,n){var r=n>c||e>u;return r?yf.nofit(t,e,n):yf.nofit(s,u,c)}))},u=Z(t,(function(t,e){var n=_(s,e);return t.fold(yf.fit,n)}),yf.nofit({x:e.x,y:e.y,width:n.width,height:n.height,maxHeight:n.height,maxWidth:n.width,direction:Yc(),classes:{on:[],off:[]},label:"none",candidateYforTest:e.y},-1,-1));return u.fold(w,w)},xf=function(t){return{width:Iu(t),height:Su(t)}},Mf=function(t,e,n,r){ru(e,"max-height"),ru(e,"max-width");var i=xf(e);return _f(r.preference,t,i,n,r.bounds)},Sf=function(t,e){var n=e.classes;Vs(t,n.off),Hs(t,n.on)},kf=function(t,e,n){var r=n.maxHeightFunction;r(t,e.maxHeight)},Cf=function(t,e,n){var r=n.maxWidthFunction;r(t,e.maxWidth)},Ef=function(t,e,n){rf(t,sf(n.origin,e))},Af=function(t,e){ku(t,Math.floor(e))},Tf=b((function(t,e){Af(t,e),Ys(t,{"overflow-x":"hidden","overflow-y":"auto"})})),Of=b((function(t,e){Af(t,e)})),Pf=function(t,e,n){return void 0===t[e]?n:t[e]},Df=function(t,e,n,r,i,o){var a=Pf(o,"maxHeightFunction",Tf()),s=Pf(o,"maxWidthFunction",m),u=t.anchorBox,c=t.origin,l={bounds:cf(c,i),origin:c,preference:r,maxHeightFunction:a,maxWidthFunction:s};Rf(u,e,n,l)},Rf=function(t,e,n,r){var i=Mf(t,e,n,r);Ef(e,i,r),Sf(e,i),kf(e,i,r),Cf(e,i,r)},Bf=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],If=function(t,e,n){var r=function(t){return zt(n,t).getOr([])},i=function(t,e,n){var i=ot(Bf,n);return{offset:Eu(t,e),classesOn:nt(n,r),classesOff:nt(i,r)}};return{southeast:function(){return i(-t,e,["top","alignLeft"])},southwest:function(){return i(t,e,["top","alignRight"])},south:function(){return i(-t/2,e,["top","alignCentre"])},northeast:function(){return i(-t,-e,["bottom","alignLeft"])},northwest:function(){return i(t,-e,["bottom","alignRight"])},north:function(){return i(-t/2,-e,["bottom","alignCentre"])},east:function(){return i(t,-e/2,["valignCentre","left"])},west:function(){return i(-t,-e/2,["valignCentre","right"])},innerNorthwest:function(){return i(-t,e,["top","alignRight"])},innerNortheast:function(){return i(t,e,["top","alignLeft"])},innerNorth:function(){return i(-t/2,e,["top","alignCentre"])},innerSouthwest:function(){return i(-t,-e,["bottom","alignRight"])},innerSoutheast:function(){return i(t,-e,["bottom","alignLeft"])},innerSouth:function(){return i(-t/2,-e,["bottom","alignCentre"])},innerWest:function(){return i(t,-e/2,["valignCentre","right"])},innerEast:function(){return i(-t,-e/2,["valignCentre","left"])}}},Nf=function(){return If(0,0,{})},Lf=function(t){return t},Ff=function(t,e){return function(n){return"rtl"===zf(n)?e:t}},zf=function(t){return"rtl"===Js(t,"direction")?"rtl":"ltr"};(function(t){t["TopToBottom"]="toptobottom",t["BottomToTop"]="bottomtotop"})(_c||(_c={}));var jf,Hf="data-alloy-vertical-dir",Vf=function(t){return hc(t,(function(t){return Lo(t)&&ka(t,"data-alloy-vertical-dir")===_c.BottomToTop}))},Uf=function(){return Nn("layouts",[bn("onLtr"),bn("onRtl"),On("onBottomLtr"),On("onBottomRtl")])},$f=function(t,e,n,r,i,o,a){var s=a.map(Vf).getOr(!1),u=e.layouts.map((function(e){return e.onLtr(t)})),c=e.layouts.map((function(e){return e.onRtl(t)})),l=s?e.layouts.bind((function(e){return e.onBottomLtr.map((function(e){return e(t)}))})).or(u).getOr(i):u.getOr(n),f=s?e.layouts.bind((function(e){return e.onBottomRtl.map((function(e){return e(t)}))})).or(c).getOr(o):c.getOr(r),h=Ff(l,f);return h(t)},qf=function(t,e,n){var r=e.hotspot,i=uf(n,r.element),o=$f(t.element,e,El(),Al(),kl(),Cl(),I.some(e.hotspot.element));return I.some(Lf({anchorBox:i,bubble:e.bubble.getOr(Nf()),overrides:e.overrides,layouts:o,placer:I.none()}))},Gf=[bn("hotspot"),On("bubble"),Fn("overrides",{}),Uf(),Vc("placement",qf)],Wf=function(t,e,n){var r=lf(n,e.x,e.y),i=rc(r.left,r.top,e.width,e.height),o=$f(t.element,e,Ml(),Sl(),Ml(),Sl(),I.none());return I.some(Lf({anchorBox:i,bubble:e.bubble,overrides:e.overrides,layouts:o,placer:I.none()}))},Kf=[bn("x"),bn("y"),Fn("height",0),Fn("width",0),Fn("bubble",Nf()),Fn("overrides",{}),Uf(),Vc("placement",Wf)],Xf=Ut.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Yf=function(t){return t.fold(w,(function(t,e,n){return t.translate(-e,-n)}))},Zf=function(t){return t.fold(w,w)},Jf=function(t){return Z(t,(function(t,e){return t.translate(e.left,e.top)}),Eu(0,0))},Qf=function(t){var e=q(t,Yf);return Jf(e)},th=function(t){var e=q(t,Zf);return Jf(e)},eh=Xf.screen,nh=Xf.absolute,rh=function(t,e,n){var r=$o(n.root).dom,i=function(e){var n=Ho(e),r=Ho(t.element);return ii(n,r)};return I.from(r.frameElement).map(er.fromDom).filter(i).map(Ou)},ih=function(t,e,n){var r=Ho(t.element),i=$u(r),o=rh(t,e,n).getOr(i);return nh(o,i.left,i.top)},oh=function(t,e,n,r){var i=t,o=e,a=n,s=r;t<0&&(i=0,a=n+t),e<0&&(o=0,s=r+e);var u=eh(Eu(i,o));return I.some(ec(u,a,s))},ah=function(t,e,n,r,i){return t.map((function(t){var o=[e,t.point],a=ff(r,(function(){return th(o)}),(function(){return th(o)}),(function(){return Qf(o)})),s=nc(a.left,a.top,t.width,t.height),u=n.showAbove?kl():El(),c=n.showAbove?Cl():Al(),l=$f(i,n,u,c,u,c,I.none());return Lf({anchorBox:s,bubble:n.bubble.getOr(Nf()),overrides:n.overrides,layouts:l,placer:I.none()})}))},sh=function(t,e,n){var r=ih(t,n,e);return e.node.filter($s).bind((function(i){var o=i.dom.getBoundingClientRect(),a=oh(o.left,o.top,o.width,o.height),s=e.node.getOr(t.element);return ah(a,r,e,n,s)}))},uh=[bn("node"),bn("root"),On("bubble"),Uf(),Fn("overrides",{}),Fn("showAbove",!1),Vc("placement",sh)],ch="\ufeff",lh="",fh=function(t,e,n,r){return{start:t,soffset:e,finish:n,foffset:r}},hh={create:fh},dh=Ut.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ph=function(t,e,n,r){return t.fold(e,n,r)},mh=function(t){return t.fold(w,w,w)},gh=dh.before,vh=dh.on,yh=dh.after,bh={before:gh,on:vh,after:yh,cata:ph,getStart:mh},wh=Ut.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),_h=function(t){return wh.exact(t.start,t.soffset,t.finish,t.foffset)},xh=function(t){return t.match({domRange:function(t){return er.fromDom(t.startContainer)},relative:function(t,e){return bh.getStart(t)},exact:function(t,e,n,r){return t}})},Mh=wh.domRange,Sh=wh.relative,kh=wh.exact,Ch=function(t){var e=xh(t);return $o(e)},Eh=hh.create,Ah={domRange:Mh,relative:Sh,exact:kh,exactFromRange:_h,getWin:Ch,range:Eh},Th=function(t,e){e.fold((function(e){t.setStartBefore(e.dom)}),(function(e,n){t.setStart(e.dom,n)}),(function(e){t.setStartAfter(e.dom)}))},Oh=function(t,e){e.fold((function(e){t.setEndBefore(e.dom)}),(function(e,n){t.setEnd(e.dom,n)}),(function(e){t.setEndAfter(e.dom)}))},Ph=function(t,e,n){var r=t.document.createRange();return Th(r,e),Oh(r,n),r},Dh=function(t,e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom,n),o.setEnd(r.dom,i),o},Rh=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},Bh=function(t){var e=t.getClientRects(),n=e.length>0?e[0]:t.getBoundingClientRect();return n.width>0||n.height>0?I.some(n).map(Rh):I.none()},Ih=Ut.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Nh=function(t,e,n){return e(er.fromDom(n.startContainer),n.startOffset,er.fromDom(n.endContainer),n.endOffset)},Lh=function(t,e){return e.match({domRange:function(t){return{ltr:b(t),rtl:I.none}},relative:function(e,n){return{ltr:Yt((function(){return Ph(t,e,n)})),rtl:Yt((function(){return I.some(Ph(t,n,e))}))}},exact:function(e,n,r,i){return{ltr:Yt((function(){return Dh(t,e,n,r,i)})),rtl:Yt((function(){return I.some(Dh(t,r,i,e,n))}))}}})},Fh=function(t,e){var n=e.ltr();if(n.collapsed){var r=e.rtl().filter((function(t){return!1===t.collapsed}));return r.map((function(t){return Ih.rtl(er.fromDom(t.endContainer),t.endOffset,er.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Nh(t,Ih.ltr,n)}))}return Nh(t,Ih.ltr,n)},zh=function(t,e){var n=Lh(t,e);return Fh(t,n)},jh=function(t,e){var n=zh(t,e);return n.match({ltr:function(e,n,r,i){var o=t.document.createRange();return o.setStart(e.dom,n),o.setEnd(r.dom,i),o},rtl:function(e,n,r,i){var o=t.document.createRange();return o.setStart(r.dom,i),o.setEnd(e.dom,n),o}})},Hh=(Ih.ltr,Ih.rtl,function(t,e){var n=function(n){if(!t(n))throw new Error("Can only get "+e+" value of a "+e+" node");return r(n).getOr("")},r=function(e){return t(e)?I.from(e.dom.nodeValue):I.none()},i=function(n,r){if(!t(n))throw new Error("Can only set raw "+e+" value of a "+e+" node");n.dom.nodeValue=r};return{get:n,getOption:r,set:i}}),Vh=Hh(Fo,"text"),Uh=function(t){return Vh.get(t)},$h=function(t){return Vh.getOption(t)},qh=function(t){return"img"===Bo(t)?1:$h(t).fold((function(){return Xo(t).length}),(function(t){return t.length}))},Gh=function(t){return $h(t).filter((function(t){return 0!==t.trim().length||t.indexOf(lh)>-1})).isSome()},Wh=["img","br"],Kh=function(t){var e=Gh(t);return e||H(Wh,Bo(t))},Xh=function(t){return Yh(t,Kh)},Yh=function(t,e){var n=function(t){for(var r=Xo(t),i=r.length-1;i>=0;i--){var o=r[i];if(e(o))return I.some(o);var a=n(o);if(a.isSome())return a}return I.none()};return n(t)},Zh=function(t,e){return ni(e,t)},Jh=function(t,e,n,r){var i=Ho(t),o=i.dom.createRange();return o.setStart(t.dom,e),o.setEnd(n.dom,r),o},Qh=function(t,e,n,r){var i=Jh(t,e,n,r),o=ii(t,n)&&e===r;return i.collapsed&&!o},td=function(t){return I.from(t.getSelection())},ed=function(t){if(t.rangeCount>0){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return I.some(hh.create(er.fromDom(e.startContainer),e.startOffset,er.fromDom(n.endContainer),n.endOffset))}return I.none()},nd=function(t){if(null===t.anchorNode||null===t.focusNode)return ed(t);var e=er.fromDom(t.anchorNode),n=er.fromDom(t.focusNode);return Qh(e,t.anchorOffset,n,t.focusOffset)?I.some(hh.create(e,t.anchorOffset,n,t.focusOffset)):ed(t)},rd=function(t){return td(t).filter((function(t){return t.rangeCount>0})).bind(nd)},id=function(t,e){var n=jh(t,e);return Bh(n)},od=function(t,e){return{element:t,offset:e}},ad=function(t,e){var n=Xo(t);if(0===n.length)return od(t,e);if(e<n.length)return od(n[e],0);var r=n[n.length-1],i=Fo(r)?Uh(r).length:Xo(r).length;return od(r,i)},sd=function(t,e){return Fo(t)?od(t,e):ad(t,e)},ud=function(t,e){var n=e.getSelection.getOrThunk((function(){return function(){return rd(t)}}));return n().map((function(t){var e=sd(t.start,t.soffset),n=sd(t.finish,t.foffset);return Ah.range(e.element,e.offset,n.element,n.offset)}))},cd=function(t,e,n){var r=$o(e.root).dom,i=ih(t,n,e),o=ud(r,e).bind((function(t){var e=id(r,Ah.exactFromRange(t)).orThunk((function(){var e=er.fromText(ch);return ua(t.start,e),id(r,Ah.exact(e,0,e,1)).map((function(t){return ga(e),t}))}));return e.bind((function(t){return oh(t.left,t.top,t.width,t.height)}))})),a=ud(r,e).bind((function(t){return Lo(t.start)?I.some(t.start):Go(t.start)})),s=a.getOr(t.element);return ah(o,i,e,n,s)},ld=[On("getSelection"),bn("root"),On("bubble"),Uf(),Fn("overrides",{}),Fn("showAbove",!1),Vc("placement",cd)],fd=function(t){return t.x+t.width},hd=function(t,e){return t.x-e.width},dd=function(t,e){return t.y-e.height+t.height},pd=function(t){return t.y},md=function(t,e,n){return qc(fd(t),pd(t),n.southeast(),Yc(),ol(t,{left:0,top:2}),"link-layout-se")},gd=function(t,e,n){return qc(hd(t,e),pd(t),n.southwest(),Zc(),ol(t,{right:1,top:2}),"link-layout-sw")},vd=function(t,e,n){return qc(fd(t),dd(t,e),n.northeast(),Jc(),ol(t,{left:0,bottom:3}),"link-layout-ne")},yd=function(t,e,n){return qc(hd(t,e),dd(t,e),n.northwest(),Qc(),ol(t,{right:1,bottom:3}),"link-layout-nw")},bd=function(){return[md,gd,vd,yd]},wd=function(){return[gd,md,yd,vd]},_d=function(t,e,n){var r=uf(n,e.item.element),i=$f(t.element,e,bd(),wd(),bd(),wd(),I.none());return I.some(Lf({anchorBox:r,bubble:Nf(),overrides:e.overrides,layouts:i,placer:I.none()}))},xd=[bn("item"),Uf(),Fn("overrides",{}),Vc("placement",_d)],Md=un("anchor",{selection:ld,node:uh,hotspot:Gf,submenu:xd,makeshift:Kf}),Sd=function(){var t=document.documentElement;return df(0,0,t.clientWidth,t.clientHeight)},kd=function(t){var e=Ou(t.element),n=t.element.dom.getBoundingClientRect();return hf(e.left,e.top,n.width,n.height)},Cd=function(t,e,n,r,i){var o=mf(n.anchorBox,e);Df(o,i.element,n.bubble,n.layouts,r,n.overrides)},Ed=function(t,e,n,r,i){Ad(t,e,n,r,i,I.none())},Ad=function(t,e,n,r,i,o){var a=o.map(ic);return Td(t,e,n,r,i,a)},Td=function(t,e,n,r,i,o){var a=on("positioning anchor.info",Md,r);ef((function(){Xs(i.element,"position","fixed");var n=tu(i.element,"visibility");Xs(i.element,"visibility","hidden");var r=e.useFixed()?Sd():kd(t),s=a.placement,u=o.map(b).or(e.getBounds);s(t,a,r).each((function(e){var n=e.placer.getOr(Cd);n(t,r,e,u,i)})),n.fold((function(){ru(i.element,"visibility")}),(function(t){Xs(i.element,"visibility",t)})),tu(i.element,"left").isNone()&&tu(i.element,"top").isNone()&&tu(i.element,"right").isNone()&&tu(i.element,"bottom").isNone()&&tu(i.element,"position").is("fixed")&&ru(i.element,"position")}),i.element)},Od=function(t,e,n){return e.useFixed()?"fixed":"absolute"},Pd=Object.freeze({__proto__:null,position:Ed,positionWithin:Ad,positionWithinBounds:Td,getMode:Od}),Dd=[Fn("useFixed",S),On("getBounds")],Rd=Vl({fields:Dd,name:"positioning",active:Kl,apis:Pd}),Bd=function(t){co(t,to());var e=t.components();G(e,Bd)},Id=function(t){var e=t.components();G(e,Id),co(t,Qi())},Nd=function(t,e){fa(t.element,e.element)},Ld=function(t){G(t.components(),(function(t){return ga(t.element)})),ma(t.element),t.syncComponents()},Fd=function(t,e){var n=t.components();Ld(t);var r=ot(n,e);G(r,(function(e){Bd(e),t.getSystem().removeFromWorld(e)})),G(e,(function(e){e.getSystem().isConnected()?Nd(t,e):(t.getSystem().addToWorld(e),Nd(t,e),$s(t.element)&&Id(e)),t.syncComponents()}))},zd=function(t,e){jd(t,e,fa)},jd=function(t,e,n){t.getSystem().addToWorld(e),n(t.element,e.element),$s(t.element)&&Id(e),t.syncComponents()},Hd=function(t){Bd(t),ga(t.element),t.getSystem().removeFromWorld(t)},Vd=function(t){var e=qo(t.element).bind((function(e){return t.getSystem().getByDom(e).toOptional()}));Hd(t),e.each((function(t){t.syncComponents()}))},Ud=function(t){var e=t.components();G(e,Hd),ma(t.element),t.syncComponents()},$d=function(t,e){Gd(t,e,fa)},qd=function(t,e){Gd(t,e,ca)},Gd=function(t,e,n){n(t,e.element);var r=Xo(e.element);G(r,(function(t){e.getByDom(t).each(Id)}))},Wd=function(t){var e=Xo(t.element);G(e,(function(e){t.getByDom(e).each(Bd)})),ga(t.element)},Kd=function(t,e,n,r){n.get().each((function(e){Ud(t)}));var i=e.getAttachPoint(t);zd(i,t);var o=t.getSystem().build(r);return zd(t,o),n.set(o),o},Xd=function(t,e,n,r){var i=Kd(t,e,n,r);return e.onOpen(t,i),i},Yd=function(t,e,n,r){return n.get().map((function(){return Kd(t,e,n,r)}))},Zd=function(t,e,n,r,i){ip(t,e),Xd(t,e,n,r),i(),ap(t,e)},Jd=function(t,e,n){n.get().each((function(r){Ud(t),Vd(t),e.onClose(t,r),n.clear()}))},Qd=function(t,e,n){return n.isOpen()},tp=function(t,e,n,r){return Qd(t,e,n)&&n.get().exists((function(n){return e.isPartOf(t,n,r)}))},ep=function(t,e,n){return n.get()},np=function(t,e,n,r){tu(t.element,e).fold((function(){Aa(t.element,n)}),(function(e){Ma(t.element,n,e)})),Xs(t.element,e,r)},rp=function(t,e,n){Ca(t.element,n).fold((function(){return ru(t.element,e)}),(function(n){return Xs(t.element,e,n)}))},ip=function(t,e,n){var r=e.getAttachPoint(t);Xs(t.element,"position",Rd.getMode(r)),np(t,"visibility",e.cloakVisibilityAttr,"hidden")},op=function(t){return V(["top","left","right","bottom"],(function(e){return tu(t,e).isSome()}))},ap=function(t,e,n){op(t.element)||ru(t.element,"position"),rp(t,"visibility",e.cloakVisibilityAttr)},sp=Object.freeze({__proto__:null,cloak:ip,decloak:ap,open:Xd,openWhileCloaked:Zd,close:Jd,isOpen:Qd,isPartOf:tp,getState:ep,setContent:Yd}),up=function(t,e){return go([wo(Gi(),(function(n,r){Jd(n,t,e)}))])},cp=Object.freeze({__proto__:null,events:up}),lp=[Fc("onOpen"),Fc("onClose"),bn("isPartOf"),bn("getAttachPoint"),Fn("cloakVisibilityAttr","data-precloak-visibility")],fp=function(){var t=Xn(I.none()),e=b("not-implemented"),n=function(){return t.get().isSome()},r=function(e){t.set(I.some(e))},i=function(){return t.get()},o=function(){t.set(I.none())};return is({readState:e,isOpen:n,clear:o,set:r,get:i})},hp=Object.freeze({__proto__:null,init:fp}),dp=Vl({fields:lp,name:"sandboxing",active:cp,apis:sp,state:hp}),pp=b("dismiss.popups"),mp=b("reposition.popups"),gp=b("mouse.released"),vp=Le([Fn("isExtraPart",S),Nn("fireEventInstead",[Fn("event",eo())])]),yp=function(t){var e,n=on("Dismissal",vp,t);return e={},e[pp()]={schema:Le([bn("target")]),onReceive:function(t,e){if(dp.isOpen(t)){var r=dp.isPartOf(t,e.target)||n.isExtraPart(t,e.target);r||n.fireEventInstead.fold((function(){return dp.close(t)}),(function(e){return co(t,e.event)}))}}},e},bp=Le([Nn("fireEventInstead",[Fn("event",no())]),kn("doReposition")]),wp=function(t){var e,n=on("Reposition",bp,t);return e={},e[mp()]={onReceive:function(t){dp.isOpen(t)&&n.fireEventInstead.fold((function(){return n.doReposition(t)}),(function(e){return co(t,e.event)}))}},e},_p=function(t,e,n){e.store.manager.onLoad(t,e,n)},xp=function(t,e,n){e.store.manager.onUnload(t,e,n)},Mp=function(t,e,n,r){e.store.manager.setValue(t,e,n,r)},Sp=function(t,e,n){return e.store.manager.getValue(t,e,n)},kp=function(t,e,n){return n},Cp=Object.freeze({__proto__:null,onLoad:_p,onUnload:xp,setValue:Mp,getValue:Sp,getState:kp}),Ep=function(t,e){var n=t.resetOnDom?[Oo((function(n,r){_p(n,t,e)})),Po((function(n,r){xp(n,t,e)}))]:[Bl(t,e,_p)];return go(n)},Ap=Object.freeze({__proto__:null,events:Ep}),Tp=function(){var t=Xn(null),e=function(){return{mode:"memory",value:t.get()}},n=function(){return null===t.get()},r=function(){t.set(null)};return is({set:t.set,get:t.get,isNotSet:n,clear:r,readState:e})},Op=function(){var t=m;return is({readState:t})},Pp=function(){var t=Xn({}),e=Xn({}),n=function(){return{mode:"dataset",dataByValue:t.get(),dataByText:e.get()}},r=function(){t.set({}),e.set({})},i=function(n){return zt(t.get(),n).orThunk((function(){return zt(e.get(),n)}))},o=function(n){var r=t.get(),i=e.get(),o={},a={};G(n,(function(t){o[t.value]=t,zt(t,"meta").each((function(e){zt(e,"text").each((function(e){a[e]=t}))}))})),t.set(E(E({},r),o)),e.set(E(E({},i),a))};return is({readState:n,lookup:i,update:o,clear:r})},Dp=function(t){return t.store.manager.state(t)},Rp=Object.freeze({__proto__:null,memory:Tp,dataset:Pp,manual:Op,init:Dp}),Bp=function(t,e,n,r){var i=e.store;n.update([r]),i.setValue(t,r),e.onSetValue(t,r)},Ip=function(t,e,n){var r=e.store,i=r.getDataKey(t);return n.lookup(i).fold((function(){return r.getFallbackEntry(i)}),(function(t){return t}))},Np=function(t,e,n){var r=e.store;r.initialValue.each((function(r){Bp(t,e,n,r)}))},Lp=function(t,e,n){n.clear()},Fp=[On("initialValue"),bn("getFallbackEntry"),bn("getDataKey"),bn("setValue"),Vc("manager",{setValue:Bp,getValue:Ip,onLoad:Np,onUnload:Lp,state:Pp})],zp=function(t,e,n){return e.store.getValue(t)},jp=function(t,e,n,r){e.store.setValue(t,r),e.onSetValue(t,r)},Hp=function(t,e,n){e.store.initialValue.each((function(n){e.store.setValue(t,n)}))},Vp=[bn("getValue"),Fn("setValue",m),On("initialValue"),Vc("manager",{setValue:jp,getValue:zp,onLoad:Hp,onUnload:m,state:rs.init})],Up=function(t,e,n,r){n.set(r),e.onSetValue(t,r)},$p=function(t,e,n){return n.get()},qp=function(t,e,n){e.store.initialValue.each((function(t){n.isNotSet()&&n.set(t)}))},Gp=function(t,e,n){n.clear()},Wp=[On("initialValue"),Vc("manager",{setValue:Up,getValue:$p,onLoad:qp,onUnload:Gp,state:Tp})],Kp=[zn("store",{mode:"memory"},un("mode",{memory:Wp,manual:Vp,dataset:Fp})),Fc("onSetValue"),Fn("resetOnDom",!1)],Xp=Vl({fields:Kp,name:"representing",active:Ap,apis:Cp,extra:{setValueFrom:function(t,e){var n=Xp.getValue(e);Xp.setValue(t,n)}},state:Rp}),Yp=function(t,e){return Wn(t,{},q(e,(function(e){return Cn(e.name(),"Cannot configure "+e.name()+" for "+t)})).concat([Kn("dump",w)]))},Zp=function(t){return t.dump},Jp=function(t,e){return E(E({},t.dump),jl(e))},Qp={field:Yp,augment:Jp,get:Zp},tm="placeholder",em=Ut.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),nm=function(t){return jt(t,"uiType")},rm=function(t,e,n,r){return t.exists((function(t){return t!==n.owner}))?em.single(!0,b(n)):zt(r,n.name).fold((function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+At(r)+"]\nNamespace: "+t.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(function(t){return t.replace()}))},im=function(t,e,n,r){return nm(n)&&n.uiType===tm?rm(t,e,n,r):em.single(!1,b(n))},om=function(t,e,n,r){var i=im(t,e,n,r);return i.fold((function(i,o){var a=nm(n)?o(e,n.config,n.validated):o(e),s=zt(a,"components").getOr([]),u=nt(s,(function(n){return om(t,e,n,r)}));return[E(E({},a),{components:u})]}),(function(t,r){if(nm(n)){var i=r(e,n.config,n.validated),o=n.validated.preprocess.getOr(w);return o(i)}return r(e)}))},am=function(t,e,n,r){return nt(n,(function(n){return om(t,e,n,r)}))},sm=function(t,e){var n=!1,r=function(){return n},i=function(){if(n)throw new Error("Trying to use the same placeholder more than once: "+t);return n=!0,e},o=function(){return e.fold((function(t,e){return t}),(function(t,e){return t}))};return{name:b(t),required:o,used:r,replace:i}},um=function(t,e,n,r){var i=Pt(r,(function(t,e){return sm(e,t)})),o=am(t,e,n,i);return Ot(i,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+t.getOr("none")+"\nComponents: "+JSON.stringify(e.components,null,2))})),o},cm=em.single,lm=em.multiple,fm=b(tm),hm=Ut.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),dm=Fn("factory",{sketch:w}),pm=Fn("schema",[]),mm=bn("name"),gm=Ge("pname","pname",ne((function(t){return"<alloy."+La(t.name)+">"})),ln()),vm=Kn("schema",(function(){return[On("preprocess")]})),ym=Fn("defaults",b({})),bm=Fn("overrides",b({})),wm=Fe([dm,pm,mm,gm,ym,bm]),_m=Fe([dm,pm,mm,ym,bm]),xm=Fe([dm,pm,mm,gm,ym,bm]),Mm=Fe([dm,vm,mm,bn("unit"),gm,ym,bm]),Sm=function(t){return t.fold(I.some,I.none,I.some,I.some)},km=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},Cm=function(t){return t.fold(w,w,w,w)},Em=function(t,e){return function(n){var r=on("Converting part type",e,n);return t(r)}},Am=Em(hm.required,wm),Tm=Em(hm.external,_m),Om=Em(hm.optional,xm),Pm=Em(hm.group,Mm),Dm=b("entirety"),Rm=Object.freeze({__proto__:null,required:Am,external:Tm,optional:Om,group:Pm,asNamedPart:Sm,name:km,asCommon:Cm,original:Dm}),Bm=function(t,e,n,r){return Kt(e.defaults(t,n,r),n,{uid:t.partUids[e.name]},e.overrides(t,n,r))},Im=function(t,e,n){var r={},i={};return G(n,(function(t){t.fold((function(t){r[t.pname]=cm(!0,(function(e,n,r){return t.factory.sketch(Bm(e,t,n,r))}))}),(function(t){var n=e.parts[t.name];i[t.name]=b(t.factory.sketch(Bm(e,t,n[Dm()]),n))}),(function(t){r[t.pname]=cm(!1,(function(e,n,r){return t.factory.sketch(Bm(e,t,n,r))}))}),(function(t){r[t.pname]=lm(!0,(function(e,n,r){var i=e[t.name];return q(i,(function(n){return t.factory.sketch(Kt(t.defaults(e,n,r),n,t.overrides(e,n)))}))}))}))})),{internals:b(r),externals:b(i)}},Nm=function(t,e){var n={};return G(e,(function(e){Sm(e).each((function(e){var r=Lm(t,e.pname);n[e.name]=function(n){var i=on("Part: "+e.name+" in "+t,Fe(e.schema),n);return E(E({},r),{config:n,validated:i})}}))})),n},Lm=function(t,e){return{uiType:fm(),owner:t,name:e}},Fm=function(t,e,n){return{uiType:fm(),owner:t,name:e,config:n,validated:{}}},zm=function(t){return nt(t,(function(t){return t.fold(I.none,I.some,I.none,I.none).map((function(t){return En(t.name,t.schema.concat([Uc(Dm())]))})).toArray()}))},jm=function(t){return q(t,km)},Hm=function(t,e,n){return Im(t,e,n)},Vm=function(t,e,n){return um(I.some(t),e,e.components,n)},Um=function(t,e,n){var r=e.partUids[n];return t.getSystem().getByUid(r).toOptional()},$m=function(t,e,n){return Um(t,e,n).getOrDie("Could not find part: "+n)},qm=function(t,e,n){var r={},i=e.partUids,o=t.getSystem();return G(n,(function(t){r[t]=b(o.getByUid(i[t]))})),r},Gm=function(t,e){var n=t.getSystem();return Pt(e.partUids,(function(t,e){return b(n.getByUid(t))}))},Wm=function(t){return At(t.partUids)},Km=function(t,e,n){var r={},i=e.partUids,o=t.getSystem();return G(n,(function(t){r[t]=b(o.getByUid(i[t]).getOrDie())})),r},Xm=function(t,e){var n=jm(e);return le(q(n,(function(e){return{key:e,value:t+"-"+e}})))},Ym=function(t){return Ge("partUids","partUids",re((function(e){return Xm(e.uid,t)})),ln())},Zm=Object.freeze({__proto__:null,generate:Nm,generateOne:Fm,schemas:zm,names:jm,substitutes:Hm,components:Vm,defaultUids:Xm,defaultUidsSchema:Ym,getAllParts:Gm,getAllPartNames:Wm,getPart:Um,getPartOrDie:$m,getParts:qm,getPartsOrDie:Km}),Jm=function(t,e){var n=t.length>0?[En("parts",t)]:[];return n.concat([bn("uid"),Fn("dom",{}),Fn("components",[]),Uc("originalSpec"),Fn("debug.sketcher",{})]).concat(e)},Qm=function(t,e,n,r,i){var o=Jm(r,i);return on(t+" [SpecSchema]",Le(o.concat(e)),n)},tg=function(t,e,n,r){var i=rg(r),o=Qm(t,e,i,[],[]);return n(o,i)},eg=function(t,e,n,r,i){var o=rg(i),a=zm(n),s=Ym(n),u=Qm(t,e,o,a,[s]),c=Hm(t,u,n),l=Vm(t,u,c.internals());return r(u,l,o,c.externals())},ng=function(t){return jt(t,"uid")},rg=function(t){return ng(t)?t:E(E({},t),{uid:qa("uid")})},ig=function(t){return void 0!==t.uid},og=Le([bn("name"),bn("factory"),bn("configFields"),Fn("apis",{}),Fn("extraApis",{})]),ag=Le([bn("name"),bn("factory"),bn("configFields"),bn("partFields"),Fn("apis",{}),Fn("extraApis",{})]),sg=function(t){var e=on("Sketcher for "+t.name,og,t),n=function(t){return tg(e.name,e.configFields,e.factory,t)},r=Pt(e.apis,ns),i=Pt(e.extraApis,(function(t,e){return Za(t,e)}));return E(E({name:e.name,configFields:e.configFields,sketch:n},r),i)},ug=function(t){var e=on("Sketcher for "+t.name,ag,t),n=function(t){return eg(e.name,e.configFields,e.partFields,e.factory,t)},r=Nm(e.name,e.partFields),i=Pt(e.apis,ns),o=Pt(e.extraApis,(function(t,e){return Za(t,e)}));return E(E({name:e.name,partFields:e.partFields,configFields:e.configFields,sketch:n,parts:r},i),o)},cg=function(t){for(var e=[],n=function(t){e.push(t)},r=0;r<t.length;r++)t[r].each(n);return e},lg=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.isSome())return I.none();e.push(r.getOrDie())}return I.some(e)},fg=function(t,e,n){return t.isSome()&&e.isSome()?I.some(n(t.getOrDie(),e.getOrDie())):I.none()},hg=function(t,e,n,r){return t.isSome()&&e.isSome()&&n.isSome()?I.some(r(t.getOrDie(),e.getOrDie(),n.getOrDie())):I.none()},dg=function(t,e){return void 0!==t&&null!==t?I.some(e(t)):I.none()},pg=function(t,e){return t?I.some(e):I.none()},mg=function(t){return"input"===Bo(t)&&"radio"!==ka(t,"type")||"textarea"===Bo(t)},gg=function(t,e,n){return e.find(t)},vg=Object.freeze({__proto__:null,getCurrent:gg}),yg=[bn("find")],bg=Vl({fields:yg,name:"composing",apis:vg}),wg=function(t,e,n,r){var i=Zh(t.element,"."+e.highlightClass);G(i,(function(n){V(r,(function(t){return t.element===n}))||(zs(n,e.highlightClass),t.getSystem().getByDom(n).each((function(n){e.onDehighlight(t,n),co(n,uo())})))}))},_g=function(t,e,n){return wg(t,e,n,[])},xg=function(t,e,n,r){Ag(t,e,n,r)&&(zs(r.element,e.highlightClass),e.onDehighlight(t,r),co(r,uo()))},Mg=function(t,e,n,r){wg(t,e,n,[r]),Ag(t,e,n,r)||(Ls(r.element,e.highlightClass),e.onHighlight(t,r),co(r,so()))},Sg=function(t,e,n){Pg(t,e).each((function(r){Mg(t,e,n,r)}))},kg=function(t,e,n){Dg(t,e).each((function(r){Mg(t,e,n,r)}))},Cg=function(t,e,n,r){Og(t,e,n,r).fold((function(t){throw t}),(function(r){Mg(t,e,n,r)}))},Eg=function(t,e,n,r){var i=Ng(t,e),o=Q(i,r);o.each((function(r){Mg(t,e,n,r)}))},Ag=function(t,e,n,r){return js(r.element,e.highlightClass)},Tg=function(t,e,n){return pc(t.element,"."+e.highlightClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},Og=function(t,e,n,r){var i=Zh(t.element,"."+e.itemClass);return I.from(i[r]).fold((function(){return gt.error(new Error("No element found with index "+r))}),t.getSystem().getByDom)},Pg=function(t,e,n){return pc(t.element,"."+e.itemClass).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},Dg=function(t,e,n){var r=Zh(t.element,"."+e.itemClass),i=r.length>0?I.some(r[r.length-1]):I.none();return i.bind((function(e){return t.getSystem().getByDom(e).toOptional()}))},Rg=function(t,e,n,r){var i=Zh(t.element,"."+e.itemClass),o=tt(i,(function(t){return js(t,e.highlightClass)}));return o.bind((function(e){var n=gf(e,r,0,i.length-1);return t.getSystem().getByDom(i[n]).toOptional()}))},Bg=function(t,e,n){return Rg(t,e,n,-1)},Ig=function(t,e,n){return Rg(t,e,n,1)},Ng=function(t,e,n){var r=Zh(t.element,"."+e.itemClass);return cg(q(r,(function(e){return t.getSystem().getByDom(e).toOptional()})))},Lg=Object.freeze({__proto__:null,dehighlightAll:_g,dehighlight:xg,highlight:Mg,highlightFirst:Sg,highlightLast:kg,highlightAt:Cg,highlightBy:Eg,isHighlighted:Ag,getHighlighted:Tg,getFirst:Pg,getLast:Dg,getPrevious:Bg,getNext:Ig,getCandidates:Ng}),Fg=[bn("highlightClass"),bn("itemClass"),Fc("onHighlight"),Fc("onDehighlight")],zg=Vl({fields:Fg,name:"highlighting",apis:Lg}),jg=[8],Hg=[9],Vg=[13],Ug=[27],$g=[32],qg=[37],Gg=[38],Wg=[39],Kg=[40],Xg=function(t,e,n){var r=it(t.slice(0,e)),i=it(t.slice(e+1));return Q(r.concat(i),n)},Yg=function(t,e,n){var r=it(t.slice(0,e));return Q(r,n)},Zg=function(t,e,n){var r=t.slice(0,e),i=t.slice(e+1);return Q(i.concat(r),n)},Jg=function(t,e,n){var r=t.slice(e+1);return Q(r,n)},Qg=function(t){return function(e){var n=e.raw;return H(t,n.which)}},tv=function(t){return function(e){return rt(t,(function(t){return t(e)}))}},ev=function(t){var e=t.raw;return!0===e.shiftKey},nv=function(t){var e=t.raw;return!0===e.ctrlKey},rv=x(ev),iv=function(t,e){return{matches:t,classification:e}},ov=function(t,e){var n=Q(t,(function(t){return t.matches(e)}));return n.map((function(t){return t.classification}))},av=function(t,e,n){var r=e.exists((function(t){return n.exists((function(e){return ii(e,t)}))}));r||lo(t,ro(),{prevFocus:e,newFocus:n})},sv=function(){var t=function(t){return tf(t.element)},e=function(e,n){var r=t(e);e.getSystem().triggerFocus(n,e.element);var i=t(e);av(e,r,i)};return{get:t,set:e}},uv=function(){var t=function(t){return zg.getHighlighted(t).map((function(t){return t.element}))},e=function(e,n){var r=t(e);e.getSystem().getByDom(n).fold(m,(function(t){zg.highlight(e,t)}));var i=t(e);av(e,r,i)};return{get:t,set:e}};(function(t){t["OnFocusMode"]="onFocus",t["OnEnterOrSpaceMode"]="onEnterOrSpace",t["OnApiMode"]="onApi"})(jf||(jf={}));var cv=function(t,e,n,r,i){var o=function(){return t.concat([Fn("focusManager",sv()),zn("focusInside","onFocus",Qe((function(t){return H(["onFocus","onEnterOrSpace","onApi"],t)?gt.value(t):gt.error("Invalid value for focusInside")}))),Vc("handler",u),Vc("state",e),Vc("sendFocusIn",i)])},a=function(t,e,n,r,i){var o=n(t,e,r,i);return ov(o,e.event).bind((function(n){return n(t,e,r,i)}))},s=function(t,e){var o=t.focusInside!==jf.OnFocusMode?I.none():i(t).map((function(n){return wo(Fi(),(function(r,i){n(r,t,e),i.stop()}))})),s=function(n,r){var o=Qg($g.concat(Vg))(r.event);t.focusInside===jf.OnEnterOrSpaceMode&&o&&fi(n,r)&&i(t).each((function(i){i(n,t,e),r.stop()}))},u=[wo(Ti(),(function(r,i){a(r,i,n,t,e).fold((function(){s(r,i)}),(function(t){i.stop()}))})),wo(Oi(),(function(n,i){a(n,i,r,t,e).each((function(t){i.stop()}))}))];return go(o.toArray().concat(u))},u={schema:o,processKey:a,toEvents:s};return u},lv=function(t){var e=[On("onEscape"),On("onEnter"),Fn("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Fn("firstTabstop",0),Fn("useTabstopAt",k),On("visibilitySelector")].concat([t]),n=function(t,e){var n=t.visibilitySelector.bind((function(t){return mc(e,t)})).getOr(e);return Mu(n)>0},r=function(t,e){var r=Zh(t.element,e.selector),i=X(r,(function(t){return n(e,t)}));return I.from(i[e.firstTabstop])},i=function(t,e){return e.focusManager.get(t).bind((function(t){return mc(t,e.selector)}))},o=function(t,e){return n(t,e)&&t.useTabstopAt(e)},a=function(t,e,n){r(t,e).each((function(n){e.focusManager.set(t,n)}))},s=function(t,e,n,r,i){return i(e,n,(function(t){return o(r,t)})).fold((function(){return r.cyclic?I.some(!0):I.none()}),(function(e){return r.focusManager.set(t,e),I.some(!0)}))},u=function(t,e,n,r){var o=Zh(t.element,n.selector);return i(t,n).bind((function(e){var i=tt(o,_(ii,e));return i.bind((function(e){return s(t,o,e,n,r)}))}))},c=function(t,e,n){var r=n.cyclic?Xg:Yg;return u(t,e,n,r)},l=function(t,e,n){var r=n.cyclic?Zg:Jg;return u(t,e,n,r)},f=function(t,e,n){return n.onEnter.bind((function(n){return n(t,e)}))},h=function(t,e,n){return n.onEscape.bind((function(n){return n(t,e)}))},d=b([iv(tv([ev,Qg(Hg)]),c),iv(Qg(Hg),l),iv(Qg(Ug),h),iv(tv([rv,Qg(Vg)]),f)]),p=b([]);return cv(e,rs.init,d,p,(function(){return I.some(a)}))},fv=lv(Kn("cyclic",S)),hv=lv(Kn("cyclic",k)),dv=function(t,e,n){return ho(t,n,Vi()),I.some(!0)},pv=function(t,e,n){var r=mg(n)&&Qg($g)(e.event);return r?I.none():dv(t,e,n)},mv=function(t,e){return I.some(!0)},gv=[Fn("execute",pv),Fn("useSpace",!1),Fn("useEnter",!0),Fn("useControlEnter",!1),Fn("useDown",!1)],vv=function(t,e,n){return n.execute(t,e,t.element)},yv=function(t,e,n,r){var i=n.useSpace&&!mg(t.element)?$g:[],o=n.useEnter?Vg:[],a=n.useDown?Kg:[],s=i.concat(o).concat(a);return[iv(Qg(s),vv)].concat(n.useControlEnter?[iv(tv([nv,Qg(Vg)]),vv)]:[])},bv=function(t,e,n,r){return n.useSpace&&!mg(t.element)?[iv(Qg($g),mv)]:[]},wv=cv(gv,rs.init,yv,bv,(function(){return I.none()})),_v=function(){var t=Xn(I.none()),e=function(e,n){t.set(I.some({numRows:e,numColumns:n}))},n=function(){return t.get().map((function(t){return t.numRows}))},r=function(){return t.get().map((function(t){return t.numColumns}))};return is({readState:function(){return t.get().map((function(t){return{numRows:String(t.numRows),numColumns:String(t.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:e,getNumRows:n,getNumColumns:r})},xv=function(t){return t.state(t)},Mv=Object.freeze({__proto__:null,flatgrid:_v,init:xv}),Sv=function(t){return function(e,n,r,i){var o=t(e.element);return Av(o,e,n,r,i)}},kv=function(t,e){var n=Ff(t,e);return Sv(n)},Cv=function(t,e){var n=Ff(e,t);return Sv(n)},Ev=function(t){return function(e,n,r,i){return Av(t,e,n,r,i)}},Av=function(t,e,n,r,i){var o=r.focusManager.get(e).bind((function(n){return t(e.element,n,r,i)}));return o.map((function(t){return r.focusManager.set(e,t),!0}))},Tv=Ev,Ov=Ev,Pv=Ev,Dv=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Rv=function(t){return!Dv(t.dom)},Bv=function(t,e){return tt(t,e).map((function(e){return{index:e,candidates:t}}))},Iv=function(t,e,n){var r=function(t){return ii(t,e)},i=Zh(t,n),o=X(i,Rv);return Bv(o,r)},Nv=function(t,e){return tt(t,(function(t){return ii(e,t)}))},Lv=function(t,e,n,r){var i=Math.floor(e/n),o=e%n;return r(i,o).bind((function(e){var r=e.row*n+e.column;return r>=0&&r<t.length?I.some(t[r]):I.none()}))},Fv=function(t,e,n,r,i){return Lv(t,e,r,(function(e,o){var a=e===n-1,s=a?t.length-e*r:r,u=gf(o,i,0,s-1);return I.some({row:e,column:u})}))},zv=function(t,e,n,r,i){return Lv(t,e,r,(function(e,o){var a=gf(e,i,0,n-1),s=a===n-1,u=s?t.length-a*r:r,c=vf(o,0,u-1);return I.some({row:a,column:c})}))},jv=function(t,e,n,r){return Fv(t,e,n,r,1)},Hv=function(t,e,n,r){return Fv(t,e,n,r,-1)},Vv=function(t,e,n,r){return zv(t,e,n,r,-1)},Uv=function(t,e,n,r){return zv(t,e,n,r,1)},$v=[bn("selector"),Fn("execute",pv),zc("onEscape"),Fn("captureTab",!1),$c()],qv=function(t,e,n){pc(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},Gv=function(t,e){return e.focusManager.get(t).bind((function(t){return mc(t,e.selector)}))},Wv=function(t,e,n,r){return Gv(t,n).bind((function(r){return n.execute(t,e,r)}))},Kv=function(t){return function(e,n,r,i){return Iv(e,n,r.selector).bind((function(e){return t(e.candidates,e.index,i.getNumRows().getOr(r.initSize.numRows),i.getNumColumns().getOr(r.initSize.numColumns))}))}},Xv=function(t,e,n){return n.captureTab?I.some(!0):I.none()},Yv=function(t,e,n){return n.onEscape(t,e)},Zv=Kv(Hv),Jv=Kv(jv),Qv=Kv(Vv),ty=Kv(Uv),ey=b([iv(Qg(qg),kv(Zv,Jv)),iv(Qg(Wg),Cv(Zv,Jv)),iv(Qg(Gg),Tv(Qv)),iv(Qg(Kg),Ov(ty)),iv(tv([ev,Qg(Hg)]),Xv),iv(tv([rv,Qg(Hg)]),Xv),iv(Qg(Ug),Yv),iv(Qg($g.concat(Vg)),Wv)]),ny=b([iv(Qg($g),mv)]),ry=cv($v,_v,ey,ny,(function(){return I.some(qv)})),iy=function(t,e,n,r){var i=function(t){return"button"===Bo(t)&&"disabled"===ka(t,"disabled")},o=function(t,e,n){var a=gf(e,r,0,n.length-1);return a===t?I.none():i(n[a])?o(t,a,n):I.from(n[a])};return Iv(t,n,e).bind((function(t){var e=t.index,n=t.candidates;return o(e,e,n)}))},oy=[bn("selector"),Fn("getInitial",I.none),Fn("execute",pv),zc("onEscape"),Fn("executeOnMove",!1),Fn("allowVertical",!0)],ay=function(t,e){return e.focusManager.get(t).bind((function(t){return mc(t,e.selector)}))},sy=function(t,e,n){return ay(t,n).bind((function(r){return n.execute(t,e,r)}))},uy=function(t,e,n){e.getInitial(t).orThunk((function(){return pc(t.element,e.selector)})).each((function(n){e.focusManager.set(t,n)}))},cy=function(t,e,n){return iy(t,n.selector,e,-1)},ly=function(t,e,n){return iy(t,n.selector,e,1)},fy=function(t){return function(e,n,r,i){return t(e,n,r,i).bind((function(){return r.executeOnMove?sy(e,n,r):I.some(!0)}))}},hy=function(t,e,n){return n.onEscape(t,e)},dy=function(t,e,n,r){var i=qg.concat(n.allowVertical?Gg:[]),o=Wg.concat(n.allowVertical?Kg:[]);return[iv(Qg(i),fy(kv(cy,ly))),iv(Qg(o),fy(Cv(cy,ly))),iv(Qg(Vg),sy),iv(Qg($g),sy),iv(Qg(Ug),hy)]},py=b([iv(Qg($g),mv)]),my=cv(oy,rs.init,dy,py,(function(){return I.some(uy)})),gy=function(t,e,n){return I.from(t[e]).bind((function(t){return I.from(t[n]).map((function(t){return{rowIndex:e,columnIndex:n,cell:t}}))}))},vy=function(t,e,n,r){var i=t[e],o=i.length,a=gf(n,r,0,o-1);return gy(t,e,a)},yy=function(t,e,n,r){var i=gf(n,r,0,t.length-1),o=t[i].length,a=vf(e,0,o-1);return gy(t,i,a)},by=function(t,e,n,r){var i=t[e],o=i.length,a=vf(n+r,0,o-1);return gy(t,e,a)},wy=function(t,e,n,r){var i=vf(n+r,0,t.length-1),o=t[i].length,a=vf(e,0,o-1);return gy(t,i,a)},_y=function(t,e,n){return vy(t,e,n,1)},xy=function(t,e,n){return vy(t,e,n,-1)},My=function(t,e,n){return yy(t,n,e,-1)},Sy=function(t,e,n){return yy(t,n,e,1)},ky=function(t,e,n){return by(t,e,n,-1)},Cy=function(t,e,n){return by(t,e,n,1)},Ey=function(t,e,n){return wy(t,n,e,-1)},Ay=function(t,e,n){return wy(t,n,e,1)},Ty=[En("selectors",[bn("row"),bn("cell")]),Fn("cycles",!0),Fn("previousSelector",I.none),Fn("execute",pv)],Oy=function(t,e,n){var r=e.previousSelector(t).orThunk((function(){var n=e.selectors;return pc(t.element,n.cell)}));r.each((function(n){e.focusManager.set(t,n)}))},Py=function(t,e,n){return tf(t.element).bind((function(r){return n.execute(t,e,r)}))},Dy=function(t,e){return q(t,(function(t){return Zh(t,e.selectors.cell)}))},Ry=function(t,e){return function(n,r,i){var o=i.cycles?t:e;return mc(r,i.selectors.row).bind((function(t){var e=Zh(t,i.selectors.cell);return Nv(e,r).bind((function(e){var r=Zh(n,i.selectors.row);return Nv(r,t).bind((function(t){var n=Dy(r,i);return o(n,t,e).map((function(t){return t.cell}))}))}))}))}},By=Ry(xy,ky),Iy=Ry(_y,Cy),Ny=Ry(My,Ey),Ly=Ry(Sy,Ay),Fy=b([iv(Qg(qg),kv(By,Iy)),iv(Qg(Wg),Cv(By,Iy)),iv(Qg(Gg),Tv(Ny)),iv(Qg(Kg),Ov(Ly)),iv(Qg($g.concat(Vg)),Py)]),zy=b([iv(Qg($g),mv)]),jy=cv(Ty,rs.init,Fy,zy,(function(){return I.some(Oy)})),Hy=[bn("selector"),Fn("execute",pv),Fn("moveOnTab",!1)],Vy=function(t,e,n){return n.focusManager.get(t).bind((function(r){return n.execute(t,e,r)}))},Uy=function(t,e,n){pc(t.element,e.selector).each((function(n){e.focusManager.set(t,n)}))},$y=function(t,e,n){return iy(t,n.selector,e,-1)},qy=function(t,e,n){return iy(t,n.selector,e,1)},Gy=function(t,e,n,r){return n.moveOnTab?Pv($y)(t,e,n,r):I.none()},Wy=function(t,e,n,r){return n.moveOnTab?Pv(qy)(t,e,n,r):I.none()},Ky=b([iv(Qg(Gg),Pv($y)),iv(Qg(Kg),Pv(qy)),iv(tv([ev,Qg(Hg)]),Gy),iv(tv([rv,Qg(Hg)]),Wy),iv(Qg(Vg),Vy),iv(Qg($g),Vy)]),Xy=b([iv(Qg($g),mv)]),Yy=cv(Hy,rs.init,Ky,Xy,(function(){return I.some(Uy)})),Zy=[zc("onSpace"),zc("onEnter"),zc("onShiftEnter"),zc("onLeft"),zc("onRight"),zc("onTab"),zc("onShiftTab"),zc("onUp"),zc("onDown"),zc("onEscape"),Fn("stopSpaceKeyup",!1),On("focusIn")],Jy=function(t,e,n){return[iv(Qg($g),n.onSpace),iv(tv([rv,Qg(Vg)]),n.onEnter),iv(tv([ev,Qg(Vg)]),n.onShiftEnter),iv(tv([ev,Qg(Hg)]),n.onShiftTab),iv(tv([rv,Qg(Hg)]),n.onTab),iv(Qg(Gg),n.onUp),iv(Qg(Kg),n.onDown),iv(Qg(qg),n.onLeft),iv(Qg(Wg),n.onRight),iv(Qg($g),n.onSpace),iv(Qg(Ug),n.onEscape)]},Qy=function(t,e,n){return n.stopSpaceKeyup?[iv(Qg($g),mv)]:[]},tb=cv(Zy,rs.init,Jy,Qy,(function(t){return t.focusIn})),eb=fv.schema(),nb=hv.schema(),rb=my.schema(),ib=ry.schema(),ob=jy.schema(),ab=wv.schema(),sb=Yy.schema(),ub=tb.schema(),cb=Object.freeze({__proto__:null,acyclic:eb,cyclic:nb,flow:rb,flatgrid:ib,matrix:ob,execution:ab,menu:sb,special:ub}),lb=function(t){return Ht(t,"setGridSize")},fb=$l({branchKey:"mode",branches:cb,name:"keying",active:{events:function(t,e){var n=t.handler;return n.toEvents(t,e)}},apis:{focusIn:function(t,e,n){e.sendFocusIn(e).fold((function(){t.getSystem().triggerFocus(t.element,t.element)}),(function(r){r(t,e,n)}))},setGridSize:function(t,e,n,r,i){lb(n)?n.setGridSize(r,i):console.error("Layout does not support setGridSize")}},state:Mv}),hb=function(t,e,n,r){ef((function(){var e=q(r,t.getSystem().build);Fd(t,e)}),t.element)},db=function(t,e,n,r){var i=t.getSystem().build(r);jd(t,i,n)},pb=function(t,e,n,r){db(t,e,fa,r)},mb=function(t,e,n,r){db(t,e,la,r)},gb=function(t,e,n,r){var i=vb(t),o=Q(i,(function(t){return ii(r.element,t.element)}));o.each(Vd)},vb=function(t,e){return t.components()},yb=function(t,e,n,r,i){var o=vb(t);return I.from(o[r]).map((function(o){return gb(t,e,n,o),i.each((function(n){db(t,e,(function(t,e){ha(t,e,r)}),n)})),o}))},bb=function(t,e,n,r,i){var o=vb(t);return tt(o,r).bind((function(r){return yb(t,e,n,r,i)}))},wb=Object.freeze({__proto__:null,append:pb,prepend:mb,remove:gb,replaceAt:yb,replaceBy:bb,set:hb,contents:vb}),_b=Vl({fields:[],name:"replacing",apis:wb}),xb=function(t,e){var n=go(e);return Vl({fields:[bn("enabled")],name:t,active:{events:b(n)}})},Mb=function(t,e){var n=xb(t,e);return{key:t,value:{config:{},me:n,configAsRaw:b({}),initialConfig:{},state:rs}}},Sb=function(t,e){e.ignore||(Yl(t.element),e.onFocus(t))},kb=function(t,e){e.ignore||Zl(t.element)},Cb=function(t){return Jl(t.element)},Eb=Object.freeze({__proto__:null,focus:Sb,blur:kb,isFocused:Cb}),Ab=function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return cs(n)},Tb=function(t){return go([wo(Fi(),(function(e,n){Sb(e,t),n.stop()}))].concat(t.stopMousedown?[wo(xi(),(function(t,e){e.event.prevent()}))]:[]))},Ob=Object.freeze({__proto__:null,exhibit:Ab,events:Tb}),Pb=[Fc("onFocus"),Fn("stopMousedown",!1),Fn("ignore",!1)],Db=Vl({fields:Pb,name:"focusing",active:Ob,apis:Eb}),Rb=function(t){var e=function(){var e=Xn(t),n=function(){return e.get()},r=function(t){return e.set(t)},i=function(){return e.set(t)},o=function(){return e.get()};return{get:n,set:r,clear:i,readState:o}};return{init:e}},Bb=function(t,e,n){var r=e.aria;r.update(t,r,n.get())},Ib=function(t,e,n){e.toggleClass.each((function(e){n.get()?Ls(t.element,e):zs(t.element,e)}))},Nb=function(t,e,n){zb(t,e,n,!n.get())},Lb=function(t,e,n){n.set(!0),Ib(t,e,n),Bb(t,e,n)},Fb=function(t,e,n){n.set(!1),Ib(t,e,n),Bb(t,e,n)},zb=function(t,e,n,r){var i=r?Lb:Fb;i(t,e,n)},jb=function(t,e,n){return n.get()},Hb=function(t,e,n){zb(t,e,n,e.selected)},Vb=Object.freeze({__proto__:null,onLoad:Hb,toggle:Nb,isOn:jb,on:Lb,off:Fb,set:zb}),Ub=function(){return cs({})},$b=function(t,e){var n=Rl(t,e,Nb),r=Bl(t,e,Hb);return go(et([t.toggleOnExecute?[n]:[],[r]]))},qb=Object.freeze({__proto__:null,exhibit:Ub,events:$b}),Gb=function(t,e,n){Ma(t.element,"aria-pressed",n),e.syncWithExpanded&&Xb(t,e,n)},Wb=function(t,e,n){Ma(t.element,"aria-selected",n)},Kb=function(t,e,n){Ma(t.element,"aria-checked",n)},Xb=function(t,e,n){Ma(t.element,"aria-expanded",n)},Yb=[Fn("selected",!1),On("toggleClass"),Fn("toggleOnExecute",!0),zn("aria",{mode:"none"},un("mode",{pressed:[Fn("syncWithExpanded",!1),Vc("update",Gb)],checked:[Vc("update",Kb)],expanded:[Vc("update",Xb)],selected:[Vc("update",Wb)],none:[Vc("update",m)]}))],Zb=Vl({fields:Yb,name:"toggling",active:qb,apis:Vb,state:Rb(!1)}),Jb=function(){var t=function(t,e){e.stop(),fo(t)};return[wo(Ri(),t),wo($i(),t),Eo(yi()),Eo(xi())]},Qb=function(t){var e=function(t){return Ro((function(e,n){t(e),n.stop()}))};return go(et([t.map(e).toArray(),Jb()]))},tw="alloy.item-hover",ew="alloy.item-focus",nw=function(t){(tf(t.element).isNone()||Db.isFocused(t))&&(Db.isFocused(t)||Db.focus(t),lo(t,tw,{item:t}))},rw=function(t){lo(t,ew,{item:t})},iw=b(tw),ow=b(ew),aw=function(t){return{dom:t.dom,domModification:E(E({},t.domModification),{attributes:E(E(E({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes),{"aria-haspopup":t.hasSubmenu}),t.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Qp.augment(t.itemBehaviours,[t.toggling.fold(Zb.revoke,(function(t){return Zb.config(E({aria:{mode:"checked"}},t))})),Db.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){rw(t)}}),fb.config({mode:"execution"}),Xp.config({store:{mode:"memory",initialValue:t.data}}),Mb("item-type-events",T(Jb(),[wo(Ci(),nw),wo(Ui(),Db.focus)]))]),components:t.components,eventOrder:t.eventOrder}},sw=[bn("data"),bn("components"),bn("dom"),Fn("hasSubmenu",!1),On("toggling"),Qp.field("itemBehaviours",[Zb,Db,fb,Xp]),Fn("ignoreFocus",!1),Fn("domModification",{}),Vc("builder",aw),Fn("eventOrder",{})],uw=function(t){return{dom:t.dom,components:t.components,events:go([Ao(Ui())])}},cw=[bn("dom"),bn("components"),Vc("builder",uw)],lw=b("item-widget"),fw=b([Am({name:"widget",overrides:function(t){return{behaviours:jl([Xp.config({store:{mode:"manual",getValue:function(e){return t.data},setValue:m}})])}}})]),hw=function(t){var e=Hm(lw(),t,fw()),n=Vm(lw(),t,e.internals()),r=function(e){return Um(e,t,"widget").map((function(t){return fb.focusIn(t),t}))},i=function(e,n){return mg(n.event.target)?I.none():function(){return t.autofocus?(n.setSource(e.element),I.none()):I.none()}()};return{dom:t.dom,components:n,domModification:t.domModification,events:go([Ro((function(t,e){r(t).each((function(t){e.stop()}))})),wo(Ci(),nw),wo(Ui(),(function(e,n){t.autofocus?r(e):Db.focus(e)}))]),behaviours:Qp.augment(t.widgetBehaviours,[Xp.config({store:{mode:"memory",initialValue:t.data}}),Db.config({ignore:t.ignoreFocus,onFocus:function(t){rw(t)}}),fb.config({mode:"special",focusIn:t.autofocus?function(t){r(t)}:ql(),onLeft:i,onRight:i,onEscape:function(e,n){return Db.isFocused(e)||t.autofocus?t.autofocus?(n.setSource(e.element),I.none()):I.none():(Db.focus(e),I.some(!0))}})])}},dw=[bn("uid"),bn("data"),bn("components"),bn("dom"),Fn("autofocus",!1),Fn("ignoreFocus",!1),Qp.field("widgetBehaviours",[Xp,Db,fb]),Fn("domModification",{}),Ym(fw()),Vc("builder",hw)],pw=un("type",{widget:dw,item:sw,separator:cw}),mw=function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}},gw=function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}},vw=function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}},yw=b([Pm({factory:{sketch:function(t){var e=on("menu.spec item",pw,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:E(E({},e),{uid:qa("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),bw=b([bn("value"),bn("items"),bn("dom"),bn("components"),Fn("eventOrder",{}),Yp("menuBehaviours",[zg,Xp,bg,fb]),zn("movement",{mode:"menu",moveOnTab:!0},un("mode",{grid:[$c(),Vc("config",mw)],matrix:[Vc("config",gw),bn("rowSelector")],menu:[Fn("moveOnTab",!0),Vc("config",vw)]})),Bc(),Fn("fakeFocus",!1),Fn("focusManager",sv()),Fc("onHighlight")]),ww=b("alloy.menu-focus"),_w=function(t,e,n,r){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jp(t.menuBehaviours,[zg.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Xp.config({store:{mode:"memory",initialValue:t.value}}),bg.config({find:I.some}),fb.config(t.movement.config(t,t.movement))]),events:go([wo(ow(),(function(t,e){var n=e.event;t.getSystem().getByDom(n.target).each((function(n){zg.highlight(t,n),e.stop(),lo(t,ww(),{menu:t,item:n})}))})),wo(iw(),(function(t,e){var n=e.event.item;zg.highlight(t,n)}))]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}},xw=ug({name:"Menu",configFields:bw(),partFields:yw(),factory:_w}),Mw=function(t){return Dt(t,(function(t,e){return{k:t,v:e}}))},Sw=function(t,e,n,r){return zt(n,r).bind((function(r){return zt(t,r).bind((function(r){var i=Sw(t,e,n,r);return I.some([r].concat(i))}))})).getOr([])},kw=function(t,e){var n={};Ot(t,(function(t,e){G(t,(function(t){n[t]=e}))}));var r=e,i=Mw(e),o=Pt(i,(function(t,e){return[e].concat(Sw(n,r,i,e))}));return Pt(n,(function(t){return zt(o,t).getOr([t])}))},Cw=function(){var t=Xn({}),e=Xn({}),n=Xn({}),r=Xn(I.none()),i=Xn({}),o=function(){t.set({}),e.set({}),n.set({}),r.set(I.none())},a=function(){return r.get().isNone()},s=function(t,n){var r;e.set(E(E({},e.get()),(r={},r[t]={type:"prepared",menu:n},r)))},u=function(o,a,s,u){r.set(I.some(o)),t.set(s),e.set(a),i.set(u);var c=kw(u,s);n.set(c)},c=function(e){return Lt(t.get(),(function(t,n){return t===e}))},l=function(t,e,n){return m(t).bind((function(r){return c(t).bind((function(t){return e(t).map((function(t){return{triggeredMenu:r,triggeringItem:t,triggeringPath:n}}))}))}))},f=function(t,e){var i=X(v(t).toArray(),(function(t){return m(t).isSome()}));return zt(n.get(),t).bind((function(t){var n=it(i.concat(t)),o=nt(n,(function(t,i){return l(t,e,n.slice(0,i+1)).fold((function(){return r.get().is(t)?[]:[I.none()]}),(function(t){return[I.some(t)]}))}));return lg(o)}))},h=function(e){return zt(t.get(),e).map((function(t){var r=zt(n.get(),e).getOr([]);return[t].concat(r)}))},d=function(t){return zt(n.get(),t).bind((function(t){return t.length>1?I.some(t.slice(1)):I.none()}))},p=function(t){return zt(n.get(),t)},m=function(t){return g(t).bind(Ew)},g=function(t){return zt(e.get(),t)},v=function(e){return zt(t.get(),e)},y=function(t){var e=i.get();return ot(At(e),t)},b=function(){return r.get().bind(m)},w=function(){return e.get()};return{setMenuBuilt:s,setContents:u,expand:h,refresh:p,collapse:d,lookupMenu:g,lookupItem:v,otherMenus:y,getPrimary:b,getMenus:w,clear:o,isClear:a,getTriggeringPath:f}},Ew=function(t){return"prepared"===t.type?I.some(t.menu):I.none()},Aw={init:Cw,extractPreparedMenu:Ew},Tw=function(t,e){var n,r=Xn(I.none()),i=function(e,n,r){return Pt(r,(function(r,i){var o=function(){return xw.sketch(E(E({},r),{value:i,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?uv():sv()}))};return i===n?{type:"prepared",menu:e.getSystem().build(o())}:{type:"notbuilt",nbMenu:o}}))},o=Aw.init(),a=function(e){var n=i(e,t.data.primary,t.data.menus),r=c();return o.setContents(t.data.primary,n,t.data.expansions,r),o.getPrimary()},s=function(t){return Xp.getValue(t).value},u=function(t,e,n){return ht(e,(function(t){if(!t.getSystem().isConnected())return I.none();var e=zg.getCandidates(t);return Q(e,(function(t){return s(t)===n}))}))},c=function(e){return Pt(t.data.menus,(function(t,e){return nt(t.items,(function(t){return"separator"===t.type?[]:[t.data.value]}))}))},l=function(t,e){zg.highlight(t,e),zg.getHighlighted(e).orThunk((function(){return zg.getFirst(e)})).each((function(e){ho(t,e.element,Ui())}))},f=function(t,e){return cg(q(e,(function(e){return t.lookupMenu(e).bind((function(t){return"prepared"===t.type?I.some(t.menu):I.none()}))})))},h=function(e,n,r){var i=f(n,n.otherMenus(r));G(i,(function(n){Vs(n.element,[t.markers.backgroundMenu]),t.stayInDom||_b.remove(e,n)}))},d=function(e){return r.get().getOrThunk((function(){var n={},i=Zh(e.element,"."+t.markers.item),o=X(i,(function(t){return"true"===ka(t,"aria-haspopup")}));return G(o,(function(t){e.getSystem().getByDom(t).each((function(t){var e=s(t);n[e]=t}))})),r.set(I.some(n)),n}))},p=function(t,e){var n=d(t);Ot(n,(function(t,n){var r=H(e,n);Ma(t.element,"aria-expanded",r)}))},g=function(e,n,r){return I.from(r[0]).bind((function(i){return n.lookupMenu(i).bind((function(i){if("notbuilt"===i.type)return I.none();var o=i.menu,a=f(n,r.slice(1));return G(a,(function(e){Ls(e.element,t.markers.backgroundMenu)})),$s(o.element)||_b.append(e,wu(o)),Vs(o.element,[t.markers.backgroundMenu]),l(e,o),h(e,n,r),I.some(o)}))}))};(function(t){t[t["HighlightSubmenu"]=0]="HighlightSubmenu",t[t["HighlightParent"]=1]="HighlightParent"})(n||(n={}));var v=function(t,e,n){if("notbuilt"===n.type){var r=t.getSystem().build(n.nbMenu());return o.setMenuBuilt(e,r),r}return n.menu},y=function(e,r,i){void 0===i&&(i=n.HighlightSubmenu);var a=s(r);return o.expand(a).bind((function(a){return p(e,a),I.from(a[0]).bind((function(s){return o.lookupMenu(s).bind((function(u){var c=v(e,s,u);return $s(c.element)||_b.append(e,wu(c)),t.onOpenSubmenu(e,r,c,it(a)),i===n.HighlightSubmenu?(zg.highlightFirst(c),g(e,o,a)):(zg.dehighlightAll(c),I.some(r))}))}))}))},b=function(e,n){var r=s(n);return o.collapse(r).bind((function(r){return p(e,r),g(e,o,r).map((function(r){return t.onCollapseMenu(e,n,r),r}))}))},w=function(t,e){var n=s(e);return o.refresh(n).bind((function(e){return p(t,e),g(t,o,e)}))},_=function(t,e){return mg(e.element)?I.none():y(t,e,n.HighlightSubmenu)},x=function(t,e){return mg(e.element)?I.none():b(t,e)},M=function(e,n){return b(e,n).orThunk((function(){return t.onEscape(e,n).map((function(){return e}))}))},S=function(e){return function(n,r){return mc(r.getSource(),"."+t.markers.item).bind((function(t){return n.getSystem().getByDom(t).toOptional().bind((function(t){return e(n,t).map(k)}))}))}},C=go([wo(ww(),(function(t,e){var n=e.event.item;o.lookupItem(s(n)).each((function(){var n=e.event.menu;zg.highlight(t,n);var r=s(e.event.item);o.refresh(r).each((function(e){return h(t,o,e)}))}))})),Ro((function(e,r){var i=r.event.target;e.getSystem().getByDom(i).each((function(r){var i=s(r);0===i.indexOf("collapse-item")&&b(e,r),y(e,r,n.HighlightSubmenu).fold((function(){t.onExecute(e,r)}),m)}))})),Oo((function(e,n){a(e).each((function(n){_b.append(e,wu(n)),t.onOpenMenu(e,n),t.highlightImmediately&&l(e,n)}))}))].concat(t.navigateOnHover?[wo(iw(),(function(e,r){var i=r.event.item;w(e,i),y(e,i,n.HighlightParent),t.onHover(e,i)}))]:[])),A=function(t){return zg.getHighlighted(t).bind(zg.getHighlighted)},T=function(t){A(t).each((function(e){b(t,e)}))},O=function(t){o.getPrimary().each((function(e){l(t,e)}))},P=function(t){return I.from(t.components()[0]).filter((function(t){return"menu"===ka(t.element,"role")}))},D=function(e){var n=o.getPrimary().bind((function(t){return A(e).bind((function(t){var n=s(t),r=Ft(o.getMenus()),i=cg(q(r,Aw.extractPreparedMenu));return o.getTriggeringPath(n,(function(t){return u(e,i,t)}))})).map((function(e){return{primary:t,triggeringPath:e}}))}));n.fold((function(){P(e).each((function(n){t.onRepositionMenu(e,n,[])}))}),(function(n){var r=n.primary,i=n.triggeringPath;t.onRepositionMenu(e,r,i)}))},R={collapseMenu:T,highlightPrimary:O,repositionMenus:D};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Jp(t.tmenuBehaviours,[fb.config({mode:"special",onRight:S(_),onLeft:S(x),onEscape:S(M),focusIn:function(t,e){o.getPrimary().each((function(e){ho(t,e.element,Ui())}))}}),zg.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),bg.config({find:function(t){return zg.getHighlighted(t)}}),_b.config({})]),eventOrder:t.eventOrder,apis:R,events:C}},Ow=b("collapse-item"),Pw=function(t,e,n){return{primary:t,menus:e,expansions:n}},Dw=function(t,e){return{primary:t,menus:ce(t,e),expansions:{}}},Rw=function(t){return{value:La(Ow()),meta:{text:t}}},Bw=sg({name:"TieredMenu",configFields:[Hc("onExecute"),Hc("onEscape"),jc("onOpenMenu"),jc("onOpenSubmenu"),Fc("onRepositionMenu"),Fc("onCollapseMenu"),Fn("highlightImmediately",!0),En("data",[bn("primary"),bn("menus"),bn("expansions")]),Fn("fakeFocus",!1),Fc("onHighlight"),Fc("onHover"),Ic(),bn("dom"),Fn("navigateOnHover",!0),Fn("stayInDom",!1),Yp("tmenuBehaviours",[fb,zg,bg,_b]),Fn("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)},repositionMenus:function(t,e){t.repositionMenus(e)}},factory:Tw,extraApis:{tieredData:Pw,singleData:Dw,collapseItem:Rw}}),Iw=function(t,e,n,r,i){var o=function(){return t.lazySink(e)},a="horizontal"===r.type?{layouts:{onLtr:function(){return El()},onRtl:function(){return Al()}}}:{},s=function(t){return 2===t.length},u=function(t){return s(t)?a:{}};return Bw.sketch({dom:{tag:"div"},data:r.data,markers:r.menu.markers,highlightImmediately:r.menu.highlightImmediately,onEscape:function(){return dp.close(e),t.onEscape.map((function(t){return t(e)})),I.some(!0)},onExecute:function(){return I.some(!0)},onOpenMenu:function(t,e){Rd.positionWithinBounds(o().getOrDie(),n,e,i())},onOpenSubmenu:function(t,e,n,r){var i=o().getOrDie();Rd.position(i,E({anchor:"submenu",item:e},u(r)),n)},onRepositionMenu:function(t,e,r){var a=o().getOrDie();Rd.positionWithinBounds(a,n,e,i()),G(r,(function(t){var e=u(t.triggeringPath);Rd.position(a,E({anchor:"submenu",item:t.triggeringItem},e),t.triggeredMenu)}))}})},Nw=function(t,e){var n=function(e,n){var r=t.getRelated(e);return r.exists((function(t){return bc(t,n)}))},r=function(t,e){dp.setContent(t,e)},i=function(t,e,n){o(t,e,n,I.none())},o=function(t,e,n,r){a(t,e,n,(function(){return r.map((function(t){return ic(t)}))}))},a=function(e,n,r,i){var o=t.lazySink(e).getOrDie();dp.openWhileCloaked(e,r,(function(){return Rd.positionWithinBounds(o,n,e,i())})),Xp.setValue(e,I.some({mode:"position",anchor:n,getBounds:i}))},s=function(t,e,n){u(t,e,n,(function(){return I.none()}))},u=function(e,n,r,i){var o=Iw(t,e,n,r,i);dp.open(e,o),Xp.setValue(e,I.some({mode:"menu",menu:o}))},c=function(t){dp.isOpen(t)&&(Xp.setValue(t,I.none()),dp.close(t))},l=function(t){return dp.getState(t)},f=function(e){dp.isOpen(e)&&Xp.getValue(e).each((function(n){switch(n.mode){case"menu":dp.getState(e).each((function(t){Bw.repositionMenus(t)}));break;case"position":var r=t.lazySink(e).getOrDie();Rd.positionWithinBounds(r,n.anchor,e,n.getBounds());break}}))},h={setContent:r,showAt:i,showWithin:o,showWithinBounds:a,showMenuAt:s,showMenuWithinBounds:u,hide:c,getContent:l,reposition:f,isOpen:dp.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Jp(t.inlineBehaviours,[dp.config({isPartOf:function(t,e,r){return bc(e,r)||n(t,r)},getAttachPoint:function(e){return t.lazySink(e).getOrDie()},onOpen:function(e){t.onShow(e)},onClose:function(e){t.onHide(e)}}),Xp.config({store:{mode:"memory",initialValue:I.none()}}),Gl.config({channels:E(E({},yp(E({isExtraPart:e.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),wp(E(E({},t.fireRepositionEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})),{doReposition:f})))})]),eventOrder:t.eventOrder,apis:h}},Lw=sg({name:"InlineView",configFields:[bn("lazySink"),Fc("onShow"),Fc("onHide"),Bn("onEscape"),Yp("inlineBehaviours",[dp,Xp,Gl]),Nn("fireDismissalEventInstead",[Fn("event",eo())]),Nn("fireRepositionEventInstead",[Fn("event",no())]),Fn("getRelated",I.none),Fn("isExtraPart",S),Fn("eventOrder",I.none)],factory:Nw,apis:{showAt:function(t,e,n,r){t.showAt(e,n,r)},showWithin:function(t,e,n,r,i){t.showWithin(e,n,r,i)},showWithinBounds:function(t,e,n,r,i){t.showWithinBounds(e,n,r,i)},showMenuAt:function(t,e,n,r){t.showMenuAt(e,n,r)},showMenuWithinBounds:function(t,e,n,r,i){t.showMenuWithinBounds(e,n,r,i)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)},reposition:function(t,e){t.reposition(e)}}}),Fw=function(t){return t.x},zw=function(t,e){return t.x+t.width/2-e.width/2},jw=function(t,e){return t.x+t.width-e.width},Hw=function(t){return t.y},Vw=function(t,e){return t.y+t.height-e.height},Uw=function(t,e,n){return qc(jw(t,e),Vw(t,e),n.innerSoutheast(),Qc(),ol(t,{right:0,bottom:3}),"layout-inner-se")},$w=function(t,e,n){return qc(Fw(t),Vw(t,e),n.innerSouthwest(),Jc(),ol(t,{left:1,bottom:3}),"layout-inner-sw")},qw=function(t,e,n){return qc(jw(t,e),Hw(t),n.innerNortheast(),Zc(),ol(t,{right:0,top:2}),"layout-inner-ne")},Gw=function(t,e,n){return qc(Fw(t),Hw(t),n.innerNorthwest(),Yc(),ol(t,{left:1,top:2}),"layout-inner-nw")},Ww=function(t,e,n){return qc(zw(t,e),Hw(t),n.innerNorth(),tl(),ol(t,{top:2}),"layout-inner-n")},Kw=function(t,e,n){return qc(zw(t,e),Vw(t,e),n.innerSouth(),el(),ol(t,{bottom:3}),"layout-inner-s")},Xw=tinymce.util.Tools.resolve("tinymce.util.Delay"),Yw=function(t){var e=Qb(t.action),n=t.dom.tag,r=function(e){return zt(t.dom,"attributes").bind((function(t){return zt(t,e)}))},i=function(){if("button"===n){var t=r("type").getOr("button"),e=r("role").map((function(t){return{role:t}})).getOr({});return E({type:t},e)}var i=r("role").getOr("button");return{role:i}};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:Qp.augment(t.buttonBehaviours,[Db.config({}),fb.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:i()},eventOrder:t.eventOrder}},Zw=sg({name:"Button",factory:Yw,configFields:[Fn("uid",void 0),bn("dom"),Fn("components",[]),Qp.field("buttonBehaviours",[Db,fb]),On("action"),On("role"),Fn("eventOrder",{})]}),Jw=function(t){var e=ig(t)&&Ht(t,"uid")?t.uid:qa("memento"),n=function(t){return t.getSystem().getByUid(e).getOrDie()},r=function(t){return t.getSystem().getByUid(e).toOptional()},i=function(){return E(E({},t),{uid:e})};return{get:n,getOpt:r,asSpec:i}},Qw=function(t){return I.from(t()["temporary-placeholder"]).getOr("!not found!")},t_=function(t,e){return I.from(e()[t.toLowerCase()]).getOrThunk((function(){return Qw(e)}))},e_=function(t,e,n){return I.from(e()[t.toLowerCase()]).or(n).getOrThunk((function(){return Qw(e)}))},n_=function(t,e){return ht(t,(function(t){return I.from(e()[t.toLowerCase()])})).getOrThunk((function(){return Qw(e)}))},r_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},i_=function(t){var e=Jw({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:jl([_b.config({})])}),n=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},r=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},i=Jw({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},r(0)],behaviours:jl([_b.config({})])}),o=function(t,e){t.getSystem().isConnected()&&i.getOpt(t).each((function(t){_b.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(e)]},r(e)])}))},a=function(t,n){if(t.getSystem().isConnected()){var r=e.get(t);_b.set(r,[gu(n)])}},s={updateProgress:o,updateText:a},u=et([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return I.from(r_[t])})).toArray()]),c=Jw(Zw.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:t_("close",t.iconProvider),attributes:{"aria-label":t.translationProvider("Close")}}}],action:function(e){t.onAction(e)}})),l=[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n_(u,t.iconProvider)}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[e.asSpec()],behaviours:jl([_b.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map((function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]})).getOr(["tox-notification","tox-notification--in"])},behaviours:jl([Db.config({}),Mb("notification-events",[wo(Ei(),(function(t){c.getOpt(t).each(Db.focus)}))])]),components:l.concat(t.progress?[i.asSpec()]:[]).concat(t.closeButton?[c.asSpec()]:[]),apis:s}},o_=sg({name:"Notification",factory:i_,configFields:[On("level"),bn("progress"),bn("icon"),bn("onAction"),bn("text"),bn("iconProvider"),bn("translationProvider"),Un("closeButton",!0)],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function a_(t,e,n){var r=e.backstage,i=function(t){switch(t){case"bc-bc":return Kw;case"tc-tc":return Ww;case"tc-bc":return bl;case"bc-tc":default:return wl}},o=function(t){G(t,(function(t){return t.moveTo(0,0)}))},a=function(t){t.length>0&&(ct(t).each((function(t){return t.moveRel(null,"banner")})),G(t,(function(e,n){n>0&&e.moveRel(t[n-1].getEl(),"bc-tc")})))},s=function(t){o(t),a(t)},u=function(t,o){var a=!t.closeButton&&t.timeout&&(t.timeout>0||t.timeout<0),s=function(){o(),Lw.hide(c)},u=bu(o_.sketch({text:t.text,level:H(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:I.from(t.icon),closeButton:!a,onAction:s,iconProvider:r.shared.providers.icons,translationProvider:r.shared.providers.translate})),c=bu(Lw.sketch(E({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:e.backstage.shared.getSink,fireDismissalEventInstead:{}},r.shared.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));return n.add(c),t.timeout>0&&Xw.setTimeout((function(){s()}),t.timeout),{close:s,moveTo:function(t,e){Lw.showAt(c,{anchor:"makeshift",x:t,y:e},wu(u))},moveRel:function(t,n){if("banner"!==n){var r=i(n),o={anchor:"node",root:qs(),node:I.some(er.fromDom(t)),layouts:{onRtl:function(){return[r]},onLtr:function(){return[r]}}};Lw.showAt(c,o,wu(u))}else Lw.showAt(c,e.backstage.shared.anchors.banner(),wu(u))},text:function(t){o_.updateText(u,t)},settings:t,getEl:function(){return u.element.dom},progressBar:{value:function(t){o_.updateProgress(u,t)}}}},c=function(t){t.close()},l=function(t){return t.settings};return{open:u,close:c,reposition:s,getArgs:l}}var s_,u_=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},i=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null===n&&(n=setTimeout((function(){t.apply(null,r),n=null}),e))};return{cancel:r,throttle:i}},c_=function(t,e){var n=null,r=function(){null!==n&&(clearTimeout(n),n=null)},i=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];null!==n&&clearTimeout(n),n=setTimeout((function(){t.apply(null,r),n=null}),e)};return{cancel:r,throttle:i}},l_=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),f_=function(t,e){return t.isBlock(e)||H(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e)},h_=function(t,e,n,r,i){var o=l_(t,(function(e){return f_(t,e)}));return I.from(o.backwards(e,n,r,i))},d_="[data-mce-autocompleter]",p_=function(t,e){return m_(er.fromDom(t.selection.getNode())).getOrThunk((function(){var n=er.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return fa(n,er.fromDom(e.extractContents())),e.insertNode(n.dom),qo(n).each((function(t){return t.dom.normalize()})),Xh(n).map((function(e){t.selection.setCursorLocation(e.dom,qh(e))})),n}))},m_=function(t){return mc(t,d_)},g_=function(t){return t.collapsed&&3===t.startContainer.nodeType},v_=function(t){return t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")},y_=function(t){return""!==t&&-1!==" \f\n\r\t\v".indexOf(t)},b_=function(t,e){return t.substring(e.length)},w_=function(t,e,n){var r;for(r=e-1;r>=0;r--){var i=t.charAt(r);if(y_(i))return I.none();if(i===n)break}return I.some(r)},__=function(t,e,n,r){if(void 0===r&&(r=0),!g_(e))return I.none();var i=function(t,e,r){return w_(r,e,n).getOr(e)},o=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return h_(t,e.startContainer,e.startOffset,i,o).bind((function(t){var i=e.cloneRange();if(i.setStart(t.container,t.offset),i.setEnd(e.endContainer,e.endOffset),i.collapsed)return I.none();var o=v_(i),a=o.lastIndexOf(n);return 0!==a||b_(o,n).length<r?I.none():I.some({text:b_(o,n),range:i,triggerChar:n})}))},x_=function(t,e,n,r){return void 0===r&&(r=0),m_(er.fromDom(e.startContainer)).fold((function(){return __(t,e,n,r)}),(function(e){var r=t.createRng();r.selectNode(e.dom);var i=v_(r);return I.some({range:r,text:b_(i,n),triggerChar:n})}))},M_=function(t,e){e.on("keypress compositionend",t.onKeypress.throttle),e.on("remove",t.onKeypress.cancel);var n=function(t,e){lo(t,Ti(),{raw:e})};e.on("keydown",(function(e){var r=function(){return t.getView().bind(zg.getHighlighted)};8===e.which&&t.onKeypress.throttle(e),t.isActive()&&(27===e.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===e.which?(r().each(fo),e.preventDefault()):40===e.which?(r().fold((function(){t.getView().each(zg.highlightFirst)}),(function(t){n(t,e)})),e.preventDefault(),e.stopImmediatePropagation()):37!==e.which&&38!==e.which&&39!==e.which||r().each((function(t){n(t,e),e.preventDefault(),e.stopImmediatePropagation()})):13!==e.which&&38!==e.which&&40!==e.which||t.cancelIfNecessary())})),e.on("NodeChange",(function(e){t.isActive()&&!t.isProcessingAction()&&m_(er.fromDom(e.element)).isNone()&&t.cancelIfNecessary()}))},S_={setup:M_},k_=tinymce.util.Tools.resolve("tinymce.util.Promise"),C_=function(t,e){return{container:t,offset:e}},E_=function(t){return t.nodeType===Qr},A_=function(t){return t.nodeType===Jr},T_=function(t){if(E_(t))return C_(t,t.data.length);var e=t.childNodes;return e.length>0?T_(e[e.length-1]):C_(t,e.length)},O_=function(t,e){var n=t.childNodes;return n.length>0&&e<n.length?O_(n[e],0):n.length>0&&A_(t)&&n.length===e?T_(n[n.length-1]):C_(t,e)},P_=function(t,e){return h_(t,e.container,e.offset,(function(t,e){return 0===e?-1:e}),t.getRoot()).filter((function(t){var e=t.container.data.charAt(t.offset-1);return!y_(e)})).isSome()},D_=function(t){return function(e){var n=O_(e.startContainer,e.startOffset);return!P_(t,n)}},R_=function(t,e,n){return ht(n.triggerChars,(function(n){return x_(t,e,n)}))},B_=function(t,e){var n=e(),r=t.selection.getRng();return R_(t.dom,r,n).bind((function(n){return I_(t,e,n)}))},I_=function(t,e,n,r){void 0===r&&(r={});var i=e(),o=t.selection.getRng(),a=o.startContainer.nodeValue,s=X(i.lookupByChar(n.triggerChar),(function(e){return n.text.length>=e.minChars&&e.matches.getOrThunk((function(){return D_(t.dom)}))(n.range,a,n.text)}));if(0===s.length)return I.none();var u=k_.all(q(s,(function(t){var e=t.fetch(n.text,t.maxResults,r);return e.then((function(e){return{matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}}))})));return I.some({lookupData:u,context:n})},N_=Fe([xn("type"),Rn("text")]),L_=function(t){return nn("separatormenuitem",N_,t)},F_=Fe([Fn("type","autocompleteitem"),Fn("active",!1),Fn("disabled",!1),Fn("meta",{}),xn("value"),Rn("text"),Rn("icon")]),z_=Fe([xn("type"),xn("ch"),jn("minChars",1),Fn("columns",1),jn("maxResults",10),Bn("matches"),kn("fetch"),kn("onAction"),Gn("highlightOn",[],dn)]),j_=function(t){return nn("Autocompleter.Separator",N_,t)},H_=function(t){return nn("Autocompleter.Item",F_,t)},V_=function(t){return nn("Autocompleter",z_,t)},U_=[Un("disabled",!1),Rn("tooltip"),Rn("icon"),Rn("text"),$n("onSetup",(function(){return m}))],$_=Fe([xn("type"),kn("onAction")].concat(U_)),q_=function(t){return nn("toolbarbutton",$_,t)},G_=[Un("active",!1)].concat(U_),W_=Fe(G_.concat([xn("type"),kn("onAction")])),K_=function(t){return nn("ToggleButton",W_,t)},X_=[$n("predicate",S),Vn("scope","node",["node","editor"]),Vn("position","selection",["node","selection","line"])],Y_=U_.concat([Fn("type","contextformbutton"),Fn("primary",!1),kn("onAction"),Kn("original",w)]),Z_=G_.concat([Fn("type","contextformbutton"),Fn("primary",!1),kn("onAction"),Kn("original",w)]),J_=U_.concat([Fn("type","contextformbutton")]),Q_=G_.concat([Fn("type","contextformtogglebutton")]),tx=un("type",{contextformbutton:Y_,contextformtogglebutton:Z_}),ex=Fe([Fn("type","contextform"),$n("initValue",(function(){return""})),Rn("label"),Tn("commands",tx),Pn("launch",un("type",{contextformbutton:J_,contextformtogglebutton:Q_}))].concat(X_)),nx=function(t){return nn("ContextForm",ex,t)},rx=Fe([Fn("type","contexttoolbar"),xn("items")].concat(X_)),ix=function(t){return nn("ContextToolbar",rx,t)},ox=function(t){var e={};return G(t,(function(t){e[t]={}})),At(e)},ax=function(t){var e=t.ui.registry.getAll().popups,n=Pt(e,(function(t){return V_(t).fold((function(t){throw new Error(an(t))}),(function(t){return t}))})),r=ox(Nt(n,(function(t){return t.ch}))),i=Ft(n),o=function(t){return X(i,(function(e){return e.ch===t}))};return{dataset:n,triggerChars:r,lookupByChar:o}};(function(t){t[t["CLOSE_ON_EXECUTE"]=0]="CLOSE_ON_EXECUTE",t[t["BUBBLE_TO_SANDBOX"]=1]="BUBBLE_TO_SANDBOX"})(s_||(s_={}));var sx,ux=s_,cx="tox-menu-nav__js",lx="tox-collection__item",fx="tox-swatch",hx={normal:cx,color:fx},dx="tox-collection__item--enabled",px="tox-collection__group-heading",mx="tox-collection__item-icon",gx="tox-collection__item-label",vx="tox-collection__item-accessory",yx="tox-collection__item-caret",bx="tox-collection__item-checkmark",wx="tox-collection__item--active",_x="tox-collection__item-icon-rtl",xx="tox-collection__item-container",Mx="tox-collection__item-container--column",Sx="tox-collection__item-container--row",kx="tox-collection__item-container--align-right",Cx="tox-collection__item-container--align-left",Ex="tox-collection__item-container--valign-top",Ax="tox-collection__item-container--valign-middle",Tx="tox-collection__item-container--valign-bottom",Ox=function(t){return zt(hx,t).getOr(cx)},Px=function(t){return"color"===t?"tox-swatches":"tox-menu"},Dx=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Px(t),tieredMenu:"tox-tiered-menu"}},Rx=function(t){var e=Dx(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:Ox(t)}},Bx=function(t,e,n){var r=Dx(n);return{tag:"div",classes:et([[r.menu,"tox-menu-"+e+"-column"],t?[r.hasIcons]:[]])}},Ix=[xw.parts.items({})],Nx=function(t,e,n){var r=Dx(n),i={tag:"div",classes:et([[r.tieredMenu]])};return{dom:i,markers:Rx(n)}},Lx=function(t,e){return function(n){var r=$(n,e);return q(r,(function(e){return{dom:t,components:e}}))}},Fx=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[xw.parts.items({preprocess:"auto"!==t?Lx({tag:"div",classes:["tox-swatches__row"]},t):w})]}]}},zx=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[xw.parts.items({preprocess:Lx({tag:"div",classes:["tox-collection__group"]},t)})]}},jx=function(t,e){var n=[],r=[];return G(t,(function(t,i){e(t,i)?(r.length>0&&n.push(r),r=[],jt(t.dom,"innerHtml")&&r.push(t)):r.push(t)})),r.length>0&&n.push(r),q(n,(function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}))},Hx=function(t,e,n){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[xw.parts.items({preprocess:function(n){return"auto"!==t&&t>1?Lx({tag:"div",classes:["tox-collection__group"]},t)(n):jx(n,(function(t,n){return"separator"===e[n].type}))}})]}},Vx=function(t,e){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[xw.parts.items({preprocess:function(e){return jx(e,(function(e,n){return"separator"===t[n].type}))}})]}},Ux=function(t){return V(t,(function(t){return"icon"in t&&void 0!==t.icon}))},$x=function(t){return console.error(an(t)),console.log(t),I.none()},qx=function(t,e,n,r,i){var o=Vx(n);return{value:t,dom:o.dom,components:o.components,items:n}},Gx=function(t,e,n,r,i){if("color"===i){var o=Fx(r);return{value:t,dom:o.dom,components:o.components,items:n}}if("normal"===i&&"auto"===r){o=Hx(r,n);return{value:t,dom:o.dom,components:o.components,items:n}}if("normal"===i&&1===r){o=Hx(1,n);return{value:t,dom:o.dom,components:o.components,items:n}}if("normal"===i){o=Hx(r,n);return{value:t,dom:o.dom,components:o.components,items:n}}if("listpreview"===i&&"auto"!==r){o=zx(r);return{value:t,dom:o.dom,components:o.components,items:n}}return{value:t,dom:Bx(e,r,i),components:Ix,items:n}},Wx=[xn("type"),xn("src"),Rn("alt"),Gn("classes",[],dn)],Kx=Fe(Wx),Xx=[xn("type"),xn("text"),Rn("name"),Gn("classes",["tox-collection__item-label"],dn)],Yx=Fe(Xx),Zx=Je((function(){return sn("type",{cardimage:Kx,cardtext:Yx,cardcontainer:Jx})})),Jx=Fe([xn("type"),Hn("direction","horizontal"),Hn("align","left"),Hn("valign","middle"),Tn("items",Zx)]),Qx=[Un("disabled",!1),Rn("text"),Rn("shortcut"),Ge("value","value",ne((function(){return La("menuitem-value")})),ln()),Fn("meta",{})],tM=Fe([xn("type"),Rn("label"),Tn("items",Zx),$n("onSetup",(function(){return m})),$n("onAction",m)].concat(Qx)),eM=function(t){return nn("cardmenuitem",tM,t)},nM=Fe([xn("type"),Un("active",!1),Rn("icon")].concat(Qx)),rM=function(t){return nn("choicemenuitem",nM,t)},iM=["inserttable","colorswatch"],oM=Fe([xn("type"),Mn("fancytype",iM),$n("onAction",m)]),aM=function(t){return nn("fancymenuitem",oM,t)},sM=Fe([xn("type"),$n("onSetup",(function(){return m})),$n("onAction",m),Rn("icon")].concat(Qx)),uM=function(t){return nn("menuitem",sM,t)},cM=Fe([xn("type"),kn("getSubmenuItems"),$n("onSetup",(function(){return m})),Rn("icon")].concat(Qx)),lM=function(t){return nn("nestedmenuitem",cM,t)},fM=Fe([xn("type"),Rn("icon"),Un("active",!1),$n("onSetup",(function(){return m})),kn("onAction")].concat(Qx)),hM=function(t){return nn("togglemenuitem",fM,t)},dM=function(t,e,n){var r=Zh(t.element,"."+n);if(r.length>0){var i=tt(r,(function(t){var n=t.dom.getBoundingClientRect().top,i=r[0].dom.getBoundingClientRect().top;return Math.abs(n-i)>e})).getOr(r.length);return I.some({numColumns:i,numRows:Math.ceil(r.length/i)})}return I.none()},pM=function(t,e){return jl([Mb(t,e)])},mM=function(t){return pM(La("unnamed-events"),t)},gM={namedEvents:pM,unnamedEvents:mM},vM=La("tooltip.exclusive"),yM=La("tooltip.show"),bM=La("tooltip.hide"),wM=function(t,e,n){t.getSystem().broadcastOn([vM],{})},_M=function(t,e,n,r){n.getTooltip().each((function(t){t.getSystem().isConnected()&&_b.set(t,r)}))},xM=Object.freeze({__proto__:null,hideAllExclusive:wM,setComponents:_M}),MM=function(t,e){var n=function(n){e.getTooltip().each((function(r){Vd(r),t.onHide(n,r),e.clearTooltip()})),e.clearTimer()},r=function(n){if(!e.isShowing()){wM(n);var r=t.lazySink(n).getOrDie(),i=n.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:go("normal"===t.mode?[wo(Ci(),(function(t){co(n,yM)})),wo(Si(),(function(t){co(n,bM)}))]:[]),behaviours:jl([_b.config({})])});e.setTooltip(i),zd(r,i),t.onShow(n,i),Rd.position(r,t.anchor(n),i)}};return go(et([[wo(yM,(function(n){e.resetTimer((function(){r(n)}),t.delay)})),wo(bM,(function(r){e.resetTimer((function(){n(r)}),t.delay)})),wo(Hi(),(function(t,e){var r=e;r.universal||H(r.channels,vM)&&n(t)})),Po((function(t){n(t)}))],"normal"===t.mode?[wo(Ei(),(function(t){co(t,yM)})),wo(zi(),(function(t){co(t,bM)})),wo(Ci(),(function(t){co(t,yM)})),wo(Si(),(function(t){co(t,bM)}))]:[wo(so(),(function(t,e){co(t,yM)})),wo(uo(),(function(t){co(t,bM)}))]]))},SM=Object.freeze({__proto__:null,events:MM}),kM=[bn("lazySink"),bn("tooltipDom"),Fn("exclusive",!0),Fn("tooltipComponents",[]),Fn("delay",300),Vn("mode","normal",["normal","follow-highlight"]),Fn("anchor",(function(t){return{anchor:"hotspot",hotspot:t,layouts:{onLtr:b([wl,bl,ml,vl,gl,yl]),onRtl:b([wl,bl,ml,vl,gl,yl])}}})),Fc("onHide"),Fc("onShow")],CM=function(){var t=Xn(I.none()),e=Xn(I.none()),n=function(){return e.get()},r=function(t){e.set(I.some(t))},i=function(){e.set(I.none())},o=function(){t.get().each((function(t){clearTimeout(t)}))},a=function(e,n){o(),t.set(I.some(setTimeout((function(){e()}),n)))},s=function(){return e.get().isSome()},u=b("not-implemented");return is({getTooltip:n,isShowing:s,setTooltip:r,clearTooltip:i,clearTimer:o,resetTimer:a,readState:u})},EM=Object.freeze({__proto__:null,init:CM}),AM=Vl({fields:kM,name:"tooltipping",active:SM,state:EM,apis:xM}),TM=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},OM=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),PM=tinymce.util.Tools.resolve("tinymce.util.I18n"),DM=["input","button","textarea","select"],RM=function(t,e,n){var r=e.disabled()?HM:VM;r(t,e)},BM=function(t,e){return!0===e.useNative&&H(DM,Bo(t.element))},IM=function(t){return Ea(t.element,"disabled")},NM=function(t){Ma(t.element,"disabled","disabled")},LM=function(t){Aa(t.element,"disabled")},FM=function(t){return"true"===ka(t.element,"aria-disabled")},zM=function(t){Ma(t.element,"aria-disabled","true")},jM=function(t){Ma(t.element,"aria-disabled","false")},HM=function(t,e,n){e.disableClass.each((function(e){Ls(t.element,e)}));var r=BM(t,e)?NM:zM;r(t),e.onDisabled(t)},VM=function(t,e,n){e.disableClass.each((function(e){zs(t.element,e)}));var r=BM(t,e)?LM:jM;r(t),e.onEnabled(t)},UM=function(t,e){return BM(t,e)?IM(t):FM(t)},$M=function(t,e,n,r){var i=r?HM:VM;i(t,e)},qM=Object.freeze({__proto__:null,enable:VM,disable:HM,isDisabled:UM,onLoad:RM,set:$M}),GM=function(t,e){return cs({classes:e.disabled()?e.disableClass.toArray():[]})},WM=function(t,e){return go([vo(Vi(),(function(e,n){return UM(e,t)})),Bl(t,e,RM)])},KM=Object.freeze({__proto__:null,exhibit:GM,events:WM}),XM=[$n("disabled",S),Fn("useNative",!0),On("disableClass"),Fc("onDisabled"),Fc("onEnabled")],YM=Vl({fields:XM,name:"disabling",active:KM,apis:qM}),ZM=tinymce.util.Tools.resolve("tinymce.EditorManager"),JM=function(t){var e=t.getParam("skin"),n=t.getParam("skin_url");if(!1!==e){var r=e||"oxide";n=n?t.documentBaseURI.toAbsolute(n):ZM.baseURL+"/skins/ui/"+r}return n},QM=function(t){return t.getParam("readonly",!1,"boolean")},tS=function(t){return!1===t.getParam("skin")},eS=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},nS=function(t){return t.getParam("width",OM.DOM.getStyle(t.getElement(),"width"))},rS=function(t){return I.from(t.getParam("min_width")).filter(d)},iS=function(t){return I.from(t.getParam("min_height")).filter(d)},oS=function(t){return I.from(t.getParam("max_width")).filter(d)},aS=function(t){return I.from(t.getParam("max_height")).filter(d)},sS=function(t){return I.from(t.getParam("style_formats")).filter(s)},uS=function(t){return t.getParam("style_formats_merge",!1,"boolean")},cS=function(t){return t.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},lS=function(t){return t.getParam("removed_menuitems","")},fS=function(t){return!1!==t.getParam("menubar",!0,"boolean")},hS=function(t){var e=t.getParam("toolbar",!0),n=!0===e,r=o(e),i=s(e)&&e.length>0;return!pS(t)&&(i||r||n)},dS=function(t){var e=U(9,(function(e){return t.getParam("toolbar"+(e+1),!1,"string")})),n=X(e,(function(t){return"string"===typeof t}));return n.length>0?I.some(n):I.none()},pS=function(t){return dS(t).fold((function(){var e=t.getParam("toolbar",[],"string[]");return e.length>0}),k)};(function(t){t["default"]="wrap",t["floating"]="floating",t["sliding"]="sliding",t["scrolling"]="scrolling"})(sx||(sx={}));var mS,gS=function(t){return t.getParam("toolbar_mode","","string")};(function(t){t["auto"]="auto",t["top"]="top",t["bottom"]="bottom"})(mS||(mS={}));var vS,yS=function(t){return t.getParam("toolbar_groups",{},"object")},bS=function(t){return t.getParam("toolbar_location",mS.auto,"string")},wS=function(t){return bS(t)===mS.bottom},_S=function(t){return t.getParam("fixed_toolbar_container","","string")},xS=function(t){return t.getParam("fixed_toolbar_container_target")},MS=function(t){return t.getParam("toolbar_persist",!1,"boolean")},SS=function(t){if(!t.inline)return I.none();var e=_S(t);if(e.length>0)return pc(qs(),e);var n=xS(t);return f(n)?I.some(er.fromDom(n)):I.none()},kS=function(t){return t.inline&&SS(t).isSome()},CS=function(t){var e=SS(t);return e.getOrThunk((function(){return na(ea(er.fromDom(t.getElement())))}))},ES=function(t){return t.inline&&!fS(t)&&!hS(t)&&!pS(t)},AS=function(t){var e=t.getParam("toolbar_sticky",!1,"boolean");return(e||t.inline)&&!kS(t)&&!ES(t)},TS=function(t){return t.getParam("draggable_modal",!1,"boolean")},OS=function(t){var e=t.getParam("menu");return e?Pt(e,(function(t){return E(E({},t),{items:t.items})})):{}},PS=function(t){return t.getParam("menubar")},DS=function(t){return t.getParam("toolbar",!0)},RS=function(t){return t.getParam("file_picker_callback")},BS=function(t){return t.getParam("file_picker_types")},IS=function(t){return t.getParam("file_browser_callback_types")},NS=function(t){return!1===t.getParam("typeahead_urls")},LS=function(t){return t.getParam("anchor_top","#top")},FS=function(t){return t.getParam("anchor_bottom","#bottom")},zS=function(t){var e=t.getParam("file_picker_validator_handler",void 0,"function");return void 0===e?t.getParam("filepicker_validator_handler",void 0,"function"):e},jS="silver.readonly",HS=Fe([Sn("readonly")]),VS=function(t,e){var n=t.outerContainer,r=n.element;e&&(t.mothership.broadcastOn([pp()],{target:r}),t.uiMothership.broadcastOn([pp()],{target:r})),t.mothership.broadcastOn([jS],{readonly:e}),t.uiMothership.broadcastOn([jS],{readonly:e})},US=function(t,e){t.on("init",(function(){t.mode.isReadOnly()&&VS(e,!0)})),t.on("SwitchMode",(function(){return VS(e,t.mode.isReadOnly())})),QM(t)&&t.setMode("readonly")},$S=function(){var t;return Gl.config({channels:(t={},t[jS]={schema:HS,onReceive:function(t,e){YM.set(t,e.readonly)}},t)})},qS=function(t){return YM.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},GS=function(t){return YM.config({disabled:t})},WS=function(t){return YM.config({disabled:t,disableClass:"tox-tbtn--disabled"})},KS=function(t){return YM.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},XS={item:qS,button:GS,splitButton:WS,toolbarButton:KS},YS=function(t,e){var n=t.getApi(e);return function(t){t(n)}},ZS=function(t,e){return Oo((function(n){var r=YS(t,n);r((function(n){var r=t.onSetup(n);h(r)&&e.set(r)}))}))},JS=function(t,e){return Po((function(n){return YS(t,n)(e.get())}))},QS=function(t,e){return Ro((function(n,r){YS(t,n)(t.onAction),t.triggersSubmenu||e!==ux.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&co(n,Gi()),r.stop())}))},tk=(vS={},vS[Vi()]=["disabling","alloy.base.behaviour","toggling","item-events"],vS),ek=function(t){return nt(t,(function(t){return t.toArray()}))},nk=function(t,e,n,r){var i=Xn(m);return{type:"item",dom:e.dom,components:ek(e.optComponents),data:t.data,eventOrder:tk,hasSubmenu:t.triggersSubmenu,itemBehaviours:jl([Mb("item-events",[QS(t,n),ZS(t,i),JS(t,i)]),XS.item((function(){return t.disabled||r.isDisabled()})),$S(),_b.config({})].concat(t.itemBehaviours))}},rk=function(t){return{value:t.value,meta:E({text:t.text.getOr("")},t.meta)}},ik=tinymce.util.Tools.resolve("tinymce.Env"),ok=function(t){var e={alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"},n={meta:"Ctrl",access:"Shift+Alt"},r=ik.mac?e:n,i=t.split("+"),o=q(i,(function(t){var e=t.toLowerCase().trim();return jt(r,e)?r[e]:t}));return ik.mac?o.join(""):o.join("+")},ak=function(t){return{dom:{tag:"div",classes:[mx],innerHtml:t}}},sk=function(t){return{dom:{tag:"div",classes:[gx]},components:[gu(PM.translate(t))]}},uk=function(t,e){return{dom:{tag:"div",classes:e,innerHtml:t}}},ck=function(t,e){return{dom:{tag:"div",classes:[gx]},components:[{dom:{tag:t.tag,styles:t.styles},components:[gu(PM.translate(e))]}]}},lk=function(t){return{dom:{tag:"div",classes:[vx],innerHtml:ok(t)}}},fk=function(t){return{dom:{tag:"div",classes:[bx],innerHtml:t_("checkmark",t)}}},hk=function(t){return{dom:{tag:"div",classes:[yx],innerHtml:t_("chevron-right",t)}}},dk=function(t){return{dom:{tag:"div",classes:[yx],innerHtml:t_("chevron-down",t)}}},pk=function(t,e){var n="vertical"===t.direction?Mx:Sx,r="left"===t.align?Cx:kx,i=function(){switch(t.valign){case"top":return Ex;case"middle":return Ax;case"bottom":return Tx}};return{dom:{tag:"div",classes:[xx,n,r,i()]},components:e}},mk=function(t,e,n){return{dom:{tag:"img",classes:e,attributes:{src:t,alt:n.getOr("")}}}},gk=function(t,e,n,r){var i="custom",o="remove",a=function(){var a=fx,s=n.getOr(""),u=t.map((function(t){return{title:r.translate(t)}})).getOr({}),c={tag:"div",attributes:u,classes:[a]};return E(E({},c),e===i?{tag:"button",classes:T(c.classes,["tox-swatches__picker-btn"]),innerHtml:s}:e===o?{classes:T(c.classes,["tox-swatch--remove"]),innerHtml:s}:{attributes:E(E({},c.attributes),{"data-mce-color":e}),styles:{"background-color":e}})};return{dom:a(),optComponents:[]}},vk=function(t,e){var n=e.map((function(t){return{attributes:{title:PM.translate(t)}}})).getOr({});return E({tag:"div",classes:[cx,lx].concat(t?[_x]:[])},n)},yk=function(t,e,n,r,i){var o=n?e.or(I.some("")).map(ak):I.none(),a=t.checkMark,s=t.htmlContent.fold((function(){return t.textContent.map(r)}),(function(t){return I.some(uk(t,[gx]))})),u={dom:vk(i,t.ariaLabel),optComponents:[o,s,t.shortcutContent.map(lk),a,t.caret]};return u},bk=["list-num-default","list-num-lower-alpha","list-num-lower-greek","list-num-lower-roman","list-num-upper-alpha","list-num-upper-roman"],wk=["list-bull-circle","list-bull-default","list-bull-square"],_k=function(t,e,n,r){void 0===r&&(r=I.none());var i=function(t){return t.map((function(t){return PM.isRtl()&&H(bk,t)?t+"-rtl":t}))},o=PM.isRtl()&&t.iconContent.exists((function(t){return H(wk,t)})),a=i(t.iconContent).map((function(t){return e_(t,e.icons,r)})),s=I.from(t.meta).fold((function(){return sk}),(function(t){return jt(t,"style")?_(ck,t.style):sk}));return"color"===t.presets?gk(t.ariaLabel,t.value,a,e):yk(t,a,n,s,o)},xk=function(t,e){return zt(t,"tooltipWorker").map((function(t){return[AM.config({lazySink:e.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(t){return{anchor:"submenu",item:t,overrides:{maxHeightFunction:Of}}},mode:"follow-highlight",onShow:function(e,n){t((function(t){AM.setComponents(e,[vu({element:er.fromDom(t)})])}))}})]})).getOr([])},Mk=function(t){return OM.DOM.encode(t)},Sk=function(t,e){var n=PM.translate(t),r=Mk(n);if(e.length>0){var i=new RegExp(TM(e),"gi");return r.replace(i,(function(t){return'<span class="tox-autocompleter-highlight">'+t+"</span>"}))}return r},kk=function(t,e,n,r,i,o,a,s){void 0===s&&(s=!0);var u=_k({presets:r,textContent:I.none(),htmlContent:n?t.text.map((function(t){return Sk(t,e)})):I.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:I.none(),checkMark:I.none(),caret:I.none(),value:t.value},a.providers,s,t.icon);return nk({data:rk(t),disabled:t.disabled,getApi:b({}),onAction:function(e){return i(t.value,t.meta)},onSetup:b(m),triggersSubmenu:!1,itemBehaviours:xk(t.meta,a)},u,o,a.providers)},Ck=function(t,e){return q(t,(function(t){switch(t.type){case"cardcontainer":return pk(t,Ck(t.items,e));case"cardimage":return mk(t.src,t.classes,t.alt);case"cardtext":var n=t.name.exists((function(t){return H(e.cardText.highlightOn,t)})),r=n?I.from(e.cardText.matchText).getOr(""):"";return uk(Sk(t.text,r),t.classes)}}))},Ek=function(t,e,n,r){var i=function(t){return{isDisabled:function(){return YM.isDisabled(t)},setDisabled:function(e){YM.set(t,e),G(Zh(t.element,"*"),(function(n){t.getSystem().getByDom(n).each((function(t){t.hasConfigured(YM)&&YM.set(t,e)}))}))}}},o={dom:vk(!1,t.label),optComponents:[I.some({dom:{tag:"div",classes:[xx,Sx]},components:Ck(t.items,r)})]};return nk({data:rk(E({text:I.none()},t)),disabled:t.disabled,getApi:i,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:I.from(r.itemBehaviours).getOr([])},o,e,n.providers)},Ak=function(t,e,n,r,i,o,a,s){void 0===s&&(s=!0);var u=function(t){return{setActive:function(e){Zb.set(t,e)},isActive:function(){return Zb.isOn(t)},isDisabled:function(){return YM.isDisabled(t)},setDisabled:function(e){return YM.set(t,e)}}},c=_k({presets:n,textContent:e?t.text:I.none(),htmlContent:I.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:e?t.shortcut:I.none(),checkMark:e?I.some(fk(a.icons)):I.none(),caret:I.none(),value:t.value},a,s);return Kt(nk({data:rk(t),disabled:t.disabled,getApi:u,onAction:function(e){return r(t.value)},onSetup:function(t){return t.setActive(i),m},triggersSubmenu:!1,itemBehaviours:[]},c,o,a),{toggling:{toggleClass:dx,toggleOnExecute:!1,selected:t.active}})},Tk=Nm(lw(),fw()),Ok=function(t){return{value:t}},Pk=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Dk=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Rk=function(t){return Pk.test(t)||Dk.test(t)},Bk=function(t){var e=t.value.replace(Pk,(function(t,e,n,r){return e+e+n+n+r+r}));return{value:e}},Ik=function(t){var e=Bk(t),n=Dk.exec(e.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Nk=function(t){var e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Lk=function(t){var e=Nk(t.red)+Nk(t.green)+Nk(t.blue);return Ok(e)},Fk=Math.min,zk=Math.max,jk=Math.round,Hk=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Vk=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Uk=function(t,e,n,r){return{red:t,green:e,blue:n,alpha:r}},$k=function(t){var e=parseInt(t,10);return e.toString()===t&&e>=0&&e<=255},qk=function(t){var e,n,r,i=(t.hue||0)%360,o=t.saturation/100,a=t.value/100;if(o=zk(0,Fk(o,1)),a=zk(0,Fk(a,1)),0===o)return e=n=r=jk(255*a),Uk(e,n,r,1);var s=i/60,u=a*o,c=u*(1-Math.abs(s%2-1)),l=a-u;switch(Math.floor(s)){case 0:e=u,n=c,r=0;break;case 1:e=c,n=u,r=0;break;case 2:e=0,n=u,r=c;break;case 3:e=0,n=c,r=u;break;case 4:e=c,n=0,r=u;break;case 5:e=u,n=0,r=c;break;default:e=n=r=0}return e=jk(255*(e+l)),n=jk(255*(n+l)),r=jk(255*(r+l)),Uk(e,n,r,1)},Gk=function(t){var e=Ik(t),n=parseInt(e[1],16),r=parseInt(e[2],16),i=parseInt(e[3],16);return Uk(n,r,i,1)},Wk=function(t,e,n,r){var i=parseInt(t,10),o=parseInt(e,10),a=parseInt(n,10),s=parseFloat(r);return Uk(i,o,a,s)},Kk=function(t){if("transparent"===t)return I.some(Uk(0,0,0,0));var e=Hk.exec(t);if(null!==e)return I.some(Wk(e[1],e[2],e[3],"1"));var n=Vk.exec(t);return null!==n?I.some(Wk(n[1],n[2],n[3],n[4])):I.none()},Xk=function(t){return"rgba("+t.red+","+t.green+","+t.blue+","+t.alpha+")"},Yk=Uk(255,0,0,1),Zk=function(t){return t.fire("SkinLoaded")},Jk=function(t,e){return t.fire("SkinLoadError",e)},Qk=function(t){return t.fire("ResizeEditor")},tC=function(t,e){return t.fire("ResizeContent",e)},eC=function(t,e){return t.fire("ScrollContent",e)},nC=function(t,e){return t.fire("TextColorChange",e)},rC=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),iC="tinymce-custom-colors";function oC(t){void 0===t&&(t=10);var e=rC.getItem(iC),n=o(e)?JSON.parse(e):[],r=function(e){var n=t-e.length;return n<0?e.slice(0,t):e},i=r(n),a=function(e){j(i,e).each(s),i.unshift(e),i.length>t&&i.pop(),rC.setItem(iC,JSON.stringify(i))},s=function(t){i.splice(t,1)},u=function(){return i.slice(0)};return{add:a,state:u}}var aC,sC="choiceitem",uC=[{type:sC,text:"Light Green",value:"#BFEDD2"},{type:sC,text:"Light Yellow",value:"#FBEEB8"},{type:sC,text:"Light Red",value:"#F8CAC6"},{type:sC,text:"Light Purple",value:"#ECCAFA"},{type:sC,text:"Light Blue",value:"#C2E0F4"},{type:sC,text:"Green",value:"#2DC26B"},{type:sC,text:"Yellow",value:"#F1C40F"},{type:sC,text:"Red",value:"#E03E2D"},{type:sC,text:"Purple",value:"#B96AD9"},{type:sC,text:"Blue",value:"#3598DB"},{type:sC,text:"Dark Turquoise",value:"#169179"},{type:sC,text:"Orange",value:"#E67E23"},{type:sC,text:"Dark Red",value:"#BA372A"},{type:sC,text:"Dark Purple",value:"#843FA1"},{type:sC,text:"Dark Blue",value:"#236FA1"},{type:sC,text:"Light Gray",value:"#ECF0F1"},{type:sC,text:"Medium Gray",value:"#CED4D9"},{type:sC,text:"Gray",value:"#95A5A6"},{type:sC,text:"Dark Gray",value:"#7E8C8D"},{type:sC,text:"Navy Blue",value:"#34495E"},{type:sC,text:"Black",value:"#000000"},{type:sC,text:"White",value:"#ffffff"}],cC=oC(10),lC=function(t){var e=[],n=document.createElement("canvas");n.height=1,n.width=1;for(var r=n.getContext("2d"),i=function(t,e){var n=255,r=e/255,i=Math.round(t*r+n*(1-r));return("0"+i.toString(16)).slice(-2).toUpperCase()},o=function(t){if(/^[0-9A-Fa-f]{6}$/.test(t))return"#"+t.toUpperCase();r.clearRect(0,0,n.width,n.height),r.fillStyle="#FFFFFF",r.fillStyle=t,r.fillRect(0,0,1,1);var e=r.getImageData(0,0,1,1).data,o=e[0],a=e[1],s=e[2],u=e[3];return"#"+i(o,u)+i(a,u)+i(s,u)},a=0;a<t.length;a+=2)e.push({text:t[a+1],value:o(t[a]),type:"choiceitem"});return e},fC=function(t,e){return t.getParam("color_cols",e,"number")},hC=function(t){return!1!==t.getParam("custom_colors")},dC=function(t){return t.getParam("color_map")},pC=function(t){var e=dC(t);return void 0!==e?lC(e):uC},mC=function(){return q(cC.state(),(function(t){return{type:sC,text:t,value:t}}))},gC=function(t){cC.add(t)},vC=function(t,e){var n;return t.dom.getParents(t.selection.getStart(),(function(t){var r;(r=t.style["forecolor"===e?"color":"background-color"])&&(n=n||r)})),n},yC=function(t,e,n){t.undoManager.transact((function(){t.focus(),t.formatter.apply(e,{value:n}),t.nodeChanged()}))},bC=function(t,e){t.undoManager.transact((function(){t.focus(),t.formatter.remove(e,{value:null},null,!0),t.nodeChanged()}))},wC=function(t){t.addCommand("mceApplyTextcolor",(function(e,n){yC(t,e,n)})),t.addCommand("mceRemoveTextcolor",(function(e){bC(t,e)}))},_C=function(t){return Math.max(5,Math.ceil(Math.sqrt(t)))},xC=function(t){var e=pC(t),n=_C(e.length);return fC(t,n)},MC=function(t){var e="choiceitem",n={type:e,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"},r={type:e,text:"Custom color",icon:"color-picker",value:"custom"};return t?[n,r]:[n]},SC=function(t,e,n,r){if("custom"===n){var i=OC(t);i((function(n){n.each((function(n){gC(n),t.execCommand("mceApplyTextcolor",e,n),r(n)}))}),"#000000")}else"remove"===n?(r(""),t.execCommand("mceRemoveTextcolor",e)):(r(n),t.execCommand("mceApplyTextcolor",e,n))},kC=function(t,e){return t.concat(mC().concat(MC(e)))},CC=function(t,e){return function(n){n(kC(t,e))}},EC=function(t,e,n){var r="forecolor"===e?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(r,n)},AC=function(t,e,n,r,i){t.ui.registry.addSplitButton(e,{tooltip:r,presets:"color",icon:"forecolor"===e?"text-color":"highlight-bg-color",select:function(e){var r=I.from(vC(t,n));return r.bind((function(t){return Kk(t).map((function(t){var n=Lk(t).value;return pr(e.toLowerCase(),n)}))})).getOr(!1)},columns:xC(t),fetch:CC(pC(t),hC(t)),onAction:function(e){null!==i.get()&&SC(t,n,i.get(),m)},onItemAction:function(r,o){SC(t,n,o,(function(n){i.set(n),nC(t,{name:e,color:n})}))},onSetup:function(n){null!==i.get()&&EC(n,e,i.get());var r=function(t){t.name===e&&EC(n,t.name,t.color)};return t.on("TextColorChange",r),function(){t.off("TextColorChange",r)}}})},TC=function(t,e,n,r){t.ui.registry.addNestedMenuItem(e,{text:r,icon:"forecolor"===e?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(e){SC(t,n,e.value,m)}}]}})},OC=function(t){return function(e,n){var r=!1,i=function(n){var i=n.getData(),o=i.colorpicker;r?(e(I.from(o)),n.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",o]))},o=function(t,e){"hex-valid"===e.name&&(r=e.value)},a={colorpicker:n};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onAction:o,onSubmit:i,onClose:m,onCancel:function(){e(I.none())}})}},PC=function(t){wC(t);var e=Xn(null),n=Xn(null);AC(t,"forecolor","forecolor","Text color",e),AC(t,"backcolor","hilitecolor","Background color",n),TC(t,"forecolor","forecolor","Text color"),TC(t,"backcolor","hilitecolor","Background color")},DC=function(t,e,n,r,i,o,a,s){var u=Ux(e),c="color"!==i?"normal":"color",l=RC(e,n,r,c,o,a,s);return Gx(t,u,l,r,i)},RC=function(t,e,n,r,i,o,a){return cg(q(t,(function(s){return"choiceitem"===s.type?rM(s).fold($x,(function(u){return I.some(Ak(u,1===n,r,e,o(s.value),i,a,Ux(t)))})):I.none()})))},BC=function(t,e){var n=Rx(e);if(1===t)return{mode:"menu",moveOnTab:!0};if("auto"===t)return{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}};var r="color"===e?"tox-swatches__row":"tox-collection__group";return{mode:"matrix",rowSelector:"."+r}},IC=function(t,e){return 1===t?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===t?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===e?".tox-swatches__row":".tox-collection__group",cell:"color"===e?"."+fx:"."+lx}}},NC=function(t,e){var n=kC(e.colorinput.getColors(),e.colorinput.hasCustomColors()),r=e.colorinput.getColorCols(),i="color",o=DC(La("menu-value"),n,(function(e){t.onAction({value:e})}),r,i,ux.CLOSE_ON_EXECUTE,S,e.shared.providers),a=E(E({},o),{markers:Rx(i),movement:BC(r,i)});return{type:"widget",data:{value:La("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Tk.widget(xw.sketch(a))]}},LC=La("cell-over"),FC=La("cell-execute"),zC=function(t,e,n){var r,i=function(n){return lo(n,LC,{row:t,col:e})},o=function(n){return lo(n,FC,{row:t,col:e})},a=function(t,e){e.stop(),o(t)};return bu({dom:{tag:"div",attributes:(r={role:"button"},r["aria-labelledby"]=n,r)},behaviours:jl([Mb("insert-table-picker-cell",[wo(Ci(),Db.focus),wo(Vi(),o),wo(Ri(),a),wo($i(),a)]),Zb.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Db.config({onFocus:i})])})},jC=function(t,e,n){for(var r=[],i=0;i<e;i++){for(var o=[],a=0;a<n;a++)o.push(zC(i,a,t));r.push(o)}return r},HC=function(t,e,n,r,i){for(var o=0;o<r;o++)for(var a=0;a<i;a++)Zb.set(t[o][a],o<=e&&a<=n)},VC=function(t){return nt(t,(function(t){return q(t,wu)}))},UC=function(t,e){return gu(e+1+"x"+(t+1))},$C=function(t){var e=10,n=10,r=La("size-label"),i=jC(r,e,n),o=Jw({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:r}},components:[gu("0x0")],behaviours:jl([_b.config({})])});return{type:"widget",data:{value:La("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Tk.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:VC(i).concat(o.asSpec()),behaviours:jl([Mb("insert-table-picker",[Co(LC,(function(t,r,a){var s=a.event.row,u=a.event.col;HC(i,s,u,e,n),_b.set(o.get(t),[UC(s,u)])})),Co(FC,(function(e,n,r){t.onAction({numRows:r.event.row+1,numColumns:r.event.col+1}),co(e,Gi())}))]),fb.config({initSize:{numRows:e,numColumns:n},mode:"flatgrid",selector:'[role="button"]'})])})]}},qC={inserttable:$C,colorswatch:NC},GC=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?I.some(t[e]):I.none()},WC=function(t,e){return GC(qC,t.fancytype).map((function(n){return n(t,e)}))},KC=function(t,e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!1);var o=i?dk(n.icons):hk(n.icons),a=function(t){return{isDisabled:function(){return YM.isDisabled(t)},setDisabled:function(e){return YM.set(t,e)}}},s=_k({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:I.none(),ariaLabel:t.text,caret:I.some(o),checkMark:I.none(),shortcutContent:t.shortcut},n,r);return nk({data:rk(t),getApi:a,disabled:t.disabled,onAction:m,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},s,e,n)},XC=function(t,e,n,r){void 0===r&&(r=!0);var i=function(t){return{isDisabled:function(){return YM.isDisabled(t)},setDisabled:function(e){return YM.set(t,e)}}},o=_k({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:I.none(),ariaLabel:t.text,caret:I.none(),checkMark:I.none(),shortcutContent:t.shortcut},n,r);return nk({data:rk(t),getApi:i,disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,e,n)},YC=function(t){var e=t.text.fold((function(){return{}}),(function(t){return{innerHtml:t}}));return{type:"separator",dom:E({tag:"div",classes:[lx,px]},e),components:[]}},ZC=function(t,e,n,r){void 0===r&&(r=!0);var i=function(t){return{setActive:function(e){Zb.set(t,e)},isActive:function(){return Zb.isOn(t)},isDisabled:function(){return YM.isDisabled(t)},setDisabled:function(e){return YM.set(t,e)}}},o=_k({iconContent:t.icon,textContent:t.text,htmlContent:I.none(),ariaLabel:t.text,checkMark:I.some(fk(n.icons)),caret:I.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},n,r);return Kt(nk({data:rk(t),disabled:t.disabled,getApi:i,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,e,n),{toggling:{toggleClass:dx,toggleOnExecute:!1,selected:t.active}})},JC=kk,QC=YC,tE=XC,eE=KC,nE=ZC,rE=WC,iE=Ek;(function(t){t[t["ContentFocus"]=0]="ContentFocus",t[t["UiFocus"]=1]="UiFocus"})(aC||(aC={}));var oE=function(t,e,n,r,i){var o=n.shared.providers,a=function(t){return i?E(E({},t),{shortcut:I.none(),icon:t.text.isSome()?I.none():t.icon}):t};switch(t.type){case"menuitem":return uM(t).fold($x,(function(t){return I.some(tE(a(t),e,o,r))}));case"nestedmenuitem":return lM(t).fold($x,(function(t){return I.some(eE(a(t),e,o,r,i))}));case"togglemenuitem":return hM(t).fold($x,(function(t){return I.some(nE(a(t),e,o,r))}));case"separator":return L_(t).fold($x,(function(t){return I.some(QC(t))}));case"fancymenuitem":return aM(t).fold($x,(function(t){return rE(a(t),n)}));default:return console.error("Unknown item in general menu",t),I.none()}},aE=function(t,e,n,r,i,o,a){var s=1===r,u=!s||Ux(t);return cg(q(t,(function(t){switch(t.type){case"separator":return j_(t).fold($x,(function(t){return I.some(QC(t))}));case"cardmenuitem":return eM(t).fold($x,(function(t){return I.some(iE(E(E({},t),{onAction:function(e){t.onAction(e),n(t.value,t.meta)}}),i,o,{itemBehaviours:xk(t.meta,o),cardText:{matchText:e,highlightOn:a}}))}));case"autocompleteitem":default:return H_(t).fold($x,(function(t){return I.some(JC(t,e,s,"normal",n,i,o,u))}))}})))},sE=function(t,e,n,r,i){var o=Ux(e),a=cg(q(e,(function(t){var e=function(t){return i?!t.hasOwnProperty("text"):o},a=function(t){return oE(t,n,r,e(t),i)};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?a(E(E({},t),{disabled:!0})):a(t)}))),s=i?qx:Gx;return s(t,o,a,1,"normal")},uE=function(t){return Bw.singleData(t.value,t)},cE=function(t,e,n,r){var i=n===aC.ContentFocus?uv():sv(),o=BC(e,r),a=Rx(r);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:a.selectedItem,item:a.item},movement:o,fakeFocus:n===aC.ContentFocus,focusManager:i,menuBehaviours:gM.unnamedEvents("auto"!==e?[]:[Oo((function(t,e){dM(t,4,a.item).each((function(e){var n=e.numColumns,r=e.numRows;fb.setGridSize(t,r,n)}))}))])}},lE=function(t,e){var n=Xn(I.none()),r=Xn(!1),i=bu(Lw.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:jl([Mb("dismissAutocompleter",[wo(eo(),(function(){return u()}))])]),lazySink:e.getSink})),o=function(){return Lw.isOpen(i)},a=function(){return n.get().isSome()},s=function(){a()&&Lw.hide(i)},u=function(){if(a()){var e=n.get().map((function(t){return t.element}));m_(e.getOr(er.fromDom(t.selection.getNode()))).each(va),s(),n.set(I.none()),r.set(!1)}},c=Yt((function(){return ax(t)})),l=function(n,i){var o=ht(i,(function(t){return I.from(t.columns)})).getOr(1);return nt(i,(function(i){var a=i.items;return aE(a,i.matchText,(function(e,o){var a=t.selection.getRng();x_(t.dom,a,n).fold((function(){return console.error("Lost context. Cursor probably moved")}),(function(t){var n=t.range,a={hide:function(){u()},reload:function(t){s(),p(t)}};r.set(!0),i.onAction(a,n,e,o),r.set(!1)}))}),o,ux.BUBBLE_TO_SANDBOX,e,i.highlightOn)}))},f=function(e){if(!a()){var i=p_(t,e.range);n.set(I.some({triggerChar:e.triggerChar,element:i,matchLength:e.text.length})),r.set(!1)}},h=function(e,n,r,o){e.matchLength=n.text.length;var a=ht(r,(function(t){return I.from(t.columns)})).getOr(1);Lw.showAt(i,{anchor:"node",root:er.fromDom(t.getBody()),node:I.from(e.element)},xw.sketch(cE(Gx("autocompleter-value",!0,o,a,"normal"),a,aC.ContentFocus,"normal"))),Lw.getContent(i).each(zg.highlightFirst)},d=function(e){return n.get().map((function(n){return x_(t.dom,t.selection.getRng(),n.triggerChar).bind((function(n){return I_(t,c,n,e)}))})).getOrThunk((function(){return B_(t,c)}))},p=function(t){d(t).fold(u,(function(t){f(t.context),t.lookupData.then((function(e){n.get().map((function(n){var r=t.context;if(n.triggerChar===r.triggerChar){var i=l(r.triggerChar,e);i.length>0?h(n,r,e,i):r.text.length-n.matchLength>=10?u():s()}}))}))}))},m=c_((function(t){27!==t.which&&p()}),50),g={onKeypress:m,cancelIfNecessary:u,isMenuOpen:o,isActive:a,isProcessingAction:r.get,getView:function(){return Lw.getContent(i)}};!1===t.hasPlugin("rtc")&&S_.setup(g,t)},fE={register:lE},hE=k,dE=function(t,e,n){return Hu(t,e,hE,n)},pE=function(t,e,n){return Vu(t,e,hE,n)},mE=Fu,gE=function(t,e,n){return mc(t,e,n).isSome()},vE=function(t,e){var n=null,r=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n=setTimeout((function(){t.apply(null,r),n=null}),e)},i=function(){null!==n&&(clearTimeout(n),n=null)};return{cancel:i,schedule:r}},yE=5,bE=400,wE=function(t){var e=t.raw;return void 0===e.touches||1!==e.touches.length?I.none():I.some(e.touches[0])},_E=function(t,e){var n=Math.abs(t.clientX-e.x),r=Math.abs(t.clientY-e.y);return n>yE||r>yE},xE=function(t){var e=Xn(I.none()),n=Xn(!1),r=vE((function(e){t.triggerEvent(qi(),e),n.set(!0)}),bE),i=function(t){return wE(t).each((function(i){r.cancel();var o={x:i.clientX,y:i.clientY,target:t.target};r.schedule(t),n.set(!1),e.set(I.some(o))})),I.none()},o=function(t){return r.cancel(),wE(t).each((function(t){e.get().each((function(n){_E(t,n)&&e.set(I.none())}))})),I.none()},a=function(i){r.cancel();var o=function(t){return ii(t.target,i.target)};return e.get().filter(o).map((function(e){return n.get()?(i.prevent(),!1):t.triggerEvent($i(),i)}))},s=le([{key:yi(),value:i},{key:bi(),value:o},{key:wi(),value:a}]),u=function(t,e){return zt(s,e).bind((function(e){return e(t)}))};return{fireIfReady:u}},ME=function(t){var e=t.raw;return e.which===jg[0]&&!H(["input","textarea"],Bo(t.target))&&!gE(t.target,'[contenteditable="true"]')},SE=function(){return Wr().browser.isFirefox()},kE=Le([kn("triggerEvent"),Fn("stopBackspace",!0)]),CE=function(t,e){return SE()?pE(t,"focus",e):dE(t,"focusin",e)},EE=function(t,e){return SE()?pE(t,"blur",e):dE(t,"focusout",e)},AE=function(t,e){var n=on("Getting GUI events settings",kE,e),r=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],i=xE(n),o=q(r.concat(["selectstart","input","contextmenu","change","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(e){return dE(t,e,(function(t){i.fireIfReady(t,e).each((function(e){e&&t.kill()}));var r=n.triggerEvent(e,t);r&&t.kill()}))})),a=Xn(I.none()),s=dE(t,"paste",(function(t){i.fireIfReady(t,"paste").each((function(e){e&&t.kill()}));var e=n.triggerEvent("paste",t);e&&t.kill(),a.set(I.some(setTimeout((function(){n.triggerEvent(ji(),t)}),0)))})),u=dE(t,"keydown",(function(t){var e=n.triggerEvent("keydown",t);e?t.kill():!0===n.stopBackspace&&ME(t)&&t.prevent()})),c=CE(t,(function(t){var e=n.triggerEvent("focusin",t);e&&t.kill()})),l=Xn(I.none()),f=EE(t,(function(t){var e=n.triggerEvent("focusout",t);e&&t.kill(),l.set(I.some(setTimeout((function(){n.triggerEvent(zi(),t)}),0)))})),h=function(){G(o,(function(t){t.unbind()})),u.unbind(),c.unbind(),f.unbind(),s.unbind(),a.get().each(clearTimeout),l.get().each(clearTimeout)};return{unbind:h}},TE=function(t,e){var n=zt(t,"target").getOr(e);return Xn(n)},OE=function(t,e){var n=Xn(!1),r=Xn(!1),i=function(){n.set(!0)},o=function(){r.set(!0)};return{stop:i,cut:o,isStopped:n.get,isCut:r.get,event:t,setSource:e.set,getSource:e.get}},PE=function(t){var e=Xn(!1),n=function(){e.set(!0)};return{stop:n,cut:m,isStopped:e.get,isCut:S,event:t,setSource:M("Cannot set source of a broadcasted event"),getSource:M("Cannot get source of a broadcasted event")}},DE=Ut.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),RE=function(t,e,n,r,i,o){var a=t(e,r),s=OE(n,i);return a.fold((function(){return o.logEventNoHandlers(e,r),DE.complete()}),(function(t){var n=t.descHandler,r=gs(n);return r(s),s.isStopped()?(o.logEventStopped(e,t.element,n.purpose),DE.stopped()):s.isCut()?(o.logEventCut(e,t.element,n.purpose),DE.complete()):qo(t.element).fold((function(){return o.logNoParent(e,t.element,n.purpose),DE.complete()}),(function(r){return o.logEventResponse(e,t.element,n.purpose),DE.resume(r)}))}))},BE=function(t,e,n,r,i,o){return RE(t,e,n,r,i,o).fold(k,(function(r){return BE(t,e,n,r,i,o)}),S)},IE=function(t,e,n,r,i){var o=TE(n,r);return RE(t,e,n,r,o,i)},NE=function(t,e,n){var r=PE(e);return G(t,(function(t){var e=t.descHandler,n=gs(e);n(r)})),r.isStopped()},LE=function(t,e,n,r){return FE(t,e,n,n.target,r)},FE=function(t,e,n,r,i){var o=TE(n,r);return BE(t,e,n,r,o,i)},zE=function(t,e){return{element:t,descHandler:e}},jE=function(t,e){return{id:t,descHandler:e}},HE=function(){var t={},e=function(e,n,r){Ot(r,(function(r,i){var o=void 0!==t[i]?t[i]:{};o[n]=ms(r,e),t[i]=o}))},n=function(t,e){return $a(e).fold((function(){return I.none()}),(function(n){return t.bind((function(t){return zt(t,n)})).map((function(t){return zE(e,t)}))}))},r=function(e){return zt(t,e).map((function(t){return Nt(t,(function(t,e){return jE(e,t)}))})).getOr([])},i=function(e,r,i){var o=zt(t,r);return li(i,(function(t){return n(o,t)}),e)},o=function(e){Ot(t,(function(t,n){t.hasOwnProperty(e)&&delete t[e]}))};return{registerId:e,unregisterId:o,filterByType:r,find:i}},VE=function(){var t=HE(),e={},n=function(t){var e=t.element;return $a(e).fold((function(){return Va("uid-",t.element)}),(function(t){return t}))},r=function(t,n){var r=e[n];if(r!==t)throw new Error('The tagId "'+n+'" is already used by: '+Da(r.element)+"\nCannot use it for: "+Da(t.element)+"\nThe conflicting element is"+($s(r.element)?" ":" not ")+"already in the DOM");o(t)},i=function(i){var o=n(i);Ht(e,o)&&r(i,o);var a=[i];t.registerId(a,o,i.events),e[o]=i},o=function(n){$a(n.element).each((function(n){delete e[n],t.unregisterId(n)}))},a=function(e){return t.filterByType(e)},s=function(e,n,r){return t.find(e,n,r)},u=function(t){return zt(e,t)};return{find:s,filter:a,register:i,unregister:o,getById:u}},UE=function(t){var e=t.dom,n=e.attributes,r=A(e,["attributes"]);return{uid:t.uid,dom:E({tag:"div",attributes:E({role:"presentation"},n)},r),components:t.components,behaviours:Zp(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},$E=sg({name:"Container",factory:UE,configFields:[Fn("components",[]),Yp("containerBehaviours",[]),Fn("events",{}),Fn("domModification",{}),Fn("eventOrder",{})]